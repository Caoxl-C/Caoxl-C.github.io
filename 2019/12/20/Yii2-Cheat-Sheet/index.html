<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>yii2 速查表 | Keep It Simple And Stupid</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="Yii2速查表" />
  
  
  
  
  <meta name="description" content="Yii2 速查表">
<meta property="og:type" content="article">
<meta property="og:title" content="Yii2 速查表">
<meta property="og:url" content="http://blog.caoxl.com/2019/12/20/Yii2-Cheat-Sheet/index.html">
<meta property="og:site_name" content="Keep It Simple And Stupid">
<meta property="og:description" content="Yii2 速查表">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-12-20T06:21:48.000Z">
<meta property="article:modified_time" content="2019-12-20T09:20:40.000Z">
<meta property="article:author" content="CAO XIAN LIANG">
<meta property="article:tag" content="Yii2">
<meta property="article:tag" content="速查表">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Keep It Simple And Stupid" type="application/atom+xml">
  

  

  <link rel="icon" href="https://images.unsplash.com/photo-1643801026603-63d4f50be313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=767&q=80">
  <link rel="apple-touch-icon" href="/https://images.unsplash.com/photo-1643801026603-63d4f50be313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=767&q=80">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>

  
<script src="/js/bootstrap.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    
<link rel="stylesheet" href="/css/dialog.css">

  

  

  
    <link rel="stylesheet" href="/css/header-post.css" >
  

  
  
  

<style type="text/css">
.spoiler {
  display: inline-flex;
}
p.spoiler {
  display: flex;
}
.spoiler a {
  pointer-events: none;
}
.spoiler-blur, .spoiler-blur > * {
  transition: text-shadow .5s ease;
}
.spoiler .spoiler-blur, .spoiler .spoiler-blur > * {
  color: rgba(0, 0, 0, 0);
  background-color: rgba(0, 0, 0, 0);
  text-shadow: 0 0 10px grey;
  cursor: pointer;
}
.spoiler .spoiler-blur:hover, .spoiler .spoiler-blur:hover > * {
  text-shadow: 0 0 5px grey;
}
.spoiler-box, .spoiler-box > * {
  transition: color .5s ease,
  background-color .5s ease;
}
.spoiler .spoiler-box, .spoiler .spoiler-box > * {
  color: black;
  background-color: black;
  text-shadow: none;
}</style><meta name="generator" content="Hexo 6.3.0"></head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="https://images.unsplash.com/photo-1643801026603-63d4f50be313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=767&q=80">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">首页</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">归档</a> </li>
                
                  <li> <a class="main-nav-link" href="/categories">分类</a> </li>
                
                  <li> <a class="main-nav-link" href="/tags">标签</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">关于</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(无标题)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-Yii2-Cheat-Sheet" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      Yii2 速查表
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2019/12/20/Yii2-Cheat-Sheet/" class="article-date">
	  <time datetime="2019-12-20T06:21:48.000Z" itemprop="datePublished">2019-12-20</time>
	</a>

      
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/">框架相关</a>

      
	<a class="article-views">
	<span id="busuanzi_container_page_pv">
		阅读量<span id="busuanzi_value_page_pv"></span>
	</span>
	</a>

    </div>

    <div class="article-entry" itemprop="articleBody">
      
        
        
          <blockquote>
<p>Yii2 速查表</p>
</blockquote>
<span id="more"></span>

<h2 id="Composer"><a href="#Composer" class="headerlink" title="Composer"></a>Composer</h2><ul>
<li>安装yii程序</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer create-project --prefer-dist yiisoft/yii2-app-basic basic</span><br></pre></td></tr></table></figure>

<ul>
<li>通过<code>composer.json</code>安装扩展</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer install</span><br></pre></td></tr></table></figure>

<ul>
<li>更新本地<code>composer</code>扩展库</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer update</span><br></pre></td></tr></table></figure>

<ul>
<li>直接安装某个<code>composer</code>扩展</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer <span class="keyword">require</span> [options] [--] [vendor/packages]...</span><br></pre></td></tr></table></figure>

<h2 id="DAO"><a href="#DAO" class="headerlink" title="DAO"></a>DAO</h2><blockquote>
<p>Yii的数据库读取对象，在PDO之上，DAO后有了Query Builder和AR</p>
</blockquote>
<ul>
<li>获得数据库连接</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$conn</span> = <span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db;</span><br></pre></td></tr></table></figure>

<ul>
<li>执行数据库查询语句</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db-&gt;<span class="title function_ invoke__">createCommand</span>(<span class="string">&quot;SELECT * FROM `user`&quot;</span>);</span><br><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db-&gt;<span class="title function_ invoke__">createCommand</span>(<span class="string">&quot;SELECT * FROM `user` WHERE uid=:uid&quot;</span>,[<span class="string">&quot;:uid&quot;</span>=&gt;<span class="number">1</span>]);</span><br><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db-&gt;<span class="title function_ invoke__">createCommand</span>(<span class="string">&quot;SELECT * FROM `user` WHERE uid=:uid&quot;</span>)-&gt;<span class="title function_ invoke__">addValue</span>([<span class="string">&quot;:uid&quot;</span>=&gt;<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>

<ul>
<li>SQL语句插入数据</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db</span><br><span class="line">-&gt;<span class="title function_ invoke__">createCommand</span>(<span class="string">&#x27;INSERT INTO user (email, password) VALUES(&quot;test3@example.com&quot;, &quot;test3&quot;);&#x27;</span>)-&gt;<span class="title function_ invoke__">execute</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>数组形式插入数据</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db-&gt;<span class="title function_ invoke__">createCommand</span>()-&gt;<span class="title function_ invoke__">insert</span>(<span class="string">&#x27;user&#x27;</span>, [</span><br><span class="line">    <span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;test4@example.com&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span> =&gt; <span class="string">&#x27;changeme7&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;first_name&#x27;</span> =&gt; <span class="string">&#x27;Test&#x27;</span></span><br><span class="line">])-&gt;<span class="title function_ invoke__">execute</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>批量插入数据</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db-&gt;<span class="title function_ invoke__">createCommand</span>()-&gt;<span class="title function_ invoke__">batchInsert</span>(<span class="string">&#x27;user&#x27;</span>, [<span class="string">&#x27;email&#x27;</span>, <span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;first_name&#x27;</span>],[</span><br><span class="line">    [<span class="string">&#x27;james.franklin@example.com&#x27;</span>, <span class="string">&#x27;changeme7&#x27;</span>, <span class="string">&#x27;James&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;linda.marks@example.com&#x27;</span>, <span class="string">&#x27;changeme7&#x27;</span>, <span class="string">&#x27;Linda&#x27;</span>]</span><br><span class="line">    [<span class="string">&#x27;roger.martin@example.com&#x27;</span>, <span class="string">&#x27;changeme7&#x27;</span>]</span><br><span class="line">])-&gt;<span class="title function_ invoke__">execute</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>更新数据</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db-&gt;<span class="title function_ invoke__">createCommand</span>()-&gt;<span class="title function_ invoke__">update</span>(<span class="string">&#x27;user&#x27;</span>, [<span class="string">&#x27;updated_at&#x27;</span> =&gt; <span class="title function_ invoke__">time</span>()], <span class="string">&#x27;id = 2&#x27;</span>)-&gt;<span class="title function_ invoke__">execute</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>删除数据</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db-&gt;<span class="title function_ invoke__">createCommand</span>()-&gt;<span class="title function_ invoke__">delete</span>(<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;id = 3&#x27;</span>)-&gt;<span class="title function_ invoke__">execute</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>获取所有数据(数组形式返回)</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db-&gt;<span class="title function_ invoke__">createCommand</span>(<span class="string">&quot;SELECT * FROM `user`&quot;</span>)-&gt;<span class="title function_ invoke__">queryAll</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>获取一条数据（一维数组）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db-&gt;<span class="title function_ invoke__">createCommand</span>(<span class="string">&quot;SELECT * FROM `user` WHERE id = 1&quot;</span>)-&gt;<span class="title function_ invoke__">queryOne</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>获取一个值</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db-&gt;<span class="title function_ invoke__">createCommand</span>(<span class="string">&quot;SELECT count(*) AS total FROM `user` WHERE id = 1&quot;</span>)-&gt;<span class="title function_ invoke__">queryScalar</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>获取某一列（放到一位数组中）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db-&gt;<span class="title function_ invoke__">createCommand</span>(<span class="string">&quot;SELECT username FROM `user`&quot;</span>)-&gt;<span class="title function_ invoke__">queryColumn</span>();</span><br></pre></td></tr></table></figure>

<h2 id="Logging"><a href="#Logging" class="headerlink" title="Logging"></a>Logging</h2><ul>
<li><code>trace</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="title function_ invoke__">trace</span>(<span class="variable">$message</span>,<span class="variable">$category</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>info</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="title function_ invoke__">info</span>(<span class="variable">$message</span>,<span class="variable">$category</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>warning</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="title function_ invoke__">warning</span>(<span class="variable">$message</span>,<span class="variable">$category</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>error</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="title function_ invoke__">error</span>(<span class="variable">$message</span>,<span class="variable">$category</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Validator"><a href="#Validator" class="headerlink" title="Validator"></a>Validator</h2><blockquote>
<p>数据验证，最常用于模型的<code>rules()</code>函数</p>
</blockquote>
<ul>
<li><code>required</code> 必须值</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;username&quot;</span>,<span class="string">&#x27;required&#x27;</span>]</span><br><span class="line">[[<span class="string">&quot;username&quot;</span>,<span class="string">&quot;email&quot;</span>],<span class="string">&#x27;required&#x27;</span>]</span><br><span class="line">[[<span class="string">&quot;username&quot;</span>],<span class="string">&#x27;required&#x27;</span>,<span class="string">&quot;message&quot;</span>=&gt;<span class="string">&quot;&#123;attribute&#125;必须填写&quot;</span>]</span><br><span class="line">[[<span class="string">&quot;username&quot;</span>],<span class="string">&#x27;required&#x27;</span>,<span class="string">&#x27;requiredValue&#x27;</span>=&gt;<span class="string">&quot;abei&quot;</span>] <span class="comment">// 用户填写的值必须等于requiredValue才能通过验证。</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>Email</code>验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;email&quot;</span>,<span class="string">&#x27;email&#x27;</span>]</span><br><span class="line">[[<span class="string">&quot;email&quot;</span>,<span class="string">&quot;work_email&quot;</span>],<span class="string">&#x27;email&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>Boolean</code>验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;sex&#x27;</span>, <span class="string">&#x27;boolean&#x27;</span>, <span class="string">&#x27;trueValue&#x27;</span> =&gt; <span class="literal">true</span>, <span class="string">&#x27;falseValue&#x27;</span> =&gt; <span class="literal">false</span>, <span class="string">&#x27;strict&#x27;</span> =&gt; <span class="literal">true</span>];<span class="comment">// 可以认为置顶 true / false 值。</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>captcha</code>验证码</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;verificationCode&#x27;</span>, <span class="string">&#x27;captcha&#x27;</span>];</span><br></pre></td></tr></table></figure>

<ul>
<li><code>compare</code>比较</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;compare&#x27;</span>, <span class="string">&#x27;compareAttribute&#x27;</span> =&gt; <span class="string">&#x27;province&#x27;</span>,<span class="string">&#x27;message&#x27;</span>=&gt;<span class="string">&#x27;username和province必须一样&#x27;</span>] <span class="comment">//错误信息将提示给username</span></span><br><span class="line">[<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;compare&#x27;</span>, <span class="string">&#x27;compareValue&#x27;</span> =&gt; <span class="number">30</span>, <span class="string">&#x27;operator&#x27;</span> =&gt; <span class="string">&#x27;&gt;=&#x27;</span>,<span class="string">&#x27;type&#x27;</span> =&gt; <span class="string">&#x27;number&#x27;</span>];<span class="comment">//compareValue:比较常量值 operator:比较操作符 type为值类型，默认为string，会一个每个字符对比，若为number则直接判断数值</span></span><br><span class="line"><span class="comment">// operator 待选值==、===、!=、!==、&gt;、&gt;=、&lt;、&lt;=</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>date</code>验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;birth&quot;</span>,<span class="string">&quot;date&quot;</span>,<span class="string">&quot;format&quot;</span>=&gt;<span class="string">&quot;Y-m-d&quot;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>default</code>验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;age&#x27;</span>,<span class="string">&#x27;default&#x27;</span>,<span class="string">&#x27;value&#x27;</span>=&gt;<span class="literal">null</span>] <span class="comment">// 当age为空的时候设置为null</span></span><br><span class="line">[<span class="string">&#x27;country&#x27;</span>,<span class="string">&#x27;default&#x27;</span>,<span class="string">&#x27;value&#x27;</span>=&gt;<span class="string">&#x27;USA&#x27;</span>] <span class="comment">// 当 country为空时设置为USA</span></span><br><span class="line"><span class="comment">/* 如果from为空，则=今天+3天，如果to为空，则=今天+6天 */</span></span><br><span class="line">[[<span class="string">&#x27;from&#x27;</span>,<span class="string">&#x27;to&#x27;</span>],<span class="string">&#x27;default&#x27;</span>,<span class="string">&#x27;value&#x27;</span>=&gt;<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$model</span>,<span class="variable">$attribute</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d&#x27;</span>, <span class="title function_ invoke__">strtotime</span>(<span class="variable">$attribute</span> === <span class="string">&#x27;to&#x27;</span> ? <span class="string">&#x27;+3 days&#x27;</span> : <span class="string">&#x27;+6 days&#x27;</span>));</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>double/number</code>验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;v&#x27;</span>,<span class="string">&#x27;double&#x27;</span>] <span class="comment">// 判断v是否为数字</span></span><br><span class="line">[<span class="string">&#x27;v&#x27;</span>,<span class="string">&#x27;double&#x27;</span>,<span class="string">&#x27;max&#x27;</span>=&gt;<span class="number">90</span>,<span class="string">&#x27;min&#x27;</span>=&gt;<span class="number">1</span>]<span class="comment">//判断v是否为数字且大于等于1、小于等于90</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数组各元素验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 要求验证的元素必须为数组，否则会返回假并报错 */</span></span><br><span class="line">[<span class="string">&quot;categoryIds&quot;</span>,<span class="string">&quot;each&quot;</span>,<span class="string">&quot;rule&quot;</span>=&gt;[<span class="string">&#x27;integer&#x27;</span>]]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>exist</code>是否存在验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 所谓对存在的检查实质为where的与操作，必须同时满足的记录存在方可。兄弟们可以研究下，exist是对sql语句EXISTS的应用*/</span></span><br><span class="line">[<span class="string">&quot;username&quot;</span>,<span class="string">&quot;exist&quot;</span>] <span class="comment">// username输入的值已经存在</span></span><br><span class="line">[<span class="string">&quot;username&quot;</span>,<span class="string">&quot;exist&quot;</span>,<span class="string">&quot;targetAttribute&quot;</span>=&gt;<span class="string">&quot;province&quot;</span>] <span class="comment">// username的输入值必须在province列存在</span></span><br><span class="line">[<span class="string">&quot;username&quot;</span>,<span class="string">&quot;exist&quot;</span>,<span class="string">&#x27;targetAttribute&#x27;</span> =&gt; [<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;province&#x27;</span>]] <span class="comment">// username的输入值必须在username和province中存在</span></span><br><span class="line">[[<span class="string">&quot;username&quot;</span>,<span class="string">&quot;province&quot;</span>],<span class="string">&quot;exist&quot;</span>,<span class="string">&#x27;targetAttribute&#x27;</span> =&gt; [<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;province&#x27;</span>]] <span class="comment">// username和province的输入值必须在username和province中存在</span></span><br></pre></td></tr></table></figure>

<ul>
<li>file验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* maxFiles代表一次最多传几个，mimeTypes代表上传文件类型 */</span></span><br><span class="line">[<span class="string">&#x27;primaryImage&#x27;</span>, <span class="string">&#x27;file&#x27;</span>, <span class="string">&#x27;extensions&#x27;</span> =&gt; [<span class="string">&#x27;png&#x27;</span>, <span class="string">&#x27;jpg&#x27;</span>, <span class="string">&#x27;gif&#x27;</span>],<span class="string">&#x27;mimeTypes&#x27;</span>=&gt;[<span class="string">&quot;image/*&quot;</span>], <span class="string">&#x27;maxSize&#x27;</span> =&gt; <span class="number">1024</span>*<span class="number">1024</span>,<span class="string">&#x27;minSize&#x27;</span>=&gt;<span class="number">100</span>*<span class="number">1024</span>,<span class="string">&#x27;maxFiles&#x27;</span>=&gt;<span class="number">6</span>,<span class="string">&#x27;checkExtensionByMimeType&#x27;</span>=&gt;<span class="literal">true</span>],</span><br></pre></td></tr></table></figure>

<ul>
<li><code>filter</code>过滤验证函数</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;email&#x27;</span>], <span class="string">&#x27;filter&#x27;</span>, <span class="string">&#x27;filter&#x27;</span> =&gt; <span class="string">&#x27;trim&#x27;</span>, <span class="string">&#x27;skipOnArray&#x27;</span> =&gt; <span class="literal">true</span>],</span><br><span class="line">[<span class="string">&#x27;phone&#x27;</span>, <span class="string">&#x27;filter&#x27;</span>, <span class="string">&#x27;filter&#x27;</span> =&gt; <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$value</span></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// normalize phone input here</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$value</span>;</span><br><span class="line">&#125;],</span><br></pre></td></tr></table></figure>

<ul>
<li><code>image</code>验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 上传png/jpg格式，最大宽度不能超过1000px，最小宽度不能低于100px，最大高度不能高于1000px。最小高度不能低于100px */</span></span><br><span class="line">[<span class="string">&#x27;primaryImage&#x27;</span>, <span class="string">&#x27;image&#x27;</span>, <span class="string">&#x27;extensions&#x27;</span> =&gt; <span class="string">&#x27;png, jpg&#x27;</span>,<span class="string">&#x27;minWidth&#x27;</span> =&gt; <span class="number">100</span>, <span class="string">&#x27;maxWidth&#x27;</span> =&gt; <span class="number">1000</span>,<span class="string">&#x27;minHeight&#x27;</span> =&gt; <span class="number">100</span>, <span class="string">&#x27;maxHeight&#x27;</span> =&gt; <span class="number">1000</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>ip</code>验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;ip_addess&quot;</span>,<span class="string">&quot;ip&quot;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>in</code>方法验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;level&quot;</span>,<span class="string">&quot;in&quot;</span>,<span class="string">&quot;range&quot;</span>=&gt;[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>integer</code>验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;age&quot;</span>,<span class="string">&#x27;integer&#x27;</span>];</span><br><span class="line">[<span class="string">&quot;age&quot;</span>,<span class="string">&quot;integer&quot;</span>,<span class="string">&quot;max&quot;</span>=&gt;<span class="number">90</span>,<span class="string">&quot;min&quot;</span>=&gt;<span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>正则匹配验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;username&quot;</span>,<span class="string">&quot;match&quot;</span>,<span class="string">&quot;pattern&quot;</span>=&gt;<span class="string">&quot;/^[a-z]\w*$/i&quot;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>in</code>方法验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;level&quot;</span>,<span class="string">&quot;in&quot;</span>,<span class="string">&quot;range&quot;</span>=&gt;[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>safe</code>验证（多用于设置一个model的attribute）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;description&quot;</span>,<span class="string">&quot;safe&quot;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>string</code>验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;username&quot;</span>,<span class="string">&quot;string&quot;</span>,<span class="string">&quot;length&quot;</span>=&gt;[<span class="number">4</span>,<span class="number">24</span>]];</span><br><span class="line">[<span class="string">&quot;username&quot;</span>,<span class="string">&quot;string&quot;</span>,<span class="string">&quot;min&quot;</span>=&gt;<span class="number">4</span>];</span><br><span class="line">[<span class="string">&quot;username&quot;</span>,<span class="string">&quot;string&quot;</span>,<span class="string">&quot;max&quot;</span>=&gt;<span class="number">32</span>];</span><br><span class="line">[<span class="string">&quot;username&quot;</span>,<span class="string">&quot;string&quot;</span>,<span class="string">&quot;encoding&quot;</span>=&gt;<span class="string">&quot;UTF-8&quot;</span>];</span><br></pre></td></tr></table></figure>

<ul>
<li><code>unique</code>唯一验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;username&quot;</span>,<span class="string">&quot;unique&quot;</span>]</span><br><span class="line">[<span class="string">&quot;username&quot;</span>,<span class="string">&quot;unique&quot;</span>,<span class="string">&quot;targetAttribute&quot;</span>=&gt;<span class="string">&quot;province&quot;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>url</code>验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;website&quot;</span>,<span class="string">&quot;url&quot;</span>]</span><br><span class="line">[<span class="string">&quot;website&quot;</span>,<span class="string">&quot;url&quot;</span>,<span class="string">&quot;validSchemes&quot;</span>=&gt;[<span class="string">&quot;http&quot;</span>,<span class="string">&quot;https&quot;</span>]]</span><br></pre></td></tr></table></figure>

<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><ul>
<li>一个字符串中单词数量</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">StringHelper</span>::<span class="title function_ invoke__">countWords</span>(<span class="string">&quot;hello world&quot;</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>返回路径中的文件名部分</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">StringHelper</span>::<span class="title function_ invoke__">basename</span>(<span class="string">&quot;/path/hello.txt&quot;</span>,<span class="string">&quot;.txt&quot;</span>); <span class="comment">// hello</span></span><br></pre></td></tr></table></figure>

<ul>
<li>返回路径中的目录名</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">StringHelper</span>::<span class="title function_ invoke__">dirname</span>(<span class="string">&quot;/home/path/hello.txt&quot;</span>);<span class="comment">// /home/path</span></span><br></pre></td></tr></table></figure>

<ul>
<li>超出内容用…代替(不含HTML)</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">StringHelper</span>::<span class="title function_ invoke__">truncate</span>(<span class="string">&quot;hello world&quot;</span>,<span class="number">7</span>,<span class="string">&#x27;...&#x27;</span>); <span class="comment">//hello w...</span></span><br></pre></td></tr></table></figure>

<ul>
<li>超出内容用…代替(识别HTML)</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">StringHelper</span>::<span class="title function_ invoke__">truncate</span>(<span class="string">&quot;hello world&quot;</span>,<span class="number">7</span>,<span class="string">&#x27;...&#x27;</span>,<span class="literal">null</span>,<span class="literal">true</span>); <span class="comment">// hello w...</span></span><br></pre></td></tr></table></figure>

<ul>
<li>以单词为单位超出部分用..代替（不解析HTML）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">StringHelper</span>::<span class="title function_ invoke__">truncateWords</span>(<span class="string">&#x27;This is a test sentance&#x27;</span>, <span class="number">4</span>, <span class="string">&#x27;...&#x27;</span>) <span class="comment">//This is a test ...</span></span><br></pre></td></tr></table></figure>

<ul>
<li>以单词为单位超出部分用..代替（解析HTML）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">StringHelper</span>::<span class="title function_ invoke__">truncateWords</span>(<span class="string">&#x27;This is a test for a sentance&#x27;</span>, <span class="number">5</span>, <span class="string">&#x27;...&#x27;</span>,<span class="literal">true</span>) <span class="comment">//This is a test for...</span></span><br></pre></td></tr></table></figure>

<ul>
<li>一个字符串是否以另一个字符串开始</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">StringHelper</span>::<span class="title function_ invoke__">startsWith</span>(<span class="string">&quot;hello world&quot;</span>,<span class="string">&quot;he&quot;</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>一个字符串是否以另一个字符串结尾</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">StringHelper</span>::<span class="title function_ invoke__">endsWith</span>(<span class="string">&quot;hello world&quot;</span>,<span class="string">&quot;ald&quot;</span>);<span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<ul>
<li>按照分隔符分隔字符串为数组</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">StringHelper</span>::<span class="title function_ invoke__">explode</span>(<span class="string">&#x27;It, is, a first, test&#x27;</span>));<span class="comment">//[&#x27;It&#x27;,&#x27;is&#x27;,&#x27;a first&#x27;,&#x27;test&#x27;]</span></span><br><span class="line"><span class="title class_">StringHelper</span>::<span class="title function_ invoke__">explode</span>(<span class="string">&quot;a@b@c&quot;</span>,<span class="string">&quot;@&quot;</span>);[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="title class_">StringHelper</span>::<span class="title function_ invoke__">explode</span>(<span class="string">&quot;a, b ,c &quot;</span>);[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h2 id="Session-amp-Cookie"><a href="#Session-amp-Cookie" class="headerlink" title="Session&amp;Cookie"></a>Session&amp;Cookie</h2><blockquote>
<p><code>Session</code>被封装成一个应用组件，直接通过 <code>Yii::$app-&gt;session</code> 来访问；<br><code>Cookie</code>通过Request和Response来操作。</p>
</blockquote>
<h3 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h3><ul>
<li>获得session</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$session</span> = <span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;session;</span><br></pre></td></tr></table></figure>

<ul>
<li>检查session是否开启</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;session-&gt;isActive</span><br></pre></td></tr></table></figure>

<ul>
<li>开启一个<code>session</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;session-&gt;<span class="title function_ invoke__">open</span>()</span><br></pre></td></tr></table></figure>

<ul>
<li>关闭<code>session</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;session-&gt;<span class="title function_ invoke__">close</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>销毁<code>session</code>中所有已注册的数据</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;session-&gt;<span class="title function_ invoke__">destroy</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>访问一个<code>session</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 以下三种方法效果等同 */</span></span><br><span class="line"><span class="variable">$language</span> = <span class="variable">$session</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="string">&#x27;language&#x27;</span>);</span><br><span class="line"><span class="variable">$language</span> = <span class="variable">$session</span>[<span class="string">&#x27;language&#x27;</span>];</span><br><span class="line"><span class="variable">$language</span> = <span class="keyword">isset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;language&#x27;</span>]) ? <span class="variable">$_SESSION</span>[<span class="string">&#x27;language&#x27;</span>] : <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>设置一个<code>session</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 以下三种方法效果等同 */</span></span><br><span class="line"><span class="variable">$session</span>-&gt;<span class="title function_ invoke__">set</span>(<span class="string">&#x27;language&#x27;</span>, <span class="string">&#x27;en-US&#x27;</span>);</span><br><span class="line"><span class="variable">$session</span>[<span class="string">&#x27;language&#x27;</span>] = <span class="string">&#x27;en-US&#x27;</span>;</span><br><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&#x27;language&#x27;</span>] = <span class="string">&#x27;en-US&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除一个<code>session</code>变量</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 下面三种方法效果等同 */</span></span><br><span class="line"><span class="variable">$session</span>-&gt;<span class="title function_ invoke__">remove</span>(<span class="string">&#x27;language&#x27;</span>);</span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$session</span>[<span class="string">&#x27;language&#x27;</span>]);</span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;language&#x27;</span>]);</span><br></pre></td></tr></table></figure>

<ul>
<li>检查一个<code>session</code>变量是否存在</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 以下三种方法效果一致 */</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$session</span>-&gt;<span class="title function_ invoke__">has</span>(<span class="string">&#x27;language&#x27;</span>)) ...</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$session</span>[<span class="string">&#x27;language&#x27;</span>])) ...</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;language&#x27;</span>])) ...</span><br></pre></td></tr></table></figure>

<h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><ul>
<li>获取<code>cookie</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cookies</span> = <span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;cookies;</span><br></pre></td></tr></table></figure>

<ul>
<li>设置<code>cookie</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cookies</span> = <span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;response-&gt;cookies;</span><br></pre></td></tr></table></figure>

<ul>
<li>获取一个<code>cookie</code>值</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$language</span> = <span class="variable">$cookies</span>-&gt;<span class="title function_ invoke__">getValue</span>(<span class="string">&#x27;language&#x27;</span>, <span class="string">&#x27;en&#x27;</span>);<span class="comment">// 如果获取language失败，则返回&quot;en&quot;代替</span></span><br></pre></td></tr></table></figure>

<ul>
<li>另一种获取<code>cookie</code>值方法</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ((<span class="variable">$cookie</span> = <span class="variable">$cookies</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="string">&#x27;language&#x27;</span>)) !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="variable">$language</span> = <span class="variable">$cookie</span>-&gt;value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>数组方式获取<code>cookie</code>值</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$cookies</span>[<span class="string">&#x27;language&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$language</span> = <span class="variable">$cookies</span>[<span class="string">&#x27;language&#x27;</span>]-&gt;value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>检查一个<code>cookie</code>是否存在</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$cookies</span>-&gt;<span class="title function_ invoke__">has</span>(<span class="string">&#x27;language&#x27;</span>)) ...</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$cookies</span>[<span class="string">&#x27;language&#x27;</span>])) ...</span><br></pre></td></tr></table></figure>

<ul>
<li>新增一个<code>cookie</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cookies</span>-&gt;<span class="title function_ invoke__">add</span>(<span class="keyword">new</span> \yii\web\<span class="title function_ invoke__">Cookie</span>([</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;language&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;value&#x27;</span> =&gt; <span class="string">&#x27;zh-CN&#x27;</span>,</span><br><span class="line">]));</span><br></pre></td></tr></table></figure>

<ul>
<li>删除一个<code>cookie</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cookies</span>-&gt;<span class="title function_ invoke__">remove</span>(<span class="string">&#x27;language&#x27;</span>);</span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$cookies</span>[<span class="string">&#x27;language&#x27;</span>]);</span><br></pre></td></tr></table></figure>

<h2 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h2><blockquote>
<p><code>Request</code> 被配置为一个应用组件，我们可以通过<code>Yii::$app-&gt;request</code>访问它。</p>
</blockquote>
<h3 id="URL相关"><a href="#URL相关" class="headerlink" title="URL相关"></a>URL相关</h3><ul>
<li>获得当前请求的绝对<code>url</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;<span class="title function_ invoke__">getAbsoluteUrl</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>返回一个请求URL的<code>hostInfo</code>部分</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;<span class="title function_ invoke__">getHostInfo</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>获得URL问号后的参数字符串</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;<span class="title function_ invoke__">getQueryString</span>()</span><br></pre></td></tr></table></figure>

<ul>
<li>返回服务器端口</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;<span class="title function_ invoke__">getServerPort</span>();</span><br></pre></td></tr></table></figure>

<h3 id="HTTP头"><a href="#HTTP头" class="headerlink" title="HTTP头"></a>HTTP头</h3><ul>
<li>返回用户接受的内容类型</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt; <span class="title function_ invoke__">getAcceptableContentTypes</span> (); <span class="comment">// Header Accept</span></span><br></pre></td></tr></table></figure>

<ul>
<li>返回用户可接受的语言</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt; <span class="title function_ invoke__">getAcceptableLanguages</span>(); <span class="comment">// Header Accept-Language</span></span><br></pre></td></tr></table></figure>

<ul>
<li>返回<code>GET</code>&#x2F;<code>POST</code>请求</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;<span class="title function_ invoke__">get</span>();</span><br><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;<span class="title function_ invoke__">get</span>(<span class="string">&quot;id&quot;</span>);</span><br><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;<span class="title function_ invoke__">POST</span>();</span><br><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;<span class="title function_ invoke__">POST</span>(<span class="string">&quot;username&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>判断请求类型（返回boolean）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;isAjax <span class="comment">// 判断是否为ajax请求</span></span><br><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;isConsoleRequest <span class="comment">// 判断是否为控制发起的请求</span></span><br><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;isDelete <span class="comment">// 判断是否为DELETE请求</span></span><br><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;isGet <span class="comment">// 判断是否为GET请求</span></span><br><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;isPost <span class="comment">// 判断是否为POST请求</span></span><br><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;isPjax <span class="comment">// 判断是否为isPjax请求</span></span><br></pre></td></tr></table></figure>

<ul>
<li>返回用户的 IP</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;request-&gt;<span class="title function_ invoke__">getUserIP</span>();</span><br></pre></td></tr></table></figure>

<h2 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h2><blockquote>
<p>和Request一样，Response被封装成Yii的一个组件，你可以通过<code>Yii::$app-&gt;response</code>轻松的访问它。</p>
</blockquote>
<h3 id="Status-Code状态码"><a href="#Status-Code状态码" class="headerlink" title="Status Code状态码"></a>Status Code状态码</h3><ul>
<li>设置一个<code>Status Code</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;response-&gt;statusCode = <span class="number">200</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>Yii内置的通过异常形式返回状态码</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yii\web\BadRequestHttpException: status code <span class="number">400</span>.</span><br><span class="line">yii\web\ConflictHttpException: status code <span class="number">409</span>.</span><br><span class="line">yii\web\ForbiddenHttpException: status code <span class="number">403</span>.</span><br><span class="line">yii\web\GoneHttpException: status code <span class="number">410</span>.</span><br><span class="line">yii\web\MethodNotAllowedHttpException: status code <span class="number">405</span>.</span><br><span class="line">yii\web\NotAcceptableHttpException: status code <span class="number">406</span>.</span><br><span class="line">yii\web\NotFoundHttpException: status code <span class="number">404</span>.</span><br><span class="line">yii\web\ServerErrorHttpException: status code <span class="number">500</span>.</span><br><span class="line">yii\web\TooManyRequestsHttpException: status code <span class="number">429</span>.</span><br><span class="line">yii\web\UnauthorizedHttpException: status code <span class="number">401</span>.</span><br><span class="line">yii\web\UnsupportedMediaTypeHttpException: status code <span class="number">415</span>.</span><br></pre></td></tr></table></figure>

<h3 id="HTTP-Headers"><a href="#HTTP-Headers" class="headerlink" title="HTTP Headers"></a>HTTP Headers</h3><ul>
<li>添加设置删除<code>Http Headers</code>内容</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$headers</span> = <span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;response-&gt;headers;</span><br><span class="line"><span class="comment">// add a Pragma header. Existing Pragma headers will NOT be overwritten.</span></span><br><span class="line"><span class="variable">$headers</span>-&gt;<span class="title function_ invoke__">add</span>(<span class="string">&#x27;Pragma&#x27;</span>, <span class="string">&#x27;no-cache&#x27;</span>);</span><br><span class="line"><span class="comment">// set a Pragma header. Any existing Pragma headers will be discarded.</span></span><br><span class="line"><span class="variable">$headers</span>-&gt;<span class="title function_ invoke__">set</span>(<span class="string">&#x27;Pragma&#x27;</span>, <span class="string">&#x27;no-cache&#x27;</span>);</span><br><span class="line"><span class="comment">// remove Pragma header(s) and return the removed Pragma header values in an array</span></span><br><span class="line"><span class="variable">$values</span> = <span class="variable">$headers</span>-&gt;<span class="title function_ invoke__">remove</span>(<span class="string">&#x27;Pragma&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Response-Body"><a href="#Response-Body" class="headerlink" title="Response Body"></a><code>Response Body</code></h3><ul>
<li>相应主体</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;response-&gt;content = <span class="string">&#x27;hello world!&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h2><blockquote>
<p>控制器，可在<code>action</code>内直接用<code>$this</code>调用。</p>
</blockquote>
<ul>
<li>渲染一个视图（如果布局有效则使用布局）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">render</span>(<span class="string">&#x27;index&#x27;</span>, [<span class="string">&#x27;model&#x27;</span> =&gt; <span class="variable">$model</span>])</span><br></pre></td></tr></table></figure>

<ul>
<li>渲染视图（不使用布局）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">renderPartial</span>(<span class="string">&#x27;index&#x27;</span>,[<span class="string">&#x27;model&#x27;</span>=&gt;<span class="variable">$model</span>])</span><br></pre></td></tr></table></figure>

<ul>
<li>渲染视图（不使用布局）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注入所有注册的JS/CSS脚本和文件,通常使用在响应AJAX网页请求的情况下</span></span><br><span class="line"><span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">renderAjax</span>(<span class="string">&#x27;index&#x27;</span>,[<span class="string">&#x27;model&#x27;</span>=&gt;<span class="variable">$model</span>])</span><br></pre></td></tr></table></figure>

<ul>
<li>只渲染布局</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">renderContent</span>(<span class="variable">$content</span>);</span><br></pre></td></tr></table></figure>

<h2 id="ActiveForm"><a href="#ActiveForm" class="headerlink" title="ActiveForm"></a>ActiveForm</h2><blockquote>
<p>重点！列出最常用的ActiveForm方法。</p>
</blockquote>
<ul>
<li>取消客户端规则验证</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$form</span> = <span class="title class_">ActiveForm</span>::<span class="title function_ invoke__">begin</span>([</span><br><span class="line">    <span class="string">&#x27;enableClientValidation&#x27;</span>=&gt;<span class="literal">false</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<ul>
<li>取消<code>yii.js</code>的引入</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$form</span> = <span class="title class_">ActiveForm</span>::<span class="title function_ invoke__">begin</span>([</span><br><span class="line">    <span class="string">&#x27;enableClientScript&#x27;</span>=&gt;<span class="literal">false</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<ul>
<li>表单目标地址设置</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$form</span> = <span class="title class_">ActiveForm</span>::<span class="title function_ invoke__">begin</span>([</span><br><span class="line">    <span class="string">&quot;action&quot;</span>=&gt;<span class="variable">$url</span> </span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<ul>
<li>GET &amp; POST 方法设置</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$form</span> = <span class="title class_">ActiveForm</span>::<span class="title function_ invoke__">begin</span>([</span><br><span class="line">    <span class="string">&quot;method&quot;</span>=&gt;<span class="string">&quot;POST&quot;</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<ul>
<li>设置Form的类及自己定义标签属性</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$form</span> = <span class="title class_">ActiveForm</span>::<span class="title function_ invoke__">begin</span>([</span><br><span class="line">    <span class="string">&#x27;options&#x27;</span>=&gt;[<span class="string">&quot;class&quot;</span>=&gt;<span class="string">&quot;f&quot;</span>,<span class="string">&quot;data-name&quot;</span>=&gt;<span class="string">&quot;xxx&quot;</span>]</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<ul>
<li>生成文本框</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$form</span>-&gt;<span class="title function_ invoke__">field</span>(<span class="variable">$model</span>, <span class="string">&#x27;date&#x27;</span>)-&gt;<span class="title function_ invoke__">textInput</span>([<span class="string">&quot;key&quot;</span>=&gt;<span class="string">&quot;value&quot;</span>]);</span><br></pre></td></tr></table></figure>

<ul>
<li>生成文本域</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$form</span>-&gt;<span class="title function_ invoke__">field</span>(<span class="variable">$model</span>, <span class="string">&#x27;date&#x27;</span>)-&gt;<span class="title function_ invoke__">textarea</span>([<span class="string">&quot;key&quot;</span>=&gt;<span class="string">&quot;value&quot;</span>]);</span><br></pre></td></tr></table></figure>

<ul>
<li>单选列表</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$form</span>-&gt;<span class="title function_ invoke__">field</span>(<span class="variable">$model</span>,<span class="string">&#x27;sex&#x27;</span>)-&gt;<span class="title function_ invoke__">radioList</span>(<span class="variable">$arr</span>,[<span class="string">&quot;key&quot;</span>=&gt;<span class="string">&quot;value&quot;</span>]);</span><br></pre></td></tr></table></figure>

<ul>
<li>密码框</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$form</span>-&gt;<span class="title function_ invoke__">field</span>(<span class="variable">$model</span>,<span class="string">&quot;password&quot;</span>)-&gt;<span class="title function_ invoke__">passwordInput</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>复选框</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$form</span>-&gt;<span class="title function_ invoke__">field</span>(<span class="variable">$model</span>,<span class="string">&quot;city_id&quot;</span>)-&gt;<span class="title function_ invoke__">checkboxList</span>(<span class="variable">$arr</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>文件上传</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$form</span>-&gt;<span class="title function_ invoke__">field</span>(<span class="variable">$model</span>,<span class="string">&quot;image&quot;</span>)-&gt;<span class="title function_ invoke__">fileInput</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>隐藏域</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$form</span>-&gt;<span class="title function_ invoke__">field</span>(<span class="variable">$model</span>,<span class="string">&quot;name&quot;</span>)-&gt;<span class="title function_ invoke__">hiddenInput</span>();</span><br></pre></td></tr></table></figure>

<h2 id="FileHelper"><a href="#FileHelper" class="headerlink" title="FileHelper"></a>FileHelper</h2><blockquote>
<p>几个常用也好用的文件帮助方法</p>
</blockquote>
<ul>
<li>遍历一个文件夹下文件&amp;子文件夹</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">FileHelper</span>::<span class="title function_ invoke__">findFiles</span>(<span class="string">&#x27;/path/to/search/&#x27;</span>);</span><br><span class="line"><span class="title class_">FileHelper</span>::<span class="title function_ invoke__">findFiles</span>(<span class="string">&#x27;.&#x27;</span>, [<span class="string">&#x27;only&#x27;</span> =&gt; [<span class="string">&#x27;*.php&#x27;</span>, <span class="string">&#x27;*.txt&#x27;</span>]]); <span class="comment">// 只返回php和txt文件</span></span><br><span class="line"><span class="title class_">FileHelper</span>::<span class="title function_ invoke__">findFiles</span>(<span class="string">&#x27;.&#x27;</span>, [<span class="string">&#x27;except&#x27;</span> =&gt; [<span class="string">&#x27;*.php&#x27;</span>, <span class="string">&#x27;*.txt&#x27;</span>]]); <span class="comment">// 排除php和txt文件</span></span><br></pre></td></tr></table></figure>

<ul>
<li>获得指定文件的MIME类型</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">FileHelper</span>::<span class="title function_ invoke__">getMimeType</span>(<span class="string">&#x27;/path/to/img.jpeg&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>复制文件夹</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">FileHelper</span>::<span class="title function_ invoke__">copyDirectory</span>(<span class="variable">$src</span>, <span class="variable">$dst</span>, <span class="variable">$options</span> = [])</span><br></pre></td></tr></table></figure>

<ul>
<li>删除一个目录及内容</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">FileHelper</span>::<span class="title function_ invoke__">removeDirectory</span>(<span class="variable">$dir</span>, <span class="variable">$options</span> = [])</span><br></pre></td></tr></table></figure>

<ul>
<li>生成一个文件夹（同时设置权限）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">FileHelper</span>::<span class="title function_ invoke__">createDirectory</span>(<span class="variable">$path</span>, <span class="variable">$mode</span> = <span class="number">0775</span>, <span class="variable">$recursive</span> = <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>

<h2 id="UploadedFile"><a href="#UploadedFile" class="headerlink" title="UploadedFile"></a>UploadedFile</h2><blockquote>
<p>上传文件帮助类</p>
</blockquote>
<ul>
<li>通过模型的属性获取一个文件</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span> = <span class="title class_">UploadedFile</span>::<span class="title function_ invoke__">getInstance</span>(<span class="variable">$model</span>,<span class="string">&#x27;avatar&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>通过模型的属性来获取一组文件</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$files</span> = <span class="title class_">UploadedFile</span>::<span class="title function_ invoke__">getInstances</span>(<span class="variable">$model</span>,<span class="string">&#x27;avatar&#x27;</span>)</span><br><span class="line"><span class="comment">//view $form-&gt;field($model,&#x27;avatar[]&#x27;)-&gt;fileInput()</span></span><br></pre></td></tr></table></figure>

<ul>
<li>通过名字上传一个文件</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span> = <span class="title class_">UploadedFile</span>::<span class="title function_ invoke__">getInstanceByName</span>(<span class="string">&#x27;avatar&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>通过名字获取一组上传的文件</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span> = <span class="title class_">UploadedFile</span>::<span class="title function_ invoke__">getInstancesByName</span>(<span class="string">&#x27;avatar&#x27;</span>);</span><br><span class="line"><span class="comment">// view Html::fileInput(&#x27;avatar[]&#x27;)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>保存一个文件</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span>-&gt;<span class="title function_ invoke__">saveAs</span>(<span class="title class_">Yii</span>::<span class="title function_ invoke__">getAlias</span>(<span class="string">&quot;@webroot&quot;</span>).<span class="string">&#x27;/data/test.jpg&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>获取上传文件原始名(不含扩展名)</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span>-&gt;<span class="title function_ invoke__">getBaseName</span>(); <span class="comment">// test.jpg ===&gt; test</span></span><br></pre></td></tr></table></figure>

<ul>
<li>获取上传文件的扩展名(已经自动格式化为小写)</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span>-&gt;<span class="title function_ invoke__">getExtension</span>(); <span class="comment">// 是png、不是image/png</span></span><br></pre></td></tr></table></figure>

<ul>
<li>获取文件的原始名</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span>-&gt;name; <span class="comment">// test.jpg</span></span><br></pre></td></tr></table></figure>

<ul>
<li>获取文件媒体类型</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span>-&gt;type; <span class="comment">// image/png</span></span><br></pre></td></tr></table></figure>

<ul>
<li>获取文件临时名</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span>-&gt;tempName;</span><br></pre></td></tr></table></figure>

<ul>
<li>获取文件大小</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span>-&gt;size; <span class="comment">// 21744</span></span><br></pre></td></tr></table></figure>

<h2 id="Html"><a href="#Html" class="headerlink" title="Html"></a>Html</h2><blockquote>
<p>通过Html类的一些静态方法生成Html标签。</p>
</blockquote>
<ul>
<li>生成一个超级链接</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">a</span>(<span class="string">&#x27;链接的文本&#x27;</span>, <span class="variable">$url</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>通过Yii2的路由生成一个链接</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">a</span>(<span class="string">&#x27;链接文本&#x27;</span>, <span class="title class_">Url</span>::<span class="title function_ invoke__">to</span>([<span class="string">&#x27;/site/index&#x27;</span>], <span class="literal">true</span>));</span><br><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">a</span>(<span class="string">&#x27;链接文本&#x27;</span>, <span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;urlManager-&gt;<span class="title function_ invoke__">createUrl</span>([<span class="string">&#x27;/site/index&#x27;</span>]));</span><br></pre></td></tr></table></figure>

<ul>
<li>生成一个图片链接</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">img</span>(<span class="string">&quot;/images/logo.png&quot;</span>,[<span class="string">&#x27;class&#x27;</span>=&gt;<span class="string">&#x27;img&#x27;</span>]);</span><br></pre></td></tr></table></figure>

<ul>
<li>生成一个按钮</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">button</span>(<span class="string">&quot;按钮文本&quot;</span>,[<span class="string">&#x27;class&#x27;</span>=&gt;<span class="string">&#x27;button-action&#x27;</span>]);</span><br></pre></td></tr></table></figure>

<ul>
<li>发送邮件链接</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">mailto</span>(<span class="string">&quot;阿北&quot;</span>,<span class="string">&#x27;abei@nai8.me&#x27;</span>,<span class="variable">$options</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>生成有序列表</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$list</span> = [<span class="string">&#x27;china&#x27;</span>,<span class="string">&#x27;usa&#x27;</span>];</span><br><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">ol</span>(<span class="variable">$list</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>生成无须列表</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$list</span> = [<span class="string">&#x27;china&#x27;</span>,<span class="string">&#x27;usa&#x27;</span>,<span class="string">&#x27;japan&#x27;</span>];</span><br><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">ul</span>(<span class="variable">$list</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>生成<code>javascript</code>代码</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">script</span>(<span class="string">&quot;alert(&#x27;hello world&#x27;);&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>生成<code>style</code>代码</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">style</span>(<span class="string">&quot;color:#F60&quot;</span>);</span><br><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">style</span>(<span class="string">&quot;.list &#123;background:#FFF;&#125;&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>生成一个css引用链接</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">cssFile</span>(<span class="string">&quot;http://baidu.com/style.css&quot;</span>,[]);</span><br></pre></td></tr></table></figure>

<ul>
<li>生成一个js文件引用</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">jsFile</span>(<span class="variable">$url</span>,[]);</span><br></pre></td></tr></table></figure>

<ul>
<li>把字符 “&lt;” （小于）和 “&gt;” （大于）转换为HTML实体</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">encode</span>(<span class="variable">$html</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>将特色的HTML实体转化为&gt;和&lt;</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Html</span>::<span class="title function_ invoke__">decode</span>(<span class="variable">$string</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Query-Builder"><a href="#Query-Builder" class="headerlink" title="Query Builder"></a>Query Builder</h2><blockquote>
<p>主要解决DAO在查询语句上的繁琐问题，无需输入原生SQL语句就可以完成数据库检索。</p>
</blockquote>
<ul>
<li>使用<code>Query Builder</code>需要使用的类</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query</span> = (<span class="keyword">new</span> \yii\db\<span class="title function_ invoke__">Query</span>()); <span class="comment">// yii2使用Query对象来采集SQL的各个部分，然后由Query Builder组成SQL语句后由DAO发给数据库获得请求。</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>SELECT</code>方法</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">select</span>(<span class="string">&quot;id,username&quot;</span>); <span class="comment">// 字符串形式</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">select</span>([<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;username&#x27;</span>]); <span class="comment">// 数组形式</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">select</span>([<span class="string">&quot;userId&quot;</span>=&gt;<span class="string">&quot;id&quot;</span>,<span class="string">&quot;fName&quot;</span>=&gt;<span class="string">&quot;user.frist_name&quot;</span>]); <span class="comment">// 起别名</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">select</span>([<span class="string">&quot;full_name&quot;</span>=&gt;<span class="string">&quot;CONCAT(id,&#x27;-&#x27;,username)&quot;</span>]); <span class="comment">// 支持MYSQL函数</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>FROM</code>方法</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query</span>-&gt;<span class="keyword">from</span>(<span class="string">&quot;user&quot;</span>); <span class="comment">// 字符串形式</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="keyword">from</span>([<span class="string">&quot;u&quot;</span>=&gt;<span class="string">&quot;user&quot;</span>]); <span class="comment">// 数据表别名</span></span><br></pre></td></tr></table></figure>

<ul>
<li>过滤掉重复记录</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">select</span>(<span class="string">&quot;username&quot;</span>)-&gt;<span class="title function_ invoke__">distinct</span>()-&gt;<span class="keyword">from</span>(<span class="string">&quot;user&quot;</span>); <span class="comment">// distinct</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>WHERE</code>函数用法</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 传递字符串 */</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&quot;id = 1&quot;</span>);</span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&quot;id = :id&quot;</span>)-&gt;<span class="title function_ invoke__">addParams</span>([<span class="string">&quot;:id&quot;</span>=&gt;<span class="number">1</span>]);</span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&quot;id = :id&quot;</span>,[<span class="string">&quot;:id&quot;</span>=&gt;<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 传递数组 */</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;username&quot;</span>=&gt;<span class="string">&quot;abei&quot;</span>,<span class="string">&quot;age&quot;</span>=&gt;[<span class="number">20</span>,<span class="number">19</span>,<span class="number">26</span>]])-&gt;<span class="keyword">from</span>(<span class="string">&quot;user&quot;</span>);<span class="comment">// select * from user where username=&quot;abei&quot; AND age in (20,19,26)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作符 */</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;&gt;&quot;</span>,<span class="string">&quot;id&quot;</span>,<span class="number">10</span>]);<span class="comment">// id &gt; 10</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;&lt;&quot;</span>,<span class="string">&quot;id&quot;</span>,<span class="number">10</span>]); <span class="comment">// id &lt; 10</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;&lt;&gt;&quot;</span>,<span class="string">&quot;id&quot;</span>,<span class="number">10</span>]); <span class="comment">// id &lt;&gt; 10</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;in&quot;</span>,<span class="string">&quot;id&quot;</span>,[<span class="number">10</span>,<span class="number">12</span>]]);<span class="comment">// id in (10,20)</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;not in&quot;</span>,<span class="string">&quot;id&quot;</span>,[<span class="number">10</span>,<span class="number">12</span>]]);<span class="comment">// id not in (10,20)</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;and&quot;</span>,<span class="string">&quot;id=1&quot;</span>,<span class="string">&quot;id=2&quot;</span>]); id=<span class="number">1</span> AND id=<span class="number">2</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&#x27;or&#x27;</span>, [<span class="string">&#x27;type&#x27;</span> =&gt; [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]], [<span class="string">&#x27;id&#x27;</span> =&gt; [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]]]); <span class="comment">// (type IN (7, 8, 9) OR (id IN (1, 2, 3)))</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;between&quot;</span>, <span class="string">&#x27;id&#x27;</span>, <span class="number">1</span>, <span class="number">10</span>]);<span class="comment">// id between 1 AND 10</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;not&quot;</span>,[<span class="string">&quot;id&quot;</span>=&gt;<span class="number">5</span>]]);<span class="comment">// not (id=5)</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;not between&quot;</span>,<span class="string">&quot;id&quot;</span>,<span class="number">1</span>,<span class="number">10</span>]);<span class="comment">// id not between 1 AND 10</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;like&quot;</span>,<span class="string">&quot;username&quot;</span>,<span class="string">&quot;abei&quot;</span>]); <span class="comment">// username like &quot;%abei%&quot;</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([[<span class="string">&#x27;like&#x27;</span>, <span class="string">&#x27;username&#x27;</span>, [<span class="string">&#x27;abei&#x27;</span>, <span class="string">&#x27;liuhuan&#x27;</span>]]]); <span class="comment">// username like &quot;%abei%&quot; AND username like &quot;%liuhuan%&quot;</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&#x27;like&#x27;</span>, <span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;%abei&#x27;</span>, <span class="literal">false</span>]); <span class="comment">// username like &quot;%abei&quot;</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;or like&quot;</span>, <span class="string">&#x27;username&#x27;</span>, [<span class="string">&#x27;abei&#x27;</span>, <span class="string">&#x27;liuhuan&#x27;</span>]]);<span class="comment">// username like &quot;%abei%&quot; OR username like &quot;%liuhuan%&quot;，只作用于范围为数组的形式</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;not like&quot;</span>,xxxxx]);<span class="comment">// 与like用法一致</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;or not like&quot;</span>,xxx])<span class="comment">// 与not like用法一致</span></span><br></pre></td></tr></table></figure>

<ul>
<li>一个要单独说明的<code>exists</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* EXISTS用于检查子查询是否至少会返回一行数据，该子查询实际上并不返回任何数据，而是返回值True或False */</span></span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&#x27;exists&#x27;</span>, (<span class="keyword">new</span> <span class="title class_">Query</span>())-&gt;<span class="title function_ invoke__">select</span>(<span class="string">&#x27;id&#x27;</span>)-&gt;<span class="keyword">from</span>(<span class="string">&#x27;user&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&#x27;id&#x27;</span> =&gt; <span class="number">1</span>])]);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>ORDER BY</code> 方法</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">orderBy</span>(<span class="string">&quot;id DESC&quot;</span>);</span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">orderBy</span>([<span class="string">&quot;id&quot;</span>=&gt;SORT_DESC]);</span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">orderBy</span>([<span class="string">&quot;id&quot;</span>=&gt;SORT_DESC,<span class="string">&#x27;create_time&#x27;</span>=&gt;SORT_ASC]);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>GROUP BY</code> &amp;&amp; <code>HAVING</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">groupBy</span>([<span class="string">&quot;username&quot;</span>]);</span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">groupBy</span>([<span class="string">&quot;id&quot;</span>])-&gt;<span class="title function_ invoke__">having</span>([<span class="string">&quot;&gt;&quot;</span>,<span class="string">&#x27;id&#x27;</span>,<span class="number">20</span>]);</span><br></pre></td></tr></table></figure>

<ul>
<li>获取生成的SQL语句</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">createCommand</span>()-&gt;sql;</span><br></pre></td></tr></table></figure>

<h3 id="获得查询结果"><a href="#获得查询结果" class="headerlink" title="获得查询结果"></a>获得查询结果</h3><ul>
<li>获取所有结果</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">all</span>();<span class="comment">// 二位数组</span></span><br></pre></td></tr></table></figure>

<ul>
<li>获取一条记录</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">one</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>检查一个数据库中是否含有某个表</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">new</span> \yii\db\Query)-&gt;<span class="keyword">from</span>(<span class="string">&#x27;user&#x27;</span>)-&gt;<span class="title function_ invoke__">exists</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>获取<code>count</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">count</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>获取一个值</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">scalar</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>获取一列值</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">column</span>();  <span class="comment">// 一位数组</span></span><br></pre></td></tr></table></figure>

<ul>
<li>获取一个user表的内容</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query</span> = <span class="keyword">new</span> \yii\db\Query;</span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="keyword">from</span>(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">select</span>([<span class="string">&quot;fname&quot;</span>=&gt;<span class="string">&quot;username&quot;</span>]);</span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&quot;&gt;&quot;</span>,<span class="string">&#x27;id&#x27;</span>,<span class="number">10</span>]);</span><br><span class="line"><span class="variable">$query</span>-&gt;<span class="title function_ invoke__">all</span>();</span><br></pre></td></tr></table></figure>

<h2 id="Migrate"><a href="#Migrate" class="headerlink" title="Migrate"></a>Migrate</h2><ul>
<li>生成一个迁移文件</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./yii migrate/create script_name <span class="comment">// script_name为脚本名字（需要英文格式）</span></span><br></pre></td></tr></table></figure>

<ul>
<li>执行所有没有迁移的脚本</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./yii migrate</span><br><span class="line">./yii migrate/up</span><br></pre></td></tr></table></figure>

<ul>
<li>执行置顶的迁移</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./yii migrate/up 脚本名 <span class="comment">// 不用含有扩展名</span></span><br></pre></td></tr></table></figure>

<h2 id="Asset-Management"><a href="#Asset-Management" class="headerlink" title="Asset Management"></a>Asset Management</h2><blockquote>
<p>Asset资源管理</p>
</blockquote>
<ul>
<li>类属性说明</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$basePath</span> <span class="comment">// 资源文件所在的web服务器目录路径，一般为@webroot</span></span><br><span class="line"><span class="variable">$baseUrl</span> <span class="comment">// js和css文件相对url基地址</span></span><br><span class="line"><span class="variable">$css</span> <span class="comment">// asset bundle 所包含的css文件数组</span></span><br><span class="line"><span class="variable">$cssOptions</span> <span class="comment">// 对link标签的属性控制</span></span><br><span class="line"><span class="variable">$js</span> <span class="comment">// asset bundle 所包含的js文件数组</span></span><br><span class="line"><span class="variable">$jsOptions</span> <span class="comment">// 对script标签的属性控制</span></span><br><span class="line"><span class="variable">$publishOptions</span> <span class="comment">// 发布操作</span></span><br><span class="line"><span class="variable">$sourcePath</span> <span class="comment">// 当资源网络不可以访问，则必须指定此目录。</span></span><br></pre></td></tr></table></figure>

<ul>
<li>去掉浏览器缓存</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;appendTimestamp&#x27;</span> =&gt; <span class="literal">true</span> <span class="comment">// 在web.php里的components - assetManager</span></span><br></pre></td></tr></table></figure>

<ul>
<li>发布资源筛选</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="variable">$publishOptions</span> = [</span><br><span class="line">    <span class="string">&#x27;only&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;fonts/*&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;css/*&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;test.js&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;except&#x27;</span>=&gt;[</span><br><span class="line">        <span class="string">&#x27;img&#x27;</span></span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">];  </span><br></pre></td></tr></table></figure>

<ul>
<li>js文件在页面的位置</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="variable">$jsOptions</span> = [<span class="string">&#x27;position&#x27;</span> =&gt; \yii\web<span class="title class_">\View</span>::<span class="variable constant_">POS_HEAD</span>];<span class="comment">//js文件发布到head标签内</span></span><br><span class="line"><span class="keyword">public</span> <span class="variable">$jsOptions</span> = [<span class="string">&#x27;position&#x27;</span> =&gt; \yii\web<span class="title class_">\View</span>::<span class="variable constant_">POS_END</span>];<span class="comment">//js文件发布到body标签底部</span></span><br><span class="line"><span class="keyword">public</span> <span class="variable">$jsOptions</span> = [<span class="string">&#x27;position&#x27;</span> =&gt; \yii\web<span class="title class_">\View</span>::<span class="variable constant_">POS_BEGIN</span>];<span class="comment">//js文件放到body标签开始处</span></span><br></pre></td></tr></table></figure>

<ul>
<li>浏览器兼容问题</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="variable">$cssOptions</span> = [<span class="string">&#x27;condition&#x27;</span> =&gt; <span class="string">&#x27;IE 11&#x27;</span>];<span class="comment">// 代表兼容ie11</span></span><br></pre></td></tr></table></figure>

<ul>
<li>是否使用符号链接</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;linkAssets&#x27;</span> =&gt; <span class="literal">true</span> <span class="comment">// 在web.php里的components - assetManager</span></span><br></pre></td></tr></table></figure>

<ul>
<li>配置yii自身的asset资源</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在web.php里的components - assetManager，配置自定义的也可以</span></span><br><span class="line"><span class="string">&#x27;bundles&#x27;</span> =&gt;  [</span><br><span class="line">    <span class="string">&#x27;yii/web/YiiAsset&#x27;</span>=&gt;[</span><br><span class="line">        <span class="string">&#x27;js&#x27;</span>=&gt;[],</span><br><span class="line">        ......</span><br><span class="line">    ]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="Event"><a href="#Event" class="headerlink" title="Event"></a>Event</h2><blockquote>
<p>有关事件的所有，系统自带事件通通给你。</p>
</blockquote>
<h3 id="Application"><a href="#Application" class="headerlink" title="Application"></a>Application</h3><ul>
<li>应用处理请求<code>before</code>之前触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Application</span>::<span class="variable constant_">EVENT_BEFORE_REQUEST</span></span><br></pre></td></tr></table></figure>

<ul>
<li>应用处理请求<code>after</code>之后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Application</span>::<span class="variable constant_">EVENT_AFTER_REQUEST</span></span><br></pre></td></tr></table></figure>

<h3 id="Controller-1"><a href="#Controller-1" class="headerlink" title="Controller"></a>Controller</h3><ul>
<li>在每个<code>Action</code>运行之前触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Controller</span>::<span class="variable constant_">EVENT_BEFORE_ACTION</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在每个Action运行之后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Controller</span>::<span class="variable constant_">EVENT_AFTER_ACTION</span></span><br></pre></td></tr></table></figure>

<h3 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h3><ul>
<li>在验证Model属性之前触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Model</span>::<span class="variable constant_">EVENT_BEFORE_VALIDATE</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在验证Model属性之后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Model</span>::<span class="variable constant_">EVENT_AFTER_VALIDATE</span></span><br></pre></td></tr></table></figure>

<h3 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h3><ul>
<li>一个模块的Action运行前触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Module</span>::<span class="variable constant_">EVENT_BEFORE_ACTION</span></span><br></pre></td></tr></table></figure>

<ul>
<li>一个模块的Action运行后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Module</span>::<span class="variable constant_">EVENT_AFTER_ACTION</span></span><br></pre></td></tr></table></figure>

<h3 id="View"><a href="#View" class="headerlink" title="View"></a>View</h3><ul>
<li>执行视图的<code>beforePage</code>时触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">View</span>::<span class="variable constant_">EVENT_BEGIN_PAGE</span></span><br></pre></td></tr></table></figure>

<ul>
<li>执行视图的<code>endPage</code>函数时触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">View</span>::<span class="variable constant_">EVENT_END_PAGE</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在<code>renderFile</code>渲染一个视图文件之前触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">View</span>::<span class="variable constant_">EVENT_BEFORE_RENDER</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在<code>renderFile</code>渲染一个视图文件之后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">View</span>::<span class="variable constant_">EVENT_AFTER_RENDER</span></span><br></pre></td></tr></table></figure>

<ul>
<li>执行视图的<code>beginBody</code>函数时触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">View</span>::<span class="variable constant_">EVENT_BEGIN_BODY</span></span><br></pre></td></tr></table></figure>

<ul>
<li>执行视图的<code>endBody</code>函数时触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">View</span>::<span class="variable constant_">EVENT_END_BODY</span></span><br></pre></td></tr></table></figure>

<h3 id="Widget"><a href="#Widget" class="headerlink" title="Widget"></a>Widget</h3><ul>
<li>Widget初始化时触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Widget</span>::<span class="variable constant_">EVENT_INIT</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Widget执行前触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Widget</span>::<span class="variable constant_">EVENT_BEFORE_RUN</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Widget执行之后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Widget</span>::<span class="variable constant_">EVENT_AFTER_RUN</span></span><br></pre></td></tr></table></figure>

<h3 id="ActiveQuery"><a href="#ActiveQuery" class="headerlink" title="ActiveQuery"></a>ActiveQuery</h3><ul>
<li>由ActiveQuery的init函数触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ActiveQuery</span>::<span class="variable constant_">EVENT_INIT</span></span><br></pre></td></tr></table></figure>

<h3 id="BaseActiveRecord-amp-ActiveRecord"><a href="#BaseActiveRecord-amp-ActiveRecord" class="headerlink" title="BaseActiveRecord &amp; ActiveRecord"></a>BaseActiveRecord &amp; ActiveRecord</h3><ul>
<li>AR对象被初始化init时触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">BaseActiveRecord</span>::<span class="variable constant_">EVENT_INIT</span></span><br></pre></td></tr></table></figure>

<ul>
<li>AR执行查询结束时触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">BaseActiveRecord</span>::<span class="variable constant_">EVENT_AFTER_FIND</span></span><br></pre></td></tr></table></figure>

<ul>
<li>插入结束时触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">BaseActiveRecord</span>::<span class="variable constant_">EVENT_BEFORE_INSERT</span></span><br></pre></td></tr></table></figure>

<ul>
<li>插入之后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">BaseActiveRecord</span>::<span class="variable constant_">EVENT_AFTER_INSERT</span></span><br></pre></td></tr></table></figure>

<ul>
<li>更新记录之前触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">BaseActiveRecord</span>::<span class="variable constant_">EVENT_BEFORE_UPDATE</span></span><br></pre></td></tr></table></figure>

<ul>
<li>更新记录之后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">BaseActiveRecord</span>::<span class="variable constant_">EVENT_AFTER_UPDATE</span></span><br></pre></td></tr></table></figure>

<ul>
<li>删除记录之前触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">BaseActiveRecord</span>::<span class="variable constant_">EVENT_BEFORE_DELETE</span></span><br></pre></td></tr></table></figure>

<ul>
<li>删除记录之后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">BaseActiveRecord</span>::<span class="variable constant_">EVENT_AFTER_DELETE</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在数据refresh成功之后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">BaseActiveRecord</span>::<span class="variable constant_">EVENT_AFTER_REFRESH</span></span><br></pre></td></tr></table></figure>

<h3 id="Connection"><a href="#Connection" class="headerlink" title="Connection"></a>Connection</h3><ul>
<li>数据库连接被打开后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Connection</span>::<span class="variable constant_">EVENT_AFTER_OPEN</span></span><br></pre></td></tr></table></figure>

<ul>
<li>事务被启动时触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Connection</span>::<span class="variable constant_">EVENT_BEGIN_TRANSACTION</span></span><br></pre></td></tr></table></figure>

<ul>
<li>事务被提交后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Connection</span>::<span class="variable constant_">EVENT_COMMIT_TRANSACTION</span></span><br></pre></td></tr></table></figure>

<ul>
<li>事务回滚后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Connection</span>::<span class="variable constant_">EVENT_ROLLBACK_TRANSACTION</span></span><br></pre></td></tr></table></figure>

<h3 id="Response-1"><a href="#Response-1" class="headerlink" title="Response"></a>Response</h3><ul>
<li>Response响应发送之前触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Response</span>::<span class="variable constant_">EVENT_BEFORE_SEND</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Response响应发送之后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Response</span>::<span class="variable constant_">EVENT_AFTER_SEND</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Response响应内容准备好之后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Response</span>::<span class="variable constant_">EVENT_AFTER_PREPARE</span></span><br></pre></td></tr></table></figure>

<h3 id="User"><a href="#User" class="headerlink" title="User"></a>User</h3><ul>
<li>登陆之前触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>::<span class="variable constant_">EVENT_BEFORE_LOGIN</span></span><br></pre></td></tr></table></figure>

<ul>
<li>登陆之后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>::<span class="variable constant_">EVENT_AFTER_LOGIN</span></span><br></pre></td></tr></table></figure>

<ul>
<li>注销之前触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>::<span class="variable constant_">EVENT_BEFORE_LOGOUT</span></span><br></pre></td></tr></table></figure>

<ul>
<li>注销之后触发</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>::<span class="variable constant_">EVENT_AFTER_LOGOUT</span></span><br></pre></td></tr></table></figure>

<h2 id="Route-amp-UrlManager"><a href="#Route-amp-UrlManager" class="headerlink" title="Route&amp;UrlManager"></a>Route&amp;UrlManager</h2><ul>
<li>URL美化配置</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// conf/web.php</span></span><br><span class="line"><span class="string">&#x27;urlManager&#x27;</span> =&gt; [</span><br><span class="line">    <span class="string">&#x27;enablePrettyUrl&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&#x27;showScriptName&#x27;</span> =&gt; <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&#x27;suffix&#x27;</span>=&gt;<span class="string">&#x27;.html&#x27;</span>,<span class="comment">// 统一后缀名，若不需要则无需配置</span></span><br><span class="line">    <span class="string">&#x27;enableStrictParsing&#x27;</span>=&gt;<span class="literal">false</span>,<span class="comment">//默认为false，是否采用严格解析</span></span><br><span class="line">    <span class="string">&#x27;rules&#x27;</span> =&gt; [</span><br><span class="line">    ],        </span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>Apache开启url重写方法</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Apache需要支持url重写其AllowOverride为all</span></span><br><span class="line">AllowOverride:all</span><br><span class="line"></span><br><span class="line"><span class="comment">//web目录下增加.htaccess，隐藏index.php文件 内容如下</span></span><br><span class="line">RewriteEngine on</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class="line">RewriteRule . index.php</span><br></pre></td></tr></table></figure>

<ul>
<li>Nginx支持url重写</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">    <span class="keyword">if</span> (!-e <span class="variable">$request_filename</span>)&#123;</span><br><span class="line">        rewrite ^/(.*) /index.php last;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Apache开启url重写方法2</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">RewriteEngine On</span><br><span class="line">RewriteBase /</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class="line">RewriteRule ^(.*)\?*$ index.php/$<span class="number">1</span> [L,QSA]</span><br></pre></td></tr></table></figure>

<h2 id="RESTful"><a href="#RESTful" class="headerlink" title="RESTful"></a>RESTful</h2><ul>
<li>分页获得所有的会员</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GET /users</span><br><span class="line">GET /users?page=<span class="number">2</span></span><br><span class="line">GET /users?fields=id,username,created_at</span><br><span class="line">GET /users?sort=id,-username</span><br></pre></td></tr></table></figure>

<ul>
<li>HTTP状态码</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">200</span>: OK。一切正常。</span><br><span class="line"><span class="number">201</span>: 响应 POST 请求时成功创建一个资源。Location header 包含的URL指向新创建的资源。</span><br><span class="line"><span class="number">204</span>: 该请求被成功处理，响应不包含正文内容 (类似 DELETE 请求)。</span><br><span class="line"><span class="number">304</span>: 资源没有被修改。可以使用缓存的版本。</span><br><span class="line"><span class="number">400</span>: 错误的请求。可能通过用户方面的多种原因引起的，例如在请求体内有无效的JSON 数据，无效的操作参数，等等。</span><br><span class="line"><span class="number">401</span>: 验证失败。</span><br><span class="line"><span class="number">403</span>: 已经经过身份验证的用户不允许访问指定的 API 末端。</span><br><span class="line"><span class="number">404</span>: 所请求的资源不存在。</span><br><span class="line"><span class="number">405</span>: 不被允许的方法。 请检查 Allow header 允许的HTTP方法。</span><br><span class="line"><span class="number">415</span>: 不支持的媒体类型。 所请求的内容类型或版本号是无效的。</span><br><span class="line"><span class="number">422</span>: 数据验证失败 (例如，响应一个 POST 请求)。 请检查响应体内详细的错误消息。</span><br><span class="line"><span class="number">429</span>: 请求过多。 由于限速请求被拒绝。</span><br><span class="line"><span class="number">500</span>: 内部服务器错误。 这可能是由于内部程序错误引起的。</span><br></pre></td></tr></table></figure>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.yii-china.com/doc/detail/539#3">Yii2 速查表</a></li>
</ul>

        
      
    </div>

    <footer class="article-footer">
      
      
      <div>
        <ul class="post-copyright">
          <li class="post-copyright-author">
          <strong>本文作者:  </strong>CAO XIAN LIANG</a>
          </li>
          <li class="post-copyright-link">
          <strong>本文链接:  </strong>
          <a href="/2019/12/20/Yii2-Cheat-Sheet/" target="_blank" title="Yii2 速查表">http://blog.caoxl.com/2019/12/20/Yii2-Cheat-Sheet/</a>
          </li>
          <li class="post-copyright-license">
            <strong>版权声明:   </strong>
            本博客所有文章除特别声明外，均采用 <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a>
            许可协议。转载请注明出处
          </li>
         
        </ul>
<div>

      
      
      
      
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Yii2/" rel="tag">Yii2</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%80%9F%E6%9F%A5%E8%A1%A8/" rel="tag">速查表</a></li></ul>

      

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/12/23/Linux-CPU-Information/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          Linux 查看CPU信息
        
      </div>
    </a>
  
  
    <a href="/2019/12/15/Yii2-Learning-Notes/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">Yii2 Yes It is</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Composer"><span class="nav-number">1.</span> <span class="nav-text">Composer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DAO"><span class="nav-number">2.</span> <span class="nav-text">DAO</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Logging"><span class="nav-number">3.</span> <span class="nav-text">Logging</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Validator"><span class="nav-number">4.</span> <span class="nav-text">Validator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#String"><span class="nav-number">5.</span> <span class="nav-text">String</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Session-amp-Cookie"><span class="nav-number">6.</span> <span class="nav-text">Session&amp;Cookie</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Session"><span class="nav-number">6.1.</span> <span class="nav-text">Session</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookie"><span class="nav-number">6.2.</span> <span class="nav-text">Cookie</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Request"><span class="nav-number">7.</span> <span class="nav-text">Request</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#URL%E7%9B%B8%E5%85%B3"><span class="nav-number">7.1.</span> <span class="nav-text">URL相关</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP%E5%A4%B4"><span class="nav-number">7.2.</span> <span class="nav-text">HTTP头</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Response"><span class="nav-number">8.</span> <span class="nav-text">Response</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Status-Code%E7%8A%B6%E6%80%81%E7%A0%81"><span class="nav-number">8.1.</span> <span class="nav-text">Status Code状态码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-Headers"><span class="nav-number">8.2.</span> <span class="nav-text">HTTP Headers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Response-Body"><span class="nav-number">8.3.</span> <span class="nav-text">Response Body</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Controller"><span class="nav-number">9.</span> <span class="nav-text">Controller</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ActiveForm"><span class="nav-number">10.</span> <span class="nav-text">ActiveForm</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FileHelper"><span class="nav-number">11.</span> <span class="nav-text">FileHelper</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UploadedFile"><span class="nav-number">12.</span> <span class="nav-text">UploadedFile</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Html"><span class="nav-number">13.</span> <span class="nav-text">Html</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Query-Builder"><span class="nav-number">14.</span> <span class="nav-text">Query Builder</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%BE%97%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C"><span class="nav-number">14.1.</span> <span class="nav-text">获得查询结果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Migrate"><span class="nav-number">15.</span> <span class="nav-text">Migrate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Asset-Management"><span class="nav-number">16.</span> <span class="nav-text">Asset Management</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Event"><span class="nav-number">17.</span> <span class="nav-text">Event</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Application"><span class="nav-number">17.1.</span> <span class="nav-text">Application</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Controller-1"><span class="nav-number">17.2.</span> <span class="nav-text">Controller</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Model"><span class="nav-number">17.3.</span> <span class="nav-text">Model</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Module"><span class="nav-number">17.4.</span> <span class="nav-text">Module</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#View"><span class="nav-number">17.5.</span> <span class="nav-text">View</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Widget"><span class="nav-number">17.6.</span> <span class="nav-text">Widget</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ActiveQuery"><span class="nav-number">17.7.</span> <span class="nav-text">ActiveQuery</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BaseActiveRecord-amp-ActiveRecord"><span class="nav-number">17.8.</span> <span class="nav-text">BaseActiveRecord &amp; ActiveRecord</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Connection"><span class="nav-number">17.9.</span> <span class="nav-text">Connection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Response-1"><span class="nav-number">17.10.</span> <span class="nav-text">Response</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#User"><span class="nav-number">17.11.</span> <span class="nav-text">User</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Route-amp-UrlManager"><span class="nav-number">18.</span> <span class="nav-text">Route&amp;UrlManager</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RESTful"><span class="nav-number">19.</span> <span class="nav-text">RESTful</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">20.</span> <span class="nav-text">参考</span></a></li></ol>
    
    </div>
  </aside>

</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2017 - 2023 Keep It Simple And Stupid All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				访客数 : <span id="busuanzi_value_site_uv"></span> |  
				访问量 : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>




<script src="/js/scripts.js"></script>





  
<script src="/js/dialog.js"></script>









	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            Keep It Simple And Stupid
          </div>
          <div class="panel-body">
            Copyright © 2023 CAO XIAN LIANG All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>