<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>php面试/笔试题杂记 vii | Keep It Simple And Stupid</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="面试题笔试题">
  
  
  
  
  <meta name="description" content="一个PHP高级工程师 需要具备哪些知识?">
<meta name="keywords" content="面试题,笔试题">
<meta property="og:type" content="article">
<meta property="og:title" content="PHP面试&#x2F;笔试题杂记 VII">
<meta property="og:url" content="http://blog.caoxl.com/2019/11/25/Interview-Questions-Notes-VII/index.html">
<meta property="og:site_name" content="Keep It Simple And Stupid">
<meta property="og:description" content="一个PHP高级工程师 需要具备哪些知识?">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-12-02T02:57:01.558Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PHP面试&#x2F;笔试题杂记 VII">
<meta name="twitter:description" content="一个PHP高级工程师 需要具备哪些知识?">
  
    <link rel="alternate" href="/atom.xml" title="Keep It Simple And Stupid" type="application/atom+xml">
  

  

  <link rel="icon" href="http://caoxl.com/imgs/we-min.jpg">
  <link rel="apple-touch-icon" href="/http://caoxl.com/imgs/we-min.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>
  <script src="/js/bootstrap.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css">

  
    <link rel="stylesheet" href="/css/dialog.css">
  

  

  
    <link rel="stylesheet" href="/css/header-post.css">
  

  
  
  

</head>
</html>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="http://caoxl.com/imgs/we-min.jpg">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">首页</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">归档</a> </li>
                
                  <li> <a class="main-nav-link" href="/categories">分类</a> </li>
                
                  <li> <a class="main-nav-link" href="/tags">标签</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">关于</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(无标题)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-Interview-Questions-Notes-VII" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      PHP面试/笔试题杂记 VII
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2019/11/25/Interview-Questions-Notes-VII/" class="article-date">
	  <time datetime="2019-11-25T07:55:59.000Z" itemprop="datePublished">2019-11-25</time>
	</a>

      
    <a class="article-category-link" href="/categories/面试-笔试题/">面试/笔试题</a>

      
	<a class="article-views">
	<span id="busuanzi_container_page_pv">
		阅读量<span id="busuanzi_value_page_pv"></span>
	</span>
	</a>

    </div>

    <div class="article-entry" itemprop="articleBody">
      
        
        
          <blockquote>
<p>一个PHP高级工程师 需要具备哪些知识?</p>
</blockquote>
<a id="more"></a>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><ul>
<li><ol>
<li>自我介绍: 说上家公司负责的项目或者浓缩简历。</li>
</ol>
</li>
<li><ol start="2">
<li>简历项目经验层次</li>
</ol>
<ul>
<li>利用什么技术</li>
<li>实现了什么功能</li>
<li>遇到了什么问题</li>
<li>达到了什么结果</li>
</ul>
</li>
<li><ol start="3">
<li>期望薪资</li>
</ol>
</li>
<li><ol start="4">
<li>应用型的问题：要记得站高看远、架构分层</li>
</ol>
</li>
<li><ol start="5">
<li>及管理经验及自身对项目管理的理解</li>
</ol>
</li>
</ul>
<h2 id="知识点列表"><a href="#知识点列表" class="headerlink" title="知识点列表"></a>知识点列表</h2><h3 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h3><ul>
<li><strong>代码解释过程(大多的非编译语言)</strong><ul>
<li><code>lexical</code> 词法分析, 输入为源代码, 输出为<code>token</code></li>
<li>语法分析工具为文法(<code>LALR</code>), 输出为表达式, 7.0为<code>AST</code>, 涉及<ul>
<li>注释</li>
<li>分号 &amp; 分隔符</li>
<li>变量</li>
<li>常量</li>
<li>操作数</li>
</ul>
</li>
<li>类型检查、关键字处理、导入, 输出为中间代码.工具为选定的编译器优化工具<ul>
<li>中间代码生成(<code>Opcodes</code>)</li>
<li>机器码生成 (编译语言)</li>
</ul>
</li>
</ul>
</li>
<li><strong><code>Session</code>共享配置</strong></li>
<li><strong><code>PHPUnit</code>用法</strong></li>
<li><strong><code>Cookie</code>购物车和<code>Session</code>购物车的实现</strong></li>
<li><strong>弱类型实现</strong><ul>
<li><code>zval</code>(不仅是变量名) &amp; <code>zend_val</code> 变量值</li>
</ul>
</li>
<li><strong>代码规范</strong><ul>
<li>自动化: <code>sonarquebe</code>+<code>jenkins</code></li>
<li>单元测试</li>
</ul>
</li>
<li><strong>PHP进程间如何通信</strong><ul>
<li>信号量(消息同步|互斥)</li>
<li>信号(信号触发事件)(<code>pcntl_signal</code>, <code>pcntl_wait*</code>)</li>
<li>消息队列(<code>msg_*</code>)</li>
<li>管道(<code>pipe</code>)</li>
<li><code>socket</code> | <code>unix_*.sock</code></li>
<li>共享内存(<code>shm_</code>,<code>shmop_</code>)</li>
</ul>
</li>
<li><strong>PHP并发模型</strong></li>
<li><strong>PHP执行流程</strong></li>
<li><strong>变量底层存储结构</strong></li>
<li><strong>常用的数组函数(列出10个)</strong><ul>
<li><code>array_combine</code>(前面数组作为其键，后面数组做为其值)</li>
<li><code>array_merge</code>(合并两个数组，后面覆盖前面，但数字索引会重新索引，不会覆盖)</li>
<li>…</li>
</ul>
</li>
<li><strong>PHP垃圾回收机制(gc)</strong><ul>
<li><code>zend.enable_gc</code> (<code>php.ini</code>)</li>
<li><code>gc_enable()</code> (<code>function</code>)</li>
<li>引入计数(<code>zval</code>指向<code>zend_value</code>个数为<code>0</code>时) + 写时拷贝 (<code>copy on write</code>)</li>
<li>循环引用问题 (<code>array</code>、<code>object</code>引用自身成员), 垃圾回收器将收集于一个<code>buffer</code>(<code>_zend_gc_global</code> -&gt; <code>gc_root_buffer</code>) 后启动垃圾鉴定程序</li>
</ul>
</li>
<li><strong>把<code>Session</code>放入<code>Redis</code>里面还会触发类似文件的<code>state session</code></strong><ul>
<li><code>session.gc_probability</code> (default 1)</li>
<li><code>session.gc_divisor</code> (default 100)</li>
<li><code>session.gc_maxlifetime</code> (单位秒)</li>
<li><code>session.cookie_lifetime</code> (单位秒, 0表示直到关闭浏览器)</li>
<li><code>session.save_path</code></li>
<li><code>session.write_close</code> (显示关闭, 后期使用需要显示开启)</li>
</ul>
</li>
<li><strong>内存模型</strong><ul>
<li>整型、浮点、<code>bool</code>、<code>NULL</code>、内部字符串、不可变数组都是通过<code>zval</code>直接保存,不会用到引用计数</li>
<li><code>string</code>、<code>array</code>都会使用引入计数(支持复制cow), <code>object</code>、<code>resource</code>本身可以理解为引用</li>
</ul>
</li>
<li><strong>fpm三种配置及场景</strong><ul>
<li><code>dynamic</code><ul>
<li><code>pm.start_servers</code></li>
<li><code>pm.max_children</code></li>
<li><code>pm.max_spare_servers</code></li>
<li><code>pm.min_spare_servers</code></li>
</ul>
</li>
<li><code>static</code><ul>
<li><code>pm.max_children</code></li>
</ul>
</li>
<li><code>ondaemon</code><ul>
<li><code>pm.process_idle_timeout</code></li>
</ul>
</li>
</ul>
</li>
<li><strong>数组底层</strong><ul>
<li>如何保证有序: 又加了一层映射表 (与bucket大小相同)</li>
<li>如何解决hash冲突: 拉链法(头插)</li>
<li>扩容: 逻辑删除 (考虑<code>unset</code>内存情况, 是否需要重建索引)</li>
</ul>
</li>
</ul>
<h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><ul>
<li><strong>索引</strong><ul>
<li><strong>物理存储</strong><ul>
<li>聚簇索引</li>
<li>非聚簇索引</li>
</ul>
</li>
<li><strong>数据结构</strong><ul>
<li><code>B + 树</code></li>
<li><code>hash</code></li>
<li><code>fulltext</code></li>
<li><code>R-tree</code></li>
</ul>
</li>
<li><strong>逻辑角度</strong><ul>
<li>唯一索引 <code>unique</code></li>
<li>普通索引 <code>index</code></li>
<li>主键索引 <code>primary key</code></li>
<li>全文索引 <code>full index</code> (myisam)</li>
<li>复合索引 (最左前缀原则)<ul>
<li>类似 where a and b and c a b c 问题</li>
<li>联合索引(a,b,c) 能够正确使用索引的有 (a=1), (a=1 and b=1), (a=1 and b=1 and c=1) (b=1 and c =1)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>引擎类型</strong><ul>
<li><code>myisam</code></li>
<li><code>innodb</code></li>
<li>区别<ul>
<li><ol>
<li>myisam采用非聚簇索引, innodb采用聚簇索引</li>
</ol>
</li>
<li><ol start="2">
<li>myisam索引myi与数据myd文件分离, 索引文件仅保存数据记录指针地址</li>
</ol>
</li>
<li><ol start="3">
<li>myisam的主索引与辅助索引在结构上没区别, 而innodb不一样: innodb的所有辅助索引都引用主索引为data域</li>
</ol>
</li>
<li><ol start="4">
<li>innodb支持事务, 行级锁, myisam不行</li>
</ol>
</li>
<li><ol start="5">
<li>innodb必须有主键, 而myisam可以没有</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>事务</strong><ul>
<li>原子性 <code>atomicity</code></li>
<li>一致性 <code>consistency</code></li>
<li>隔离性 <code>isolation</code></li>
<li>持久性 <code>durability</code></li>
</ul>
</li>
<li><strong>分表数量级</strong><ul>
<li>单表在500w左右, 性能最佳, BTREE索引树在3-5之间</li>
</ul>
</li>
<li><strong>隔离级别</strong><ul>
<li>事务的隔离性是数据库处理数据的基础之一，隔离级别是提供给用户在性能和可靠性做除选择和权衡的配置项目，以下四种情况都有一个前提（在同一个事务中）<ul>
<li><code>read_uncommited</code>: 未提交读(脏读)</li>
<li><code>read_commit</code>: 已提交读 (不可重复读)</li>
<li><code>repeatable_read</code>: 可重复读</li>
<li><code>serialize</code>: 可串行化</li>
</ul>
</li>
</ul>
</li>
<li><strong>索引机制(算法)</strong><ul>
<li><code>hash</code></li>
<li><code>b+tree</code></li>
<li><code>b-tree</code>(不要念成b减tree，-只是个符号)</li>
</ul>
</li>
<li><strong>锁</strong><ul>
<li><strong>种类</strong><ul>
<li><code>optimistic lock</code> 乐观锁<ul>
<li>特点: 不会真的死锁</li>
</ul>
</li>
<li><code>pessimistic lock</code> 悲观锁<ul>
<li>为了保证事务的隔离性, 就需要一致性锁定读.读的时候要加锁，防止其他事务再次更改，修改的时候也要加锁，其他事务无法读取。主要就是依靠数据库的锁机制来实现，同时缺点很明显，就是会带来性能的开销，并发的减少</li>
</ul>
</li>
</ul>
</li>
<li><code>innodb</code>的MVCC(Multi-Version Concurrency Control)<ul>
<li>多版本并发控制, 适用于行锁的、事务性的数据库模型</li>
<li>适用于innodb的<code>rc</code>和<code>rr</code>级别, 因为可串行化涉及到锁表</li>
<li>实现思想是在每行增加一个<code>create_verison</code>和<code>delete_version</code>字段</li>
<li><code>update</code> 是插入一个新行，先保存当前版本号到旧行的<code>delete_version</code>,且新建行的<code>new_create_version</code>也就是<code>delete_version</code></li>
<li><code>delete</code>操作就是直接标记<code>delete_version</code></li>
<li><code>insert</code>的时候，就是保存至<code>create_version</code></li>
<li><code>select</code>的时候可以这样<ul>
<li>读<code>delete_version</code>为空的</li>
<li>大于当前事务版本号的</li>
<li>创建版本号 &lt;= 当前事务版本号的</li>
</ul>
</li>
</ul>
</li>
<li><strong>粒度划分</strong><ul>
<li>行锁</li>
<li>表锁</li>
</ul>
</li>
<li><strong>意向锁 <code>intention lock</code> (表级锁)</strong><ul>
<li>场景：A对表中一行进行修改，B对整个表修改。如果没有以下的两个锁，B将对全表扫描是否被锁定。反之，A可以对某行添加意向互斥锁（表级），然后再添加互斥锁（行级），然后B只需要等待意向互斥锁释放）</li>
<li>意向共享锁</li>
<li>意向互斥锁</li>
</ul>
</li>
<li><strong>共享锁 <code>shard lock</code> 读锁(行锁)</strong></li>
<li><strong>排它锁 <code>exclusive lock</code> 写锁(行锁)</strong></li>
<li><strong>关于innodb必须要知道的</strong><ul>
<li>可以通过 <code>SELECT \* FROM products WHERE id=&#39;3&#39; FOR UPDATE</code> 进行锁，但是必须在事务中</li>
<li>上述语句必须是命中索引才会行锁，否则是 <code>table lock</code></li>
</ul>
</li>
<li><strong>锁的算法</strong><ul>
<li><code>record lock</code>：加到索引记录上的锁，如果通过where条件上锁，而不知道具体哪行，这样会锁定整个表</li>
<li><code>gap lock</code>：间隙锁某个区间的锁定，对索引记录中的一段连续区域的锁。</li>
<li><code>next-key lock</code>：行锁和GAP（间隙锁）的合并，next-key锁是解决RR级别中 幻读问题的主要方案。可以搜索关键字 快照读（snapshot read）和当前读（current read）去了解</li>
</ul>
</li>
<li><strong>分库分表</strong></li>
<li><strong>主从复制 读写分离</strong></li>
<li><strong>ACID</strong></li>
<li><strong>覆盖索引(复合索引)</strong><ul>
<li>定义：包含两个或多个属性列的索引称为复合索引。如果查询字段是普通索引，或者是联合索引的最左原则字段，查询结果是联合索引的字段或者是主键。这种就不必通过主键（聚集索引再次查询）</li>
<li>目的: 减少磁盘IO, 不用回表</li>
<li>b+树索引</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><ul>
<li><code>Nginx</code><ul>
<li><code>worker_connections</code></li>
<li><code>upstream weight</code></li>
<li>负责均衡实现方式<ul>
<li>轮询</li>
<li>IP哈希</li>
<li>指定权重</li>
<li>第三方<ul>
<li><code>fair</code></li>
<li><code>url_hash</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><ul>
<li>Linux<ul>
<li><code>epoll</code> <code>select</code></li>
<li><code>netstat</code> 查看<code>tcp</code> <code>udp</code> <code>unixsock</code>网络</li>
<li>查看负载 <code>cat /proc/loadavg</code> | <code>w</code> | <code>top</code></li>
<li><code>df</code></li>
<li><code>lstat</code>: strace的时候常常可见它</li>
<li><code>top</code>: <code>shift+M</code></li>
<li><code>free</code></li>
<li><code>lsof</code>: 查看当前进程ID, 进程名等占用的文件描述符</li>
<li><code>ipstat</code></li>
<li><code>strace</code></li>
<li><code>grep [-A ,-B, -C]&#39;HTTP/1.1&quot; 200&#39; access.log | wc -l</code></li>
<li><code>socket</code>和管道(<code>pipe</code>)的区别: <code>socket</code>全双工, <code>pipe</code>半双工*2</li>
<li><code>awk</code> &amp; <code>sed</code><ul>
<li><code>awk &#39;{print $1}&#39; access.log | sort | uniq | wc -l</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><ul>
<li><strong>类型/应用场景</strong><ul>
<li><code>string</code>: cache, incr</li>
<li><code>hash</code>: key为key, value为Hashmap</li>
<li><code>set</code>: 去重(中奖只一次  <code>sismember</code>), 交/并/差 (如微博社交关系), 内部实现为value为null的hashmap</li>
<li><code>zset</code>: (sorted set), 既去重又能保证按照score排序, 比如按照帖子的关注个数排序，value为帖子id，个数为score。</li>
<li><code>list</code>: (阻塞<code>rpop</code>) 消息队列、列表旋转(常用于监控, <code>rpoplpush</code>)</li>
<li><code>HyperLogLog</code>: 大量统计 (非精确)</li>
<li><code>bitmaps</code></li>
</ul>
</li>
<li><strong><code>OBJ_ENCODING</code></strong><ul>
<li><code>string</code><ul>
<li><code>OBJ_ENCODING_RAW</code>, 代表sds, 原生string类型</li>
<li><code>OBJ_ENCODING_INT</code>, long类型</li>
<li><code>OBJ_ENCODING_EMBSTR</code>, 嵌入</li>
</ul>
</li>
<li><code>OBJ_HASH</code><ul>
<li><code>OBJ_ENCODING_HT</code>, 表示成dict</li>
<li><code>OBJ_ENCODING_ZPILIST</code>, hash用ziplist表示</li>
</ul>
</li>
<li><code>OBJ_SET</code><ul>
<li><code>OBJ_ENCODING_INTSET</code>, 表示成intest</li>
<li>config<ul>
<li>set-max-intset-entries 512</li>
</ul>
</li>
</ul>
</li>
<li><code>OBJ_ZSET</code><ul>
<li><code>OBJ_ENCODING_SKIPLIST</code>, 表示成skiplist</li>
</ul>
</li>
<li><code>OBJ_LIST</code><ul>
<li><code>OBJ_ENCODING_QUICKLIST</code></li>
<li>config<ul>
<li>list-max-ziplist-size-2</li>
<li>list-compress-depth 0</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>扩展问题</strong><ul>
<li>zset如何根据两个属性排序? 比如根据id和age<ul>
<li>可以用位操作, 把两个属性合成一个double</li>
<li>用zunionstore合并存储为新的key, 再zrange</li>
</ul>
</li>
<li>redis是如何保证原子性操作的?<ul>
<li>因为它是单线程的! (MySQL是多线程)</li>
<li>在并发脚本中的 get set 等不是原子的</li>
<li>在并发的原子命令 incr setnx 等是原子的</li>
<li>事务是保证批量操作的原子性</li>
</ul>
</li>
<li>主从复制过程<ul>
<li>从服务器向主服务器发送sync</li>
<li>主服务器收到sync命令执行BGSAVE, 且在这期间新执行的命令到一个缓冲区</li>
<li>主执行(BGSAVE) 完毕后,将<code>.rdb</code>文件发送给从服务器, 从服务器将文件载入内存</li>
<li>BGSAVE期间到缓冲区的命令会以redis命令协议的方式, 将内容发送给从服务器</li>
</ul>
</li>
</ul>
</li>
<li><strong>特性</strong><ul>
<li>单线程, 自实现(event driver库, 见下面四个io多路复用函数)</li>
<li>io多路复用, 最常用调用函数: select (epoll, kquene, avport等), 同时监控多个文件描述符的可读可写</li>
<li>reactor方式实现文件处理器 (每一个网络连接对应一个文件描述符), 同时监听多个fd的accept, read (from client), write (to client), close文件事件</li>
</ul>
</li>
<li><strong>备份与持久化</strong><ul>
<li><code>rdb</code> (fork进程dump到file)<ul>
<li>手动: <code>save</code>(阻塞) &amp; <code>bgsave</code> (fork 子进程), 但是这两个不会同时进行</li>
<li>自动触发:  <code>conf:save 900 1 save 300 10 save 60 10000 dbfilename dump.rdb</code></li>
<li>rdb优点: 对服务进程影响小, 记录原数据文件方式便于管理还原</li>
<li>rdb缺点: 可能数据不完整</li>
<li>rdb为纯文本文件, 可以用 <code>od -c dump.rdb</code> 分析</li>
</ul>
</li>
<li><code>aof</code> (类似binlog)<ul>
<li>三种写入同步方式<ul>
<li><code>appendfsync no</code></li>
<li><code>appendfsync everysec</code> (每个事件循环写入缓冲区, 但是每隔一秒同步到磁盘文件)</li>
<li><code>appendfsync always</code> (每执行一个命令, 每个事件循环都会执行写入aof 缓冲区并同步到磁盘文件，效率最慢，但是最安全)</li>
</ul>
</li>
<li>aof优点: 数据最完整, 可以通过数据重写rewrite来减少体积, 存储内存为redis的纯文本协议</li>
<li>aof缺点: 文件相对rdb更大, 导入速度比rdb慢</li>
<li>一般有了aof就不rdb, 因为aof更新频率更高</li>
</ul>
</li>
</ul>
</li>
<li><strong>过期策略</strong><ul>
<li>定时过期: 时间到了立即删除, cpu不友好, 内存友好</li>
<li>惰性过期: 访问时判断是否过期, cpu友好, 内存不友好</li>
<li>定期过期: expires dict中scan, 清除已过期的key, cpu和内存最优解</li>
</ul>
</li>
<li><strong>内存淘汰机制</strong><ul>
<li><code>noeviction</code>: 新写入时会报错</li>
<li><code>allkeys-lru</code>: 移除最近最少使用的key</li>
<li><code>allkeys-random</code>: 随机移除某些key</li>
<li><code>volatile-lru</code>: 设置了过期时间的key中, 移除最近最少使用</li>
<li><code>volatile-random</code>: 随机移除某些key</li>
<li><code>volatile-ttl</code>: 设置类过期时间的键中, 有更早过期时间的key优先移除</li>
</ul>
</li>
<li><strong>redis队列特殊关注之处</strong><ul>
<li>队列可能丢东西<ul>
<li>比如redis挂了, producer没有停止, 但是队列数据无法写入</li>
</ul>
</li>
<li>队列的consumer需要手动处理commit协议<ul>
<li>如果consumer处理完, 表示真正完成</li>
<li>如果没有处理完?放回队列?直接丢弃?</li>
</ul>
</li>
<li>事件重放机制不支持<ul>
<li>比如consumer消费错了, 那能不能将队列回放呢?再次处理呢?</li>
</ul>
</li>
<li>队列最大长度及过期时间<ul>
<li>如果producer远大于consumer, 撑爆了怎么办</li>
<li>如果comsumer一直没有处理, producer的数据如何处理</li>
</ul>
</li>
<li><code>exactly once</code></li>
<li>单机锁<code>setnx</code>或者基于<code>set</code>众多参数没有问题, 集群下可利用tag机制</li>
<li>如何保证业务执行时间超过锁的过期时间, 而引起误删除操作, 答案是可以加一个唯一标识</li>
</ul>
</li>
<li><strong><code>vs memcache</code></strong><ul>
<li><code>memcached</code><ul>
<li>优势<ul>
<li>多线程(listen &amp; worker), 利用多核</li>
<li>round robin</li>
<li>cas (check and set, compare and swap)</li>
</ul>
</li>
<li>劣势<ul>
<li>cache coherency、 锁</li>
<li>key大小有限制 (1M)</li>
</ul>
</li>
<li>特点<ul>
<li>内存预分配: slab + trunk</li>
</ul>
</li>
</ul>
</li>
<li><code>redis</code><ul>
<li>优势<ul>
<li>自己封装了一个AEEvent (epoll + select + kqueue), io多路复用</li>
<li>丰富的数据结构 (对内 + 对外)</li>
<li>良好的持久化策略 (rdb + aof)</li>
</ul>
</li>
<li>劣势<ul>
<li>排序、聚会cpu密集操作会影响吞吐量</li>
<li>key 大小最大为 1g</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>redis的事务机制</strong><ul>
<li>基于乐观锁的watch multi exec</li>
<li>redis call lua 脚本 (比如get+del一起)</li>
<li>2.6.12后set命令支持(setnx + expire就不需要写lua script了)</li>
<li>redis 下的分布式锁，当主从不同步或者主重新被选举需要多想想，主从情况下一般采用从节点的大多数 (es也是这样)</li>
</ul>
</li>
<li><p><strong>redis 主从哨兵配置，copy三份redis.conf文件，以下设置一主二从一哨兵</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">vim</span> <span class="string">redis01.conf</span></span><br><span class="line"><span class="string">port</span> <span class="number">63791</span></span><br><span class="line"></span><br><span class="line"><span class="string">vim</span> <span class="string">redis02.conf</span></span><br><span class="line"><span class="string">port</span> <span class="number">63792</span></span><br><span class="line"><span class="string">slaveof</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">63791</span></span><br><span class="line"></span><br><span class="line"><span class="string">vim</span> <span class="string">redis03.conf</span></span><br><span class="line"><span class="string">port</span> <span class="number">63793</span></span><br><span class="line"><span class="string">slaveof</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">63791</span></span><br><span class="line"></span><br><span class="line"><span class="string">vim</span> <span class="string">sentinel.conf</span></span><br><span class="line"><span class="string">daemonize</span> <span class="literal">yes</span></span><br><span class="line"><span class="string">port</span> <span class="number">26379</span></span><br><span class="line"><span class="string">sentinel</span> <span class="string">monitor</span> <span class="string">mymaster</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">63791</span> <span class="number">1</span>  </span><br><span class="line"><span class="string">//</span> <span class="string">mymaster为自定义命名，127.0.0.1</span> <span class="number">63791</span><span class="string">为master，1为选举主节点的时候投票数目的同意个数，1代表有一个哨兵同意就行。</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>redis cluster</code></strong></p>
<ul>
<li>集群会将数据自动按照算法分割在不同节点负责的槽上 (data sharding)</li>
</ul>
</li>
</ul>
<h3 id="算法-amp-数据结构"><a href="#算法-amp-数据结构" class="headerlink" title="算法&amp;数据结构"></a>算法&amp;数据结构</h3><ul>
<li><strong>最小堆</strong>: 根节点为最小值, 且节点比其他子节点小</li>
<li>平衡树 (avl红黑树)</li>
<li><strong>最大堆</strong>: 根节点为最大值, 且节点比其他子节点大</li>
<li><strong><code>sikplist</code></strong></li>
<li><strong><code>hash</code></strong><ul>
<li><code>hash</code> 碰撞原因</li>
<li><code>hash</code> 碰撞解决方案<ul>
<li>拉链, 塞到链表里. 有点是相对简单, 但是需要附加空间</li>
<li>开发寻址, 有点是空间利用率高, 一直找<ul>
<li>线性探测</li>
<li>二次探测再散列函数</li>
<li>伪随机数</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>给定数组n, 判断n是斐波那契数列的第几项? 写算法</strong></li>
<li><strong>反转列表如A-&gt;B-&gt;C-&gt;D 到 A-&gt;D-&gt;C-&gt;B</strong></li>
<li><strong>插入排序</strong></li>
<li><strong>数组与链表区别与联系</strong></li>
<li><strong>链表操作</strong><ul>
<li>单链表删除</li>
<li>单链表插入<ul>
<li>快慢指针判断环路、找链表中点</li>
</ul>
</li>
</ul>
</li>
<li><strong>应用问题</strong><ul>
<li>如何实现一个LRU功能 (双向链表)</li>
<li>如何实现浏览器前进后退功能 (两个栈)</li>
</ul>
</li>
</ul>
<h3 id="网络协议"><a href="#网络协议" class="headerlink" title="网络协议"></a>网络协议</h3><ul>
<li><strong>HTTP</strong><ul>
<li>构成: 起始行(Get=&gt;200), 首部头(Accept=&gt;Content-Type), 主体(name =&gt; tongbo)</li>
<li>版本<ul>
<li>1.0</li>
<li>1.1</li>
<li>2.0 多路复用, 流量控制</li>
</ul>
</li>
</ul>
</li>
<li><strong>长连接</strong><ul>
<li>在一个连接上发送多个数据包</li>
<li>心跳、如何发送心跳</li>
</ul>
</li>
<li><strong>HTTP DNS</strong><ul>
<li>定义: 用http协议代替元素的udp dns协议, 可以绕过运营商的local dns</li>
<li>解决问题: 避免local dns造成的域名劫持问题和调度不精确问题</li>
<li>其他解决方案<ul>
<li>客户端dns缓存</li>
<li>热点域名解析</li>
<li>懒更新策略 (ttl过期后再同步)</li>
</ul>
</li>
</ul>
</li>
<li><strong>Post请求分割head和body</strong></li>
<li><strong>Get vs Post</strong><ul>
<li>Get<ul>
<li>安全幂等, 请求实体资源</li>
<li>参数只能url编码, 且参数长度有限制</li>
<li>浏览器会自动加cache</li>
</ul>
</li>
<li>Post<ul>
<li>附加请求实体于服务器</li>
<li>产生两个TCP数据包</li>
<li>数据支持多种编码格式</li>
</ul>
</li>
</ul>
</li>
<li><strong>Resultful</strong><ul>
<li><code>get</code>: 获取资源</li>
<li><code>post</code>: 新建资源</li>
<li><code>put</code>: 跟新完整资源</li>
<li><code>delete</code>: 删除资源</li>
<li><code>patch</code>: 更新部分资源</li>
</ul>
</li>
<li><strong>RPC</strong><ul>
<li>RPC框架涉及基本组件服务<ul>
<li>客户端、服务端自动代码生成、多语言支持</li>
<li>消息序列化、反序列化</li>
<li>连接池、负载、故障、队列、超时、异步</li>
</ul>
</li>
<li>常见协议<ul>
<li>soap (http jsonrpc)</li>
<li>GRPC</li>
<li>thrift(tcp)</li>
</ul>
</li>
</ul>
</li>
<li><strong>TCP</strong><ul>
<li>面向连接, 先建立(握手), 然后释放(挥手确认拜拜)</li>
<li>只能点对点</li>
<li>可靠交付, 全双工, 接收和发送端都设有发送和接收cache</li>
<li>面向字节流</li>
</ul>
</li>
<li><strong>特性协议</strong><ul>
<li>停等</li>
<li>超时重传</li>
<li>慢启动</li>
<li>滑动窗口</li>
<li>快速重传</li>
</ul>
</li>
<li><strong>UDP</strong><ul>
<li>无连接、best effort、面向报文(不合并、不拆分、保留边界)</li>
<li>无拥塞控制、流量控制、首部开销小(8个字节, 而TCP有20个首部)</li>
<li>支持一对一、一对多、多对一</li>
</ul>
</li>
<li><strong>自定义协议</strong></li>
</ul>
<h3 id="PHP框架"><a href="#PHP框架" class="headerlink" title="PHP框架"></a>PHP框架</h3><ul>
<li><strong>laravel</strong><ul>
<li>AppServerProvider register:服务提供者注册</li>
<li>IocContainer: (IoC容器, 工厂模式的升华)<ul>
<li>控制反转 (inversion of control) 可以降低计算机代码直接的耦合, 其中最常见的方式叫做依赖注入 (Dependence Injection), 还有一种方式叫依赖查找</li>
<li>实现方式<ul>
<li>基于接口: 实现特定接口以供外部容器注入所依赖类型的对象</li>
<li>基于Set方法:</li>
<li>基于构造函数: 实现特定参数的构造函数</li>
</ul>
</li>
<li>管理类依赖</li>
<li>执行 (依赖注入DI): 通过构造函数或者某些情况下通过Setter方法将类依赖注入到类中, 容器并不需要被告知如何构建对象,因为他会使用PHP的反射服务自动解析出具体的对象</li>
</ul>
</li>
</ul>
</li>
<li><strong>swoole</strong></li>
<li><strong>thinkphp</strong></li>
<li><strong>ci</strong></li>
<li><strong>yii</strong></li>
<li><strong>easyswoole</strong></li>
</ul>
<h3 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h3><ul>
<li><strong>操作系统</strong><ul>
<li>多线程</li>
<li>多进程</li>
<li>协程的理解</li>
<li>socket和管道的区别</li>
<li>进程间通信手段<ul>
<li>共享内存</li>
<li>rpc</li>
<li>管道</li>
</ul>
</li>
<li>线程间通信手段<ul>
<li>读写进程数据段</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h3><ul>
<li><strong>单例模式 (static, construct)</strong></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">private</span> $instance;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> $config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($config)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;config = $config;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">instance</span><span class="params">($config)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (! <span class="keyword">self</span>::$instance <span class="keyword">instanceof</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>::$instance = <span class="keyword">new</span> <span class="keyword">self</span>($config);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>::$instance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>简单工厂 (switch case include new return)</strong></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeModule</span><span class="params">($moduleName, $options)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> ($moduleName) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'Fight'</span>: </span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Fight($options[<span class="number">0</span>], $options[<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'Force'</span>: </span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Force($options[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'Shot'</span>: </span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Shot($options[<span class="number">0</span>], $options[<span class="number">1</span>], $options[<span class="number">2</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用工厂方式 001</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Superman</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $power;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 初始化工厂</span></span><br><span class="line">        $factory = <span class="keyword">new</span> SuperModuleFactory;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 通过工厂提供的方法制造需要的模块</span></span><br><span class="line">        <span class="keyword">$this</span>-&gt;power = $factory-&gt;makeModule(<span class="string">'Fight'</span>, [<span class="number">9</span>, <span class="number">100</span>]);</span><br><span class="line">        <span class="comment">// $this-&gt;power = $factory-&gt;makeModule('Force', [45]);</span></span><br><span class="line">        <span class="comment">// $this-&gt;power = $factory-&gt;makeModule('Shot', [99, 50, 2]);</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        $this-&gt;power = array(</span></span><br><span class="line"><span class="comment">            $factory-&gt;makeModule('Force', [45]),</span></span><br><span class="line"><span class="comment">            $factory-&gt;makeModule('Shot', [99, 50, 2])</span></span><br><span class="line"><span class="comment">        );</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用工厂方式 002 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Superman</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $power;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(array $modules)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 初始化工厂</span></span><br><span class="line">        $factory = <span class="keyword">new</span> SuperModuleFactory;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 通过工厂提供的方法制造需要的模块</span></span><br><span class="line">        <span class="keyword">foreach</span> ($modules <span class="keyword">as</span> $moduleName =&gt; $moduleOptions)&#123;</span><br><span class="line">             <span class="keyword">$this</span>-&gt;power[] = $factory-&gt;makeModule($moduleName, $moduleOptions);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建超人</span></span><br><span class="line">$superman = <span class="keyword">new</span> Superman([</span><br><span class="line">    <span class="string">'Fight'</span> =&gt; [<span class="number">9</span>, <span class="number">100</span>],</span><br><span class="line">    <span class="string">'Shot'</span> =&gt; [<span class="number">99</span>, <span class="number">50</span>, <span class="number">2</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>门面模式</strong><ul>
<li>对客户屏蔽子系统组件, 减少子系统与客户之间的松耦合关系</li>
</ul>
</li>
<li><strong>依赖注入(<code>DI</code>) 和 <code>AOP</code>思想</strong></li>
</ul>
<h3 id="大前端"><a href="#大前端" class="headerlink" title="大前端"></a>大前端</h3><ul>
<li><strong>js</strong><ul>
<li>百度统计的实现<ul>
<li>基于cookie, 引入js脚本及百度个人账户ID, 读取当前信息, 适当节点发送请求给百度服务</li>
</ul>
</li>
<li>前后端分离</li>
</ul>
</li>
</ul>
<h3 id="运维"><a href="#运维" class="headerlink" title="运维"></a>运维</h3><ul>
<li><strong>运维&amp;架构</strong><ul>
<li>服务器CPU99%如何分析</li>
<li>MySQL占CPU如何分析</li>
<li>PHP占CPU较高如何分析</li>
<li>SSO实现方法</li>
<li>MySQL优化方法</li>
<li>如何提高监测数据的准确性</li>
<li>Dcoker原理及引用及编排管理</li>
</ul>
</li>
</ul>
<h3 id="分布式-微服务"><a href="#分布式-微服务" class="headerlink" title="分布式|微服务"></a>分布式|微服务</h3><ul>
<li><strong>分布式</strong><ul>
<li>redis分布式锁问题</li>
<li>cap及常见应用关注cap哪两点</li>
</ul>
</li>
<li><strong>微服务</strong><ul>
<li>优点<ul>
<li>相对于单体服务更简单, 注重单一功能</li>
<li>每个服务可以独立开发打包测试部署, 且语言环境无关</li>
<li>可以水平、高效扩展</li>
</ul>
</li>
<li>缺点<ul>
<li>运营成本, 服务发现, 治理, 降级, 熔断</li>
<li>网络信息传输、安全、延迟</li>
<li>服务调用排查追踪</li>
</ul>
</li>
<li>最佳原则<ul>
<li>高内聚: 修改了一个功能, 只需要改一个服务</li>
<li>低耦合: 修改了一个地方, 不需要改其他的地方</li>
<li>业务内原则<ul>
<li>新服务用新的微服务, 确定无误后保留推进, 否则调整</li>
<li>老的保留, 直到新服务稳定再切换</li>
<li>必须的监控与日志 | 生产 - 订阅 - 消费模型</li>
<li>尝试对外不可见的服务先做是试点, 错误邮件, 日志, 系统内调用, API内部分成熟接口</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>考虑问题</strong><ul>
<li>分布式数据一致性问题?CAP如何权衡</li>
<li>调用链追踪(基于OpenTracing协议的JeagerORZipkin)</li>
</ul>
</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3>
        
      
    </div>

    <footer class="article-footer">
      
      
      <div>
        <ul class="post-copyright">
          <li class="post-copyright-author">
          <strong>本文作者:  </strong>CAO XIAN LIANG</a>
          </li>
          <li class="post-copyright-link">
          <strong>本文链接:  </strong>
          <a href="/2019/11/25/Interview-Questions-Notes-VII/" target="_blank" title="PHP面试/笔试题杂记 VII">http://blog.caoxl.com/2019/11/25/Interview-Questions-Notes-VII/</a>
          </li>
          <li class="post-copyright-license">
            <strong>版权声明:   </strong>
            本博客所有文章除特别声明外，均采用 <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a>
            许可协议。转载请注明出处
          </li>
         
        </ul>
<div>

      
      
      
      
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔试题/">笔试题</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/面试题/">面试题</a></li></ul>

      

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/12/11/Learning-From-Interview-II/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          面试/笔试实战 II
        
      </div>
    </a>
  
  
    <a href="/2019/11/25/Interview-Questions-Notes-VI/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">PHP面试/笔试题杂记 VI</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#准备"><span class="nav-number">1.</span> <span class="nav-text">准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#知识点列表"><span class="nav-number">2.</span> <span class="nav-text">知识点列表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#PHP"><span class="nav-number">2.1.</span> <span class="nav-text">PHP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL"><span class="nav-number">2.2.</span> <span class="nav-text">MySQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Nginx"><span class="nav-number">2.3.</span> <span class="nav-text">Nginx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux"><span class="nav-number">2.4.</span> <span class="nav-text">Linux</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis"><span class="nav-number">2.5.</span> <span class="nav-text">Redis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#算法-amp-数据结构"><span class="nav-number">2.6.</span> <span class="nav-text">算法&amp;数据结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络协议"><span class="nav-number">2.7.</span> <span class="nav-text">网络协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PHP框架"><span class="nav-number">2.8.</span> <span class="nav-text">PHP框架</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#操作系统"><span class="nav-number">2.9.</span> <span class="nav-text">操作系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设计模式"><span class="nav-number">2.10.</span> <span class="nav-text">设计模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#大前端"><span class="nav-number">2.11.</span> <span class="nav-text">大前端</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#运维"><span class="nav-number">2.12.</span> <span class="nav-text">运维</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分布式-微服务"><span class="nav-number">2.13.</span> <span class="nav-text">分布式|微服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他"><span class="nav-number">2.14.</span> <span class="nav-text">其他</span></a></li></ol></li></ol>
    
    </div>
  </aside>

</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2017 - 2019 Keep It Simple And Stupid All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				访客数 : <span id="busuanzi_value_site_uv"></span> |  
				访问量 : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



<script src="/js/scripts.js"></script>




  <script src="/js/dialog.js"></script>








	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            Keep It Simple And Stupid
          </div>
          <div class="panel-body">
            Copyright © 2019 CAO XIAN LIANG All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>