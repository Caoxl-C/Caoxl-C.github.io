<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>php 基础知识 ii | Keep It Simple And Stupid</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="PHP 基础知识" />
  
  
  
  
  <meta name="description" content="整理原来写在有道云上的一些资料笔记, 做初次整理,后续再一一对号入座">
<meta property="og:type" content="article">
<meta property="og:title" content="PHP 基础知识 II">
<meta property="og:url" content="http://blog.caoxl.com/2018/08/14/YouDao-notes/index.html">
<meta property="og:site_name" content="Keep It Simple And Stupid">
<meta property="og:description" content="整理原来写在有道云上的一些资料笔记, 做初次整理,后续再一一对号入座">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-08-14T02:02:10.000Z">
<meta property="article:modified_time" content="2019-08-22T03:17:04.000Z">
<meta property="article:author" content="CAO XIAN LIANG">
<meta property="article:tag" content="PHP 基础知识">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Keep It Simple And Stupid" type="application/atom+xml">
  

  

  <link rel="icon" href="https://images.unsplash.com/photo-1643801026603-63d4f50be313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=767&q=80">
  <link rel="apple-touch-icon" href="/https://images.unsplash.com/photo-1643801026603-63d4f50be313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=767&q=80">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>

  
<script src="/js/bootstrap.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    
<link rel="stylesheet" href="/css/dialog.css">

  

  

  
    <link rel="stylesheet" href="/css/header-post.css" >
  

  
  
  

<style type="text/css">
.spoiler {
  display: inline-flex;
}
p.spoiler {
  display: flex;
}
.spoiler a {
  pointer-events: none;
}
.spoiler-blur, .spoiler-blur > * {
  transition: text-shadow .5s ease;
}
.spoiler .spoiler-blur, .spoiler .spoiler-blur > * {
  color: rgba(0, 0, 0, 0);
  background-color: rgba(0, 0, 0, 0);
  text-shadow: 0 0 10px grey;
  cursor: pointer;
}
.spoiler .spoiler-blur:hover, .spoiler .spoiler-blur:hover > * {
  text-shadow: 0 0 5px grey;
}
.spoiler-box, .spoiler-box > * {
  transition: color .5s ease,
  background-color .5s ease;
}
.spoiler .spoiler-box, .spoiler .spoiler-box > * {
  color: black;
  background-color: black;
  text-shadow: none;
}</style><meta name="generator" content="Hexo 6.3.0"></head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="https://images.unsplash.com/photo-1643801026603-63d4f50be313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=767&q=80">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">首页</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">归档</a> </li>
                
                  <li> <a class="main-nav-link" href="/categories">分类</a> </li>
                
                  <li> <a class="main-nav-link" href="/tags">标签</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">关于</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(无标题)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-YouDao-notes" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      PHP 基础知识 II
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/08/14/YouDao-notes/" class="article-date">
	  <time datetime="2018-08-14T02:02:10.000Z" itemprop="datePublished">2018-08-14</time>
	</a>

      
    <a class="article-category-link" href="/categories/PHP/">PHP</a>

      
	<a class="article-views">
	<span id="busuanzi_container_page_pv">
		阅读量<span id="busuanzi_value_page_pv"></span>
	</span>
	</a>

    </div>

    <div class="article-entry" itemprop="articleBody">
      
        
        
          <blockquote>
<p>整理原来写在有道云上的一些资料笔记, 做初次整理,后续再一一对号入座</p>
</blockquote>
<span id="more"></span>

<h1 id="PHP杂的识"><a href="#PHP杂的识" class="headerlink" title="PHP杂的识"></a>PHP杂的识</h1><h2 id="PHP-的一些高效写法"><a href="#PHP-的一些高效写法" class="headerlink" title="PHP 的一些高效写法"></a>PHP 的一些高效写法</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.用单引号代替双引号来包含字符串，这样做会更快一些。因为PHP会在双引号包围的字符串中搜寻变量，单引号则不会，注意：只有<span class="keyword">echo</span>能这么做，它是一种可以把多个字符串当作参数的“函数”（译注：PHP手册中说<span class="keyword">echo</span>是语言结构，不是真正的函数，故把函数加上了双引号）。</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.如果能将类的方法定义成<span class="built_in">static</span>，就尽量定义成<span class="built_in">static</span>，它的速度会提升将近<span class="number">4</span>倍。</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.<span class="variable">$row</span>[<span class="string">&#x27;id&#x27;</span>] 的速度是<span class="variable">$row</span>[id]的<span class="number">7</span>倍。</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.<span class="keyword">echo</span> 比 <span class="keyword">print</span> 快，并且使用<span class="keyword">echo</span>的多重参数（译注：指用逗号而不是句点）代替字符串连接，比如<span class="keyword">echo</span> <span class="variable">$str1</span>,<span class="variable">$str2</span></span><br><span class="line"></span><br><span class="line"><span class="number">5</span>.在执行<span class="keyword">for</span>循环之前确定最大循环数，不要每循环一次都计算最大值，最好运用<span class="keyword">foreach</span>代替</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>.注销那些不用的变量尤其是大数组，以便释放内存</span><br><span class="line"></span><br><span class="line"><span class="number">7</span>.尽量避免使用__get，__set，__autoload</span><br><span class="line"></span><br><span class="line"><span class="number">8</span>.<span class="keyword">require_once</span>()代价昂贵</span><br><span class="line"></span><br><span class="line"><span class="number">9</span>.<span class="keyword">include</span>文件时尽量使用绝对路径，因为它避免了PHP去include_path里查找文件的速度，解析操作系统路径所需的时间会更少</span><br><span class="line"></span><br><span class="line"><span class="number">10</span>.如果你想知道脚本开始执行（译注：即服务器端收到客户端请求）的时刻，使用<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_TIME&#x27;</span>]要好于<span class="title function_ invoke__">time</span>()</span><br><span class="line"></span><br><span class="line"><span class="number">11</span>.函数代替正则表达式完成相同功能。</span><br><span class="line"></span><br><span class="line"><span class="number">12</span>.str_replace函数比preg_replace函数快，但strtr函数的效率是str_replace函数的四倍</span><br><span class="line"></span><br><span class="line"><span class="number">13</span>.如果一个字符串替换函数，可接受数组或字符作为参数，并且参数长度不太长，那么可以考虑额外写一段替换代码，使得每次传递参数是一个字符，而不是只写一行代码接受数组作为查询和替换的参数。</span><br><span class="line"></span><br><span class="line"><span class="number">14</span>.使用选择分支语句（译注：即<span class="keyword">switch</span> <span class="keyword">case</span>）好于使用多个<span class="keyword">if</span>，<span class="keyword">else</span> <span class="keyword">if</span>语句</span><br><span class="line"></span><br><span class="line"><span class="number">15</span>.用@屏蔽错误消息的做法非常低效，极其低效</span><br><span class="line"></span><br><span class="line"><span class="number">16</span>.打开apache的mod_deflate模块，可以提高网页的浏览速度</span><br><span class="line"></span><br><span class="line"><span class="number">17</span>.数据库连接当使用完毕时应关掉，不要用长连接</span><br><span class="line"></span><br><span class="line"><span class="number">18</span>.错误消息代价昂贵</span><br><span class="line"></span><br><span class="line"><span class="number">19</span>.在方法中递增局部变量，速度是最快的。几乎与在函数中调用局部变量的速度相当</span><br><span class="line"></span><br><span class="line"><span class="number">20</span>.递增一个全局变量要比递增一个局部变量慢<span class="number">2</span>倍</span><br><span class="line"></span><br><span class="line"><span class="number">21</span>.递增一个对象属性（如：<span class="variable language_">$this</span>-&gt;prop++）要比递增一个局部变量慢<span class="number">3</span>倍。</span><br><span class="line"></span><br><span class="line"><span class="number">22</span>.递增一个未预定义的局部变量要比递增一个预定义的局部变量慢<span class="number">9</span>至<span class="number">10</span>倍</span><br><span class="line"></span><br><span class="line"><span class="number">23</span>.仅定义一个局部变量而没在函数中调用它，同样会减慢速度（其程度相当于递增一个局部变量）。PHP大概会检查看是否存在全局变量。</span><br><span class="line"></span><br><span class="line"><span class="number">24</span>.方法调用看来与类中定义的方法的数量无关，因为我（在测试方法之前和之后都）添加了<span class="number">10</span>个方法，但性能上没有变化</span><br><span class="line"></span><br><span class="line"><span class="number">25</span>.派生类中的方法运行起来要快于在基类中定义的同样的方法</span><br><span class="line"></span><br><span class="line"><span class="number">26</span>.调用带有一个参数的空函数，其花费的时间相当于执行<span class="number">7</span>至<span class="number">8</span>次的局部变量递增操作。类似的方法调用所花费的时间接近于<span class="number">15</span>次的局部变量递增操作。</span><br><span class="line"></span><br><span class="line"><span class="number">27</span>.Apache解析一个PHP脚本的时间要比解析一个静态HTML页面慢<span class="number">2</span>至<span class="number">10</span>倍。尽量多用静态HTML页面，少用脚本</span><br><span class="line"></span><br><span class="line"><span class="number">28</span>.除非脚本可以缓存，否则每次调用时都会重新编译一次。引入一套PHP缓存机制通常可以提升<span class="number">25</span>%至<span class="number">100</span>%的性能，以免除编译开销。</span><br><span class="line"></span><br><span class="line"><span class="number">29</span>.尽量做缓存，可使用memcached。memcached是一款高性能的内存对象缓存系统，可用来加速动态Web应用程序，减轻数据库负载。对运算码 (OP code)的缓存很有用，使得脚本不必为每个请求做重新编译。</span><br><span class="line"></span><br><span class="line"><span class="number">30</span>.当操作字符串并需要检验其长度是否满足某种要求时，你想当然地会使用<span class="title function_ invoke__">strlen</span>()函数。此函数执行起来相当快，因为它不做任何计算，只返回在zval 结构（C的内置数据结构，用于存储PHP变量）中存储的已知字符串长度。但是，由于<span class="title function_ invoke__">strlen</span>()是函数，多多少少会有些慢，因为函数调用会经过诸多步骤，如字母小写化（译注：指函数名小写化，PHP不区分函数名大小写）、哈希查找，会跟随被调用的函数一起执行。在某些情况下，你可以使用<span class="keyword">isset</span>() 技巧加速执行你的代码。</span><br><span class="line">（举例如下）</span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">strlen</span>(<span class="variable">$foo</span>) &lt; <span class="number">5</span>) &#123; <span class="keyword">echo</span> “Foo is too short” &#125;</span><br><span class="line">（与下面的技巧做比较）</span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable">$foo</span>&#123;<span class="number">5</span>&#125;)) &#123; <span class="keyword">echo</span> “Foo is too short” &#125;    </span><br><span class="line">调用<span class="keyword">isset</span>()恰巧比<span class="title function_ invoke__">strlen</span>()快，因为与后者不同的是，<span class="keyword">isset</span>()作为一种语言结构，意味着它的执行不需要函数查找和字母小写化。也就是说，实际上在检验字符串长度的顶层代码中你没有花太多开销。</span><br><span class="line"></span><br><span class="line"><span class="number">31</span>.当执行变量<span class="variable">$i</span>的递增或递减时，<span class="variable">$i</span>++会比++<span class="variable">$i</span>慢一些。这种差异是PHP特有的，并不适用于其他语言，所以请不要修改你的C或Java代码并指望它们能立即变快，没用的。++<span class="variable">$i</span>更快是因为它只需要<span class="number">3</span>条指令(opcodes)，<span class="variable">$i</span>++则需要<span class="number">4</span>条指令。后置递增实际上会产生一个临时变量，这个临时变量随后被递增。而前置递增直接在原值上递增。这是最优化处理的一种，正如Zend的PHP优化器所作的那样。牢记这个优化处理不失为一个好主意，因为并不是所有的指令优化器都会做同样的优化处理，并且存在大量没有装配指令优化器的互联网服务提供商（ISPs）和服务器。</span><br><span class="line"></span><br><span class="line"><span class="number">32</span>.并不是事必面向对象(OOP)，面向对象往往开销很大，每个方法和对象调用都会消耗很多内存</span><br><span class="line"></span><br><span class="line"><span class="number">33</span>.并非要用类实现所有的数据结构，数组也很有用</span><br><span class="line"></span><br><span class="line"><span class="number">34</span>.不要把方法细分得过多，仔细想想你真正打算重用的是哪些代码</span><br><span class="line"></span><br><span class="line"><span class="number">35</span>.当你需要时，你总能把代码分解成方法。</span><br><span class="line"></span><br><span class="line"><span class="number">36</span>.尽量采用大量的PHP内置函数。</span><br><span class="line"></span><br><span class="line"><span class="number">37</span>.如果在代码中存在大量耗时的函数，你可以考虑用C扩展的方式实现它们</span><br><span class="line"></span><br><span class="line"><span class="number">38</span>.评估检验(profile)你的代码。检验器会告诉你，代码的哪些部分消耗了多少时间。Xdebug调试器包含了检验程序，评估检验总体上可以显示出代码的瓶颈。</span><br><span class="line"></span><br><span class="line"><span class="number">39</span>.mod_zip可作为Apache模块，用来即时压缩你的数据，并可让数据传输量降低<span class="number">80</span>%。</span><br><span class="line"></span><br><span class="line"><span class="number">40</span>.在可以用file_get_contents替代file、fopen、feof、fgets等系列方法的情况下，尽量用file_get_contents，因为他的效率高得多！但是要注意file_get_contents在打开一个URL文件时候的PHP版本问题；</span><br><span class="line"></span><br><span class="line"><span class="number">41</span>.尽量的少进行文件操作，虽然PHP的文件操作效率也不低的；</span><br><span class="line"></span><br><span class="line"><span class="number">42</span>.优化Select SQL语句，在可能的情况下尽量少的进行Insert、Update操作(在update上，我被恶批过)</span><br><span class="line"></span><br><span class="line"><span class="number">43</span>.尽可能的使用PHP内部函数（但是我却为了找个PHP里面不存在的函数，浪费了本可以写出一个自定义函数的时间，经验问题啊！）；</span><br><span class="line"></span><br><span class="line"><span class="number">44</span>.循环内部不要声明变量，尤其是大变量：对象(这好像不只是PHP里面要注意的问题吧？)</span><br><span class="line"></span><br><span class="line"><span class="number">45</span>.多维数组尽量不要循环嵌套赋值；</span><br><span class="line"></span><br><span class="line"><span class="number">46</span>.在可以用PHP内部字符串操作函数的情况下，不要用正则表达式</span><br><span class="line"></span><br><span class="line"><span class="number">47</span>.<span class="keyword">foreach</span>效率更高，尽量用<span class="keyword">foreach</span>代替<span class="keyword">while</span>和<span class="keyword">for</span>循环</span><br><span class="line"></span><br><span class="line"><span class="number">48</span>.用单引号替代双引号引用字符串；</span><br><span class="line"></span><br><span class="line"><span class="number">49</span>.“用i+=<span class="number">1</span>代替i=i+<span class="number">1</span>。符合c/c++的习惯，效率还高”</span><br><span class="line"></span><br><span class="line"><span class="number">50</span>.对<span class="keyword">global</span>变量，应该用完就<span class="keyword">unset</span>()掉</span><br></pre></td></tr></table></figure>

<h2 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">常量名 类常量建议全大写，单词间用下划线分隔    <span class="regexp">//</span> MIN_WIDTH</span><br><span class="line">变量名建议用下划线方式分隔            <span class="regexp">//</span> <span class="variable">$var_name</span></span><br><span class="line">函数名建议用驼峰命名法                <span class="regexp">//</span> varName</span><br><span class="line">定界符建议全大写                 <span class="regexp">//</span> &lt;&lt;&lt;DING, &lt;&lt;&lt;<span class="string">&#x27;DING&#x27;</span></span><br><span class="line">文件名建议全小写和下划线、数字        <span class="regexp">//</span> func_name.php</span><br><span class="line">私有属性名、方法名建议加下划线        <span class="regexp">//</span> private <span class="variable">$_name</span> _func</span><br><span class="line">接口名建议加I_                    <span class="regexp">//</span> interface I_Name</span><br></pre></td></tr></table></figure>

<h2 id="配置选项"><a href="#配置选项" class="headerlink" title="配置选项"></a>配置选项</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">set_time_limit</span><span class="params">(<span class="variable">$seconds</span>)</span></span> <span class="comment">//设置脚本最大执行时间(默认30秒)，0表示不限制</span></span><br><span class="line"><span class="function"><span class="title">ini_get</span><span class="params">(<span class="variable">$varname</span>)</span></span> <span class="comment">//获取一个配置选项的值</span></span><br><span class="line"><span class="function"><span class="title">ini_set</span><span class="params">(<span class="variable">$varname</span>, <span class="variable">$newvalue</span>)</span></span> <span class="comment">//为一个配置选项设置值</span></span><br><span class="line"><span class="function"><span class="title">extension_loaded</span><span class="params">(<span class="variable">$ext_name</span>)</span></span> <span class="comment">//检测一个扩展是否已经加载</span></span><br><span class="line"><span class="function"><span class="title">get_extension_funcs</span><span class="params">(<span class="variable">$ext_name</span>)</span></span> <span class="comment">//返回模块函数名的数组</span></span><br></pre></td></tr></table></figure>

<h2 id="命令行CLI"><a href="#命令行CLI" class="headerlink" title="命令行CLI"></a>命令行CLI</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//显示帮助信息</span></span><br><span class="line">php -h</span><br><span class="line"><span class="comment">//解析并运行-f选项给定的文件名</span></span><br><span class="line">php <span class="selector-attr">[-f]</span> &lt;file&gt; <span class="selector-attr">[--]</span> <span class="selector-attr">[args...]</span></span><br><span class="line"><span class="comment">//在命令行内运行单行PHP代码</span></span><br><span class="line">php <span class="selector-attr">[options]</span> -r &lt;code&gt; <span class="selector-attr">[--]</span> <span class="selector-attr">[args...]</span></span><br><span class="line">无需加上PHP的起始和结束标识符，否则将会导致语法解析错误</span><br><span class="line"><span class="comment">//调用phpinfo()函数并显示出结果</span></span><br><span class="line">php -i/<span class="attr">--info</span></span><br><span class="line"><span class="comment">//检查PHP语法</span></span><br><span class="line">php -l/<span class="attr">--syntax-check</span></span><br><span class="line"><span class="comment">//打印出内置以及已加载的PHP及Zend模块</span></span><br><span class="line">php -m/<span class="attr">--modules</span></span><br><span class="line"><span class="comment">//将PHP，PHP SAPI和Zend的版本信息写入标准输出</span></span><br><span class="line">php -v/<span class="attr">--version</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//参数接收</span></span><br><span class="line"><span class="variable">$argv</span>    传递给脚本的参数数组</span><br><span class="line">    第一个参数总是当前脚本的文件名，因此<span class="variable">$argv</span><span class="selector-attr">[0]</span>就是脚本文件名</span><br><span class="line"><span class="variable">$argc</span>    传递给脚本的参数数目</span><br><span class="line">    脚本的文件名总是作为参数传递给当前脚本，因此<span class="variable">$argc</span>的最小值为<span class="number">1</span></span><br><span class="line">包含当运行于命令行下时传递给当前脚本的参数的数组</span><br><span class="line">此两个变量仅在register_argc_argv打开时可用</span><br></pre></td></tr></table></figure>

<h2 id="类和对象"><a href="#类和对象" class="headerlink" title="类和对象"></a>类和对象</h2><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 成员：</span></span><br><span class="line">    类成员：类常量、静态属性、静态方法</span><br><span class="line">    对象成员：非静态属性、非静态方法</span><br><span class="line">    <span class="meta"># 除此外，类不能包含任何其他东西！！！</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 类名、方法名、属性名均不区分大小写</span></span><br><span class="line"><span class="meta"># $this代表本对象，self代表本类，parent代表父类</span></span><br><span class="line"><span class="meta"># 类和函数均可被事先编译（仅作为最外层时）</span></span><br><span class="line"><span class="meta"># 类的定义必须在单一的PHP区块内，不能被多个PHP标签分割</span></span><br></pre></td></tr></table></figure>

<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br></pre></td><td class="code"><pre><span class="line">/ 构造方法</span><br><span class="line">- 具有构造函数的类会在每次创建新对象时先调用此方法</span><br><span class="line">void __construct([ mixed <span class="variable">$args</span> [, $... ]] )</span><br><span class="line">- 构造方法所需参数由new实例化对象时，给类增加参数值。</span><br><span class="line">- 构造方法也可以被手动调用。</span><br><span class="line">- <span class="number">5.3</span>.<span class="number">3</span>版本以前，支持于类名同名的方法作为构造方法。</span><br><span class="line">- 两种冲突时，__construct 优先</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 析构方法</span><br><span class="line">- 析构函数会在到某个对象的所有引用都被删除或者当对象被显式销毁时执行。</span><br><span class="line">void __destruct( void )</span><br><span class="line"><span class="comment"># 作用：释放对象所占用的资源</span></span><br><span class="line"><span class="comment"># 调用的时机 </span></span><br><span class="line">    - 脚本结束时所有资源均被释放，包括对象</span><br><span class="line">    - 手动删除对象时</span><br><span class="line">    - 保存对象的变量被赋予新值时(任何值，包括null)</span><br><span class="line">    - 在使用<span class="keyword">exit</span>()终止脚本运行时也会被调用</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 静态成员(static关键字)</span><br><span class="line">    - 声明类成员或方法为static，就可以不实例化类而直接访问。</span><br><span class="line">    - 静态成员（属性或方法）均属于类，故不能通过<span class="variable">$this</span>或-&gt;访问。</span><br><span class="line">    - 静态成员是所有对象共享，属于类。</span><br><span class="line">    - 静态成员用类调用，非静态成员用对象调用。</span><br><span class="line"><span class="comment"># 静态属性</span></span><br><span class="line">    - 静态属性不可以由对象通过-&gt;操作符来访问。</span><br><span class="line">    - 静态属性只能被初始化为一个字符值或一个常量，不能使用表达式。 所以你可以把静态属性初始化为整型或数组，但不能指向另一个变量或函数返回值，也不能指向一个对象。</span><br><span class="line"><span class="comment"># 静态方法</span></span><br><span class="line">    - 由于静态方法不需要通过对象即可调用，所以伪变量<span class="variable">$this</span>在静态方法中不可用。</span><br><span class="line">    - 用::方式调用一个非静态方法会导致一个E_STRICT级别的错误。</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 访问解析操作符(::)</span><br><span class="line">    - 可以用于访问静态成员、方法和常量，还可以用于覆盖类中的成员和方法。 </span><br><span class="line">    - 当在类的外部访问这些静态成员、方法和常量时，必须使用类的名字。 </span><br><span class="line">    - self 和 parent 这两个特殊的关键字是用于在类的内部对成员或方法进行访问的。</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 访问辨析</span><br><span class="line">- 对象成员，内部通过<span class="variable">$this</span>指定，外部通过对象名指定，均用-&gt;访问，访问属性时不需加$。</span><br><span class="line">    对象名-&gt;属性名    对象名-&gt;方法名()    <span class="variable">$this</span>-&gt;属性名        <span class="variable">$this</span>-&gt;方法名()</span><br><span class="line">- 类成员，内部通过self或parent指定，外部通过类名指定，均用::访问，访问属性时需加$。</span><br><span class="line">    类名::$属性名    类名::方法名()        self::$属性名        self::方法名()</span><br><span class="line">- 特殊：也可以通过对象访问类成员。（不建议）</span><br><span class="line">    对象名::$类属性名    <span class="variable">$this</span>::$类属性名    对象名::$类方法名()    <span class="variable">$this</span>::类方法名()</span><br><span class="line"><span class="comment"># 对象成员访问用-&gt;，类成员访问用::</span></span><br><span class="line"></span><br><span class="line">- 无论是静态方法还是非静态方法，均可通过类或对象进行访问。</span><br><span class="line">- 静态属性通过类访问，静态方法通过对象访问。</span><br><span class="line">- 只有使用对象调用非静态方法时，<span class="variable">$this</span>才可以使用！</span><br><span class="line">- 静态方法不可使用<span class="variable">$this</span>。</span><br><span class="line">- 类可以调用对象方法，但注意方法内不能有<span class="variable">$this</span>。</span><br><span class="line">- 非静态方法可以调用静态属性或静态方法，反之不可以。</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 类常量</span><br><span class="line">- 常量的值将始终保持不变。</span><br><span class="line">- 在定义和使用常量的时候不需要使用$符号。</span><br><span class="line">- 常量的值必须是一个定值，不能是变量，类属性或其它操作（如函数调用）的结果。</span><br><span class="line"><span class="comment"># 定义：const 常量名 = 常量值;</span></span><br><span class="line">- 不需要加public等访问修饰限定符</span><br><span class="line">- 类常量属于类，使用类访问，类名::类常量 或 self::类常量</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 自动加载对象</span><br><span class="line">- 在试图使用尚未被定义的类时自动调用 __autoload 函数</span><br><span class="line">- 自动加载使用到的类名文件（根据类名找相应名称的文件，故需类名与类文件名一致）</span><br><span class="line">- 每个需要加载类的文件都需要存在__autoload函数</span><br><span class="line">- 将__autoload函数写入单独的文件，每个需要用到类的文件再require该函数文件</span><br><span class="line">- __autoload 参数是类名</span><br><span class="line"><span class="keyword">function</span> __autoload(<span class="variable">$class_name</span>) &#123;</span><br><span class="line">    require_once <span class="variable">$_SERVER</span>[<span class="string">&quot;DOCUMENT_ROOT&quot;</span>] . <span class="string">&quot;/class/$class_name.php&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="regexp">//</span> <span class="variable">$_SERVER</span>[<span class="string">&quot;DOCUMENT_ROOT&quot;</span>] 当前运行脚本所在的文档根目录</span><br><span class="line">- 可以通过类名，来推导出类所在的文件名！</span><br><span class="line">- 如果一个项目存在多个自动加载函数时，定义一个可以完成加载的普通函数，并在函数之前使用spl_autoload_register注册该函数。</span><br><span class="line"><span class="comment"># spl_autoload_register</span></span><br><span class="line">- 注册__autoload()函数</span><br><span class="line">bool spl_autoload_register ([ callback <span class="variable">$autoload_function</span> ] )</span><br><span class="line">- 可以注册多个自动加载函数，先注册的先执行</span><br><span class="line">- 一旦注册自动加载函数，__autoload就失效。</span><br><span class="line">- 注册函数时，参数为函数名（注意加引号）；注册方法时，参数为数组</span><br><span class="line"><span class="comment"># 注册类或对象的方法为自动加载方法时，参数需为数组：</span></span><br><span class="line">spl_autoload_register(array(__CLASS__, <span class="string">&#x27;__autoload&#x27;</span>));</span><br><span class="line">__CLASS__表示当前类名，若是对象可用<span class="variable">$this</span>，详细见手册</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 序列化（串行化）</span><br><span class="line"><span class="comment"># 数据传输均是字符串类型</span></span><br><span class="line"><span class="comment"># 除了资源类型，均可序列化</span></span><br><span class="line"><span class="comment"># 序列化在存放数据时，会存放数据本身，也会存放数据类型</span></span><br><span class="line">作用：<span class="number">1</span>.在网络传输数据时；<span class="number">2</span>.为了将数组或对象放在磁盘时</span><br><span class="line"><span class="comment"># 序列化</span></span><br><span class="line">serialize        产生一个可存储的值的表示</span><br><span class="line">string serialize ( mixed <span class="variable">$value</span> )</span><br><span class="line">- 返回字符串，此字符串包含了表示value的字节流，可以存储于任何地方。</span><br><span class="line">- 有利于存储或传递 PHP 的值，同时不丢失其类型和结构。</span><br><span class="line"><span class="comment"># 反序列化</span></span><br><span class="line">unserialize        从已存储的表示中创建PHP的值</span><br><span class="line">mixed unserialize ( string <span class="variable">$str</span> [, string <span class="variable">$callback</span> ] )</span><br><span class="line">- 对单一的已序列化的变量进行操作，将其转换回PHP的值。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件的读写操作</span></span><br><span class="line">- file_put_contents        将一个字符串写入文件</span><br><span class="line">int file_put_contents(<span class="variable">$file</span>, <span class="variable">$data</span> [,<span class="variable">$flags</span>])</span><br><span class="line">    <span class="variable">$flags</span>：FILE_USE_INCLUDE_PATH(覆盖)，FILE_APPEND(追加)</span><br><span class="line">- file_get_contents        将整个文件读入一个字符串</span><br><span class="line">string file_get_contents(<span class="variable">$file</span> [, bool <span class="variable">$use_include_path</span> [,int <span class="variable">$offset</span> [,int <span class="variable">$maxlen</span>]]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对象序列化</span></span><br><span class="line">- 只能序列化对象内部的数据，即非静态属性。</span><br><span class="line"><span class="comment"># 需在反序列化对象之前加载类，也可以触发自动加载机制。</span></span><br><span class="line"></span><br><span class="line">__sleep        序列化需序列化的属性。</span><br><span class="line">        - 提交未提交的数据，或类似的清理操作，部分串行化对象。</span><br><span class="line">        - 返回一个包含对象中所有应被序列化的变量名称的数组</span><br><span class="line">__wakeup    反序列化时，预先准备对象需要的资源</span><br><span class="line">        - 重新建立数据库连接，或执行其它初始化操作</span><br><span class="line">    public <span class="keyword">function</span> __sleep() &#123;</span><br><span class="line">        return array(<span class="string">&#x27;server&#x27;</span>, <span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;db&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    public <span class="keyword">function</span> __wakeup() &#123;</span><br><span class="line">        <span class="variable">$this</span>-&gt;connect();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 对象继承</span><br><span class="line">class 子类名 extends 父类 &#123;&#125;</span><br><span class="line">如果一个对象是子类的对象，那么同时也是父类的对象。</span><br><span class="line">单继承：一个类只能继承一个父类，不能同时继承多个类。但一个父类可以被多个子类继承。</span><br><span class="line"></span><br><span class="line">instanceof    判断某对象是否为某类的对象</span><br><span class="line">    对象名 instanceof 类名</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 访问控制</span><br><span class="line">public        公有的（继承链、本类、外部均可访问）</span><br><span class="line">protected    保护的（仅继承链、本类可访问）</span><br><span class="line">private        私有的（仅本类可访问）</span><br><span class="line">根据成员定义位置、访问位置判断。</span><br><span class="line"><span class="comment"># 兼容性问题</span></span><br><span class="line">- 声明属性时，var关键字声明的默认为public权限</span><br><span class="line">- 声明方法时，省略访问修饰符，默认为public权限</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 重写 override</span><br><span class="line"><span class="variable">$this</span>代表本对象，被谁调用，就代表哪个对象。</span><br><span class="line">- 继承时，子类成员名于父类成员名发生冲突，则子类成员会重写父类成员。</span><br><span class="line">- 属性和方法均可被子类重写。</span><br><span class="line">- 当父类的方法或属性已经不满足子类的需求，则需要重写。</span><br><span class="line">- 也可能因为命名不规范导致重写。</span><br><span class="line"></span><br><span class="line">私有属性不能被重写，每个私有属性都会被记录。在记录属性名的同时，还会记录类。</span><br><span class="line"></span><br><span class="line">如果有内置函数被重写，则可调用父类方法。如调用父类构造方法parent::__construct()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重写限制</span></span><br><span class="line">访问限制：</span><br><span class="line">    子类的成员的访问控制必须相等或弱于父类。</span><br><span class="line">方法参数限制：</span><br><span class="line">    参数数量必须相同，参数名可不同。</span><br><span class="line"></span><br><span class="line"><span class="comment"># $this确定原则</span></span><br><span class="line"><span class="variable">$this</span>为调用该方法的对象，表示该方法的执行环境对象。</span><br><span class="line">    - 对象调用</span><br><span class="line">    - 环境的传递。如果当前调用时，不能确定<span class="variable">$this</span>的值(静态调用)，此时静态调用所处对象环境会传递到被调用的方法内。</span><br><span class="line"><span class="variable">$this</span>并非永远代表本对象，而是由方法的执行环境决定。</span><br><span class="line"></span><br><span class="line"><span class="comment"># final</span></span><br><span class="line">如果父类中的方法被声明为final，则子类无法覆盖（重写）该方法。</span><br><span class="line">如果一个类被声明为final，则不能被继承。</span><br><span class="line">但加有final关键字的类依旧能被实例化！</span><br><span class="line"><span class="comment"># 抽象类</span></span><br><span class="line">关键字：abstract</span><br><span class="line">抽象类不能直接被实例化，必须先继承该抽象类，然后再实例化子类。</span><br><span class="line">抽象类中至少要包含一个抽象方法。非抽象类不能包含抽象方法。</span><br><span class="line">如果类方法被声明为抽象的，那么其中就不能包括具体的功能实现。抽象方法不能包含大括号及方法体。</span><br><span class="line">继承一个抽象类的时候，子类必须实现抽象类中的所有抽象方法。</span><br><span class="line">    即，子类必须重写抽象父类中的所有抽象方法。</span><br><span class="line">另外，这些方法的可见性必须和抽象类中一样（或者更为宽松）。</span><br><span class="line">    即，如果抽象类中某个抽象方法被声明为protected，那么子类中实现的方法就应该声明为protected或者public，而不能定义为private。</span><br><span class="line">- 抽象类的子类中的普通方法执行方式和其他类相同。</span><br><span class="line">- 作用：</span><br><span class="line">    <span class="number">1</span>. 继承，为扩展类，统一公共操作。</span><br><span class="line">    <span class="number">2</span>. 限制结构（规范）。规范子类的结构。</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 接口</span><br><span class="line">关键字：interface</span><br><span class="line">- 对象提供的与对象交互的方式就是接口。</span><br><span class="line">- 使用接口可以指定某个类必须实现哪些方法，但不需要定义这些方法的具体内容。</span><br><span class="line">- 通过interface来定义一个接口，就像定义一个标准的类一样，但其中定义所有的方法都是空的。 </span><br><span class="line">- 接口中定义的所有属性和方法都必须是public，可省略public关键字。</span><br><span class="line">- 接口中也可以定义常量(const)。接口常量和类常量的使用完全相同。</span><br><span class="line">    可以用::访问。接口名::常量名，实现类::常量名。</span><br><span class="line">    它们都是定值，可以被子类或子接口使用，但不能修改。</span><br><span class="line">- 接口不能定义属性！</span><br><span class="line"><span class="comment"># 定义接口</span></span><br><span class="line">interface 接口名 &#123;</span><br><span class="line">    接口内容（公共方法声明的集合）</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 接口实现</span></span><br><span class="line">- 要实现一个接口，可以使用implements操作符。</span><br><span class="line">- 类中必须实现接口中定义的所有方法，否则会报一个fatal错误。</span><br><span class="line">- 如果要实现多个接口，可以用逗号来分隔多个接口的名称。</span><br><span class="line">- 实现多个接口时，接口中的方法不能有重名。</span><br><span class="line">- 接口也可以继承，通过使用extends操作符。</span><br><span class="line">class 类名 implements 接口名 &#123;</span><br><span class="line">    接口方法的实现</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 注意</span></span><br><span class="line">    <span class="number">1</span>. 类与抽象类之间是继承关系，类与接口之间是实现关系。</span><br><span class="line">    <span class="number">2</span>. 类与抽象类是单继承，类与接口是多实现。</span><br><span class="line">    <span class="number">3</span>. 接口不是类，限制类的结构。</span><br><span class="line">    <span class="number">4</span>. 接口与接口之间是多继承。用extends关键字。</span><br><span class="line">        interface I_C extends I_A, I_B &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 静态延迟绑定</span><br><span class="line">self::，代表本类(当前代码所在类)</span><br><span class="line">    永远代表本类，因为在类编译时已经被确定。</span><br><span class="line">    即，子类调用父类方法，self却不代表调用的子类。</span><br><span class="line">static::，代表本类(调用该方法的类)</span><br><span class="line">    用于在继承范围内引用静态调用的类。</span><br><span class="line">    运行时，才确定代表的类。</span><br><span class="line">    static::不再被解析为定义当前方法所在的类，而是在实际运行时计算的。</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 对象的遍历（迭代）</span><br><span class="line">- 对象通过属性保存数据，故遍历对象的属性。</span><br><span class="line">- foreach语言结构，获得属性名和属性值。</span><br><span class="line">    foreach (<span class="variable">$obj</span> as <span class="variable">$p_name</span> =&gt; <span class="variable">$p_value</span>) &#123;&#125;</span><br><span class="line"><span class="comment"># 自定义遍历(迭代器Iterator)</span></span><br><span class="line">Iterator - 可在内部迭代自己的外部迭代器或类的接口</span><br><span class="line">Iterator::current    — 返回当前元素</span><br><span class="line">Iterator::key        — 返回当前元素的键</span><br><span class="line">Iterator::<span class="keyword">next</span>        — 向前移动到下一个元素</span><br><span class="line">Iterator::rewind    — 返回到迭代器的第一个元素</span><br><span class="line">Iterator::valid        — 检查当前位置是否有效</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对象的克隆</span></span><br><span class="line"><span class="regexp">//</span>对象之间的传值是[引用]传递。</span><br><span class="line">克隆：新对象 = clone 旧对象</span><br><span class="line">    - 所有的引用属性仍然会是一个指向原来的变量的引用。 </span><br><span class="line">__clone()方法在对象被克隆时自动调用。</span><br><span class="line">注意：构造方法对应实例化(new)，克隆方法对应克隆(clone)。</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 单例模式</span><br><span class="line"><span class="comment">#三私一公</span></span><br><span class="line">单例模式（Singleton）用于为一个类生成一个唯一的对象。最常用的地方是数据库连接。使用单例模式生成一个对象后，该对象可以被其它众多对象所使用。</span><br><span class="line"><span class="comment"># 防止一个类被实例化多次</span></span><br><span class="line">class MySQLDB &#123;</span><br><span class="line">    private static <span class="variable">$instance</span> = null; <span class="regexp">//</span> 存类实例在此属性中</span><br><span class="line">    <span class="regexp">//</span> 构造方法声明为private，防止直接创建对象</span><br><span class="line">    private <span class="keyword">function</span> __construct() &#123;&#125;</span><br><span class="line">    public static <span class="keyword">function</span> getInstance() &#123;</span><br><span class="line">        <span class="keyword">if</span>(! self::<span class="variable">$instance</span> instanceof static) &#123;</span><br><span class="line">            self::<span class="variable">$instance</span> = new static;</span><br><span class="line">        &#125;</span><br><span class="line">        return self::<span class="variable">$instance</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    private <span class="keyword">function</span> __clone() &#123;&#125; <span class="regexp">//</span> 阻止用户复制对象实例</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 魔术方法</span><br><span class="line">__construct        构造方法</span><br><span class="line">__destruct        析构方法</span><br><span class="line">__clone            克隆对象</span><br><span class="line">__sleep            序列化对象</span><br><span class="line">__wakeup        反序列化对象</span><br><span class="line">__autoload        自动加载，使用类但未找到时</span><br><span class="line"></span><br><span class="line">__toString        对象被当作字符串使用时</span><br><span class="line">__invoke        当尝试以调用函数的方式调用一个对象时</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重载 overload</span></span><br><span class="line">指动态地<span class="string">&quot;创建&quot;</span>类属性和方法</span><br><span class="line">用户可以自由的为对象添加额外的属性，该特性就是重载。</span><br><span class="line">所有的重载方法都必须被声明为public。</span><br><span class="line">当调用当前环境下未定义或不可见的类属性或方法时，重载方法会被调用。</span><br><span class="line">重载相关魔术方法的参数都不能通过引用传递。</span><br><span class="line"><span class="comment"># 属性重载</span></span><br><span class="line">- 处理不可访问的属性</span><br><span class="line">属性重载只能在对象中进行。</span><br><span class="line"><span class="comment"># 属性重载对于静态属性无效</span></span><br><span class="line">在静态方法中，这些魔术方法将不会被调用。所以这些方法都不能被声明为static。</span><br><span class="line">__set        在给不可访问的属性赋值时</span><br><span class="line">    public void __set(string <span class="variable">$name</span>, mixed <span class="variable">$value</span>)</span><br><span class="line">    作用：批量管理私有属性，间接保护对象结构</span><br><span class="line">__get        读取不可访问的属性的值时</span><br><span class="line">    public mixed __get(string <span class="variable">$name</span>)</span><br><span class="line">__isset        当对不可访问的属性调用isset()或empty()时</span><br><span class="line">    public bool __isset(string <span class="variable">$name</span>)</span><br><span class="line">__unset        当对不可访问的属性调用unset()时</span><br><span class="line">    public void __unset(string <span class="variable">$name</span>)</span><br><span class="line"><span class="comment"># 方法重载</span></span><br><span class="line">- 处理不可访问的方法</span><br><span class="line">__call            当调用一个不可访问的非静态方法（如未定义，或者不可见）时自动被调用</span><br><span class="line">        public mixed __call(string <span class="variable">$name</span>, array <span class="variable">$arguments</span>)</span><br><span class="line">__callStatic    当在调用一个不可访问的静态方法（如未定义，或者不可见）时自动被调用</span><br><span class="line">        public static mixed __callStatic(string <span class="variable">$name</span>, array <span class="variable">$arguments</span>)</span><br><span class="line"><span class="comment"># $name参数是要调用的方法名称。$arguments参数是一个数组，包含着要传递给方法的参数。</span></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 类型约束</span><br><span class="line">函数的参数可以指定只能为对象或数组</span><br><span class="line">限定为对象则在形参前加类名，限定为数组则在形参前加array</span><br><span class="line">类型约束允许NULL值</span><br><span class="line">类型约束不只是用在类的成员方法里，也能使用在函数里。 </span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 三大特性</span><br><span class="line">封装：隐藏内部是吸纳，仅开发接口。</span><br><span class="line">继承：一个对象的成员被另一个对象所使用。语法上体现为代码的共用。</span><br><span class="line">多态：多种形态。</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 类与对象·关键字</span><br><span class="line">this        代表本对象</span><br><span class="line">public        公有的（继承链、本类、外部均可访问）</span><br><span class="line">protected    保护的（仅继承链、本类可访问）</span><br><span class="line">private        私有的（仅本类可访问）</span><br><span class="line">parent::    代表父类</span><br><span class="line">self::        代表本类(当前代码所在类)</span><br><span class="line">static::    代表本类(调用该方法的类)</span><br><span class="line">static        静态成员（属性、方法），所有对象均可使用，外部也可直接使用或修改，静态方法不可访问非静态成员</span><br><span class="line">final        方法用final不可被子类重载，类用final不可被继承（方法、类）</span><br><span class="line">const        类常量（属性）</span><br><span class="line">abstract    抽象类</span><br><span class="line">interface    接口</span><br><span class="line">extends        类继承(子接口继承接口、其他普通类继承)</span><br><span class="line">implements    接口实现（类实现接口、抽象类实现借口）（对接口的实现和继承均可有多个）</span><br><span class="line">Iterator    内置接口（迭代）</span><br><span class="line">clone        克隆</span><br><span class="line">instance    实例</span><br><span class="line">instanceof    某对象是否属于某类</span><br><span class="line"></span><br><span class="line"><span class="regexp">/* 【类与对象相关函数】 */</span></span><br><span class="line">class_alias([<span class="variable">$original</span> [,<span class="variable">$alias</span>]])  给类取别名</span><br><span class="line">class_exists(<span class="variable">$class</span> [,<span class="variable">$autoload</span>])   检查类是否已定义</span><br><span class="line">interface_exists(<span class="variable">$interface</span> [,<span class="variable">$autoload</span>])   检查接口是否已被定义</span><br><span class="line">method_exists(<span class="variable">$obj</span>, <span class="variable">$method</span>)检查类的方法是否存在</span><br><span class="line">property_exists(<span class="variable">$class</span>, <span class="variable">$property</span>)  检查对象或类是否具有该属性</span><br><span class="line">get_declared_classes(void)  返回由已定义类的名字所组成的数组</span><br><span class="line">get_declared_interfaces(void)   返回一个数组包含所有已声明的接口</span><br><span class="line">get_class([<span class="variable">$obj</span>])       返回对象的类名</span><br><span class="line">get_parent_class([<span class="variable">$obj</span>])    返回对象或类的父类名</span><br><span class="line">get_class_methods(<span class="variable">$class</span>)   返回由类的方法名组成的数组</span><br><span class="line">get_object_vars(<span class="variable">$obj</span>)   返回由对象属性组成的关联数组</span><br><span class="line">get_class_vars(<span class="variable">$class</span>)  返回由类的默认属性组成的数组</span><br><span class="line">is_a(<span class="variable">$obj</span>, <span class="variable">$class</span>) 如果对象属于该类或该类是此对象的父类则返回TRUE</span><br><span class="line">is_subclass_of(<span class="variable">$obj</span>, <span class="variable">$class</span>)    如果此对象是该类的子类，则返回TRUE</span><br><span class="line">get_object_vars(<span class="variable">$obj</span>)   返回由对象属性组成的关联数组</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 常用类</span><br><span class="line"><span class="comment"># PHP手册 -&gt; 预定义类</span></span><br><span class="line">Closure        闭包类，匿名函数对象的final类</span><br><span class="line">stdClass    标准类，通常用于对象类保存集合数据</span><br><span class="line">__PHP_Incomplete_Class        不完整类，当只有对象而没有找到类时，则该对象被认为是该类的对象</span><br><span class="line">Exception    异常类</span><br><span class="line">PDO            数据对象类</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 魔术常量</span><br><span class="line">__DIR__            文件所在的目录</span><br><span class="line">__LINE__        文件中的当前行号 </span><br><span class="line">__FILE__        文件的完整路径（绝对路径）和文件名</span><br><span class="line"></span><br><span class="line">__CLASS__        类的名称</span><br><span class="line">__METHOD__        类的方法名，包含类名和方法名</span><br><span class="line">__FUNCTION__    函数名称，用在方法内只表示方法名</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 反射机制 Reflection</span><br><span class="line">作用：<span class="number">1</span>. 获取结构信息        <span class="number">2</span>. 代理执行</span><br><span class="line">ReflectionClass 报告一个类的有关信息</span><br><span class="line">ReflectionMethod 报告一个方法的有关信息</span><br><span class="line">ReflectionClass::export    输出类结构报告</span><br><span class="line"><span class="comment"># 代理执行</span></span><br><span class="line">实例化 ReflectionFunction 类的对象</span><br><span class="line">    <span class="variable">$f</span> = new ReflectionFunction(<span class="string">&#x27;func&#x27;</span>);    <span class="regexp">//</span> <span class="keyword">func</span>为函数<span class="keyword">func</span>(<span class="variable">$p</span>)</span><br><span class="line">    <span class="variable">$f</span>-&gt;invoke(<span class="string">&#x27;param&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="网站并发"><a href="#网站并发" class="headerlink" title="网站并发"></a>网站并发</h2><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">测试工具：apache/bin/ab.exe</span><br><span class="line">用法：cmd&#123;%apache-bin%&#125;&gt;ab.exe -n 执行访问次数 -c 用户并发数量 URL地址</span><br><span class="line">MPM(多路处理模块)：perfork(预处理模式), worker(工作者模式), winnt(Win系统)</span><br><span class="line">MPM配置：httpd-mpm.conf</span><br><span class="line">查看当前MPM模式：httpd –l    mpm_xxx.c中xxx表示当前模式类型</span><br><span class="line">httpd.conf配置(开启MPM)：<span class="comment">#Include conf/extra/httpd-mpm.conf</span></span><br><span class="line"><span class="comment">#参考配置</span></span><br><span class="line"><span class="comment">#配置文件：extra/httpd-mpm.conf</span></span><br><span class="line"><span class="comment">#mpm_winnt.c</span></span><br><span class="line">&lt;IfModule mpm_winnt_module&gt;</span><br><span class="line">    ThreadsPerChild     <span class="number"> 1000 </span>  <span class="comment">#中型网站1500-5500合理</span></span><br><span class="line">    MaxRequestsPerChild  0</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"><span class="comment">#mpm_prefork.c</span></span><br><span class="line">&lt;IfModule mpm_prefork_module&gt;</span><br><span class="line">    StartServers   <span class="number"> 5 </span>      <span class="comment">#预先启动</span></span><br><span class="line">    MinSpareServers 5</span><br><span class="line">    MaxSpareServers<span class="number"> 10 </span>     <span class="comment">#最大空闲进程</span></span><br><span class="line">    ServerLimit    <span class="number"> 1500 </span>   <span class="comment">#用于修改apache编程参数</span></span><br><span class="line">    MaxClients     <span class="number"> 1000 </span>   <span class="comment">#最大并发数</span></span><br><span class="line">    MaxRequestsPerChild<span class="number"> 0 </span>  <span class="comment">#一个进程对应的线程数，对worker更用</span></span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"><span class="comment">#如果你的网站pv值上百万</span></span><br><span class="line">ServerLimit    <span class="number"> 2500 </span>  <span class="comment">#用于修改apache编程参数</span></span><br><span class="line">MaxClients     <span class="number"> 2000 </span>  <span class="comment">#最大并发数</span></span><br></pre></td></tr></table></figure>

<h2 id="预定义常量"><a href="#预定义常量" class="headerlink" title="预定义常量"></a>预定义常量</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">PATH_SEPARATOR  <span class="regexp">//</span>路径分隔符(Windows为分号，类Unix为冒号)</span><br><span class="line">DIRECTORY_SEPARATOR <span class="regexp">//</span>目录分隔符</span><br><span class="line">PHP_EOL <span class="regexp">//</span>当前系统的换行符</span><br><span class="line">PHP_VERSION <span class="regexp">//</span>PHP版本号</span><br><span class="line">PHP_OS  <span class="regexp">//</span>PHP服务操作系统</span><br><span class="line">PHP_SAPI    <span class="regexp">//</span>用来判断是使用命令行还是浏览器执行的，如果 PHP_SAPI==<span class="string">&#x27;cli&#x27;</span> 表示是在命令行下执行</span><br><span class="line">PHP_INT_MAX                    INT最大值，<span class="number">32</span>位平台时值为<span class="number">2147483647</span></span><br><span class="line">PHP_INT_SIZE                   INT字长，<span class="number">32</span>位平台时值为<span class="number">4</span>（<span class="number">4</span>字节）</span><br><span class="line">M_PI    <span class="regexp">//</span>圆周率值</span><br><span class="line">M_E     <span class="regexp">//</span>自然数</span><br></pre></td></tr></table></figure>

<h2 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">当前浏览器请求的哪个脚本，当前位置就是属于哪个脚本。</span><br><span class="line">./file 和 file 都表示当前目录下的file文件</span><br><span class="line">file情况（嵌套载入文件时）：</span><br><span class="line">如果当前目录没找到该文件就在代码文件所在目录中继续找。</span><br><span class="line">如果当前目录找到有该文件，则不会再在代码文件所在目录去找也不会再加载。</span><br><span class="line"><span class="strong">__DIR__</span>     脚本文件所在目录</span><br><span class="line"><span class="strong">__FILE__</span>    脚本文件路径</span><br><span class="line"></span><br><span class="line">include<span class="emphasis">_path    加载文件查找目录</span></span><br><span class="line"><span class="emphasis">    set_</span>include<span class="emphasis">_path()  设置include_</span>path，可多个，用字符串作参数</span><br><span class="line"><span class="code">    该函数设置的path只针对该当前文件有效</span></span><br><span class="line"><span class="code">    该设置只针对查找未直接写文件路径方式有效</span></span><br><span class="line"><span class="code">    设置新的include_path会覆盖原来的</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">    get_include_path()  获取当前include_path设置项，无参数</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">    路径分隔符，在Windows下是分号，在Linux下是冒号</span></span><br><span class="line"><span class="code">    利用预定义常量 PATH_SEPARATOR 来获得当前的分隔符</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">如果直接写文件名：</span><br><span class="line"><span class="bullet">    1.</span> include<span class="emphasis">_path所设置的</span></span><br><span class="line"><span class="emphasis">    2. 当前目录</span></span><br><span class="line"><span class="emphasis">    3. 代码所在文件的目录</span></span><br><span class="line"><span class="emphasis">如果文件名前带有路径，则会直接根据路径查找，include_</span>path直接被忽略</span><br></pre></td></tr></table></figure>

<h2 id="变量函数"><a href="#变量函数" class="headerlink" title="变量函数"></a>变量函数</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get_defined_vars    <span class="regexp">//</span>返回由所有已定义变量所组成的数组(包括环境变量、服务器变量和用户定义的变量)</span><br></pre></td></tr></table></figure>

<h2 id="可变标识符"><a href="#可变标识符" class="headerlink" title="可变标识符"></a>可变标识符</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">可变变量  <span class="variable">$i</span> = <span class="number">3</span>; <span class="variable">$k</span> = <span class="string">&#x27;i&#x27;</span>; <span class="keyword">echo</span> <span class="variable">$$k</span>; <span class="comment">//输出3</span></span><br><span class="line">可变函数  <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;<span class="keyword">echo</span> <span class="string">&#x27;hello!&#x27;</span>;&#125; <span class="variable">$i</span> = <span class="string">&#x27;func&#x27;</span>; <span class="variable">$i</span>(); <span class="comment">//输出hello</span></span><br><span class="line">可变下标  <span class="variable">$i</span> = <span class="string">&#x27;1234&#x27;</span>; <span class="variable">$k</span> = <span class="number">3</span>; <span class="keyword">echo</span> <span class="variable">$i</span>[<span class="variable">$k</span>];   <span class="comment">//输出4</span></span><br><span class="line">可变类名  <span class="class"><span class="keyword">class</span> <span class="title">CLS</span></span>&#123;<span class="keyword">public</span> <span class="variable">$k</span> = <span class="string">&#x27;hello&#x27;</span>;&#125; <span class="variable">$i</span> = <span class="string">&#x27;CLS&#x27;</span>; <span class="variable">$j</span> = <span class="keyword">new</span> <span class="variable">$i</span>; <span class="keyword">echo</span> <span class="variable">$j</span>-&gt;k;</span><br><span class="line">可变属性  <span class="class"><span class="keyword">class</span> <span class="title">CLS</span></span>&#123;<span class="keyword">public</span> <span class="variable">$k</span> = <span class="string">&#x27;hello&#x27;</span>;&#125; <span class="variable">$i</span> = <span class="string">&#x27;k&#x27;</span>; <span class="variable">$j</span> = <span class="keyword">new</span> CLS; <span class="keyword">echo</span> <span class="variable">$j</span>-&gt;<span class="variable">$i</span>;</span><br><span class="line">可变方法  <span class="class"><span class="keyword">class</span> <span class="title">CLS</span></span>&#123;<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">k</span>(<span class="params"></span>)</span>&#123;<span class="keyword">echo</span> <span class="string">&#x27;hello&#x27;</span>;&#125;&#125; <span class="variable">$i</span>=<span class="string">&#x27;k&#x27;</span>; <span class="variable">$j</span>=<span class="keyword">new</span> CLS; <span class="variable">$j</span>-&gt;<span class="variable">$i</span>();</span><br></pre></td></tr></table></figure>

<h2 id="终止和延迟脚本执行"><a href="#终止和延迟脚本执行" class="headerlink" title="终止和延迟脚本执行"></a>终止和延迟脚本执行</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">die / <span class="keyword">exit</span>   终止</span><br><span class="line">return是终止所在脚本的执行</span><br><span class="line">die和<span class="keyword">exit</span>会立即终止脚本执行</span><br><span class="line">die(<span class="string">&quot;到此为止&quot;</span>);     该函数内的字符串可被输出</span><br><span class="line">sleep()  延迟(单位：秒)</span><br><span class="line">    默认最多可延迟<span class="number">30</span>秒，PHP配置可以修改 max_execution_time</span><br><span class="line">    例：sleep(<span class="number">12</span>);</span><br><span class="line">usleep()    以指定的微秒数延迟执行</span><br><span class="line">time_sleep_until    使脚本睡眠到指定的时间为止</span><br></pre></td></tr></table></figure>

<h2 id="定界符"><a href="#定界符" class="headerlink" title="定界符"></a>定界符</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">herodoc - 功能同双引号，能解析</span><br><span class="line"><span class="variable">$str</span> = &lt;&lt;&lt;<span class="string">AAA</span></span><br><span class="line"><span class="string">字符串内容</span></span><br><span class="line"><span class="string">AAA</span>;</span><br><span class="line"></span><br><span class="line">nowdoc - 功能同单引号，不能解析</span><br><span class="line">只在开始位置有单引号</span><br><span class="line"><span class="variable">$str</span> = &lt;&lt;&lt;<span class="string">&#x27;AAA&#x27;</span></span><br><span class="line">字符串内容</span><br><span class="line">AAA;</span><br></pre></td></tr></table></figure>

<h2 id="静态化"><a href="#静态化" class="headerlink" title="静态化"></a>静态化</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. 页面URL长度不超过255字节</span><br><span class="line">2. meta信息尽量完整，keywords5个左右</span><br><span class="line">3. 前端不要使用框架</span><br><span class="line">4. 图片alt属性添加信息</span><br><span class="line">5. 静态页面不要带动态值</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">language</span>=<span class="string">&quot;javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;url&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">url可以是js/php/图片等，返回的数据替换<span class="tag">&lt;<span class="name">script</span>&gt;</span>标签所在位置的内容！相当于简单的Ajax</span><br></pre></td></tr></table></figure>

<h2 id="常量相关"><a href="#常量相关" class="headerlink" title="常量相关"></a>常量相关</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/* 常量定义 */</span></span><br><span class="line">define(常量名, 常量值, [区分大小写参数])        <span class="regexp">//</span>true表示不区分/false表示区分大小写</span><br><span class="line">const 常量名 = 常量值    <span class="regexp">//</span> 新，建议</span><br><span class="line">常量名可以使用特殊字符</span><br><span class="line">constant(<span class="variable">$name</span>)        <span class="regexp">//</span> 获取常量名</span><br><span class="line">                       <span class="regexp">//</span> 例：echo constant(<span class="string">&#x27;-_-&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="regexp">/* 常量相关函数 */</span></span><br><span class="line">defined</span><br><span class="line">get_defined_constants</span><br><span class="line"></span><br><span class="line"><span class="regexp">/* 预定义常量 */</span></span><br><span class="line">__FILE__            所在文件的绝对路径</span><br><span class="line">__LINE__            文件中的当前行号</span><br><span class="line">__DIR__            文件所在目录</span><br><span class="line">__FUNCTION__        函数名称</span><br><span class="line">__CLASS__            类的名称</span><br><span class="line">__METHOD__        类的方法名</span><br><span class="line">__NAMESPACE__        当前命名空间的名称</span><br></pre></td></tr></table></figure>

<h2 id="变量生命周期"><a href="#变量生命周期" class="headerlink" title="变量生命周期"></a>变量生命周期</h2><ol>
<li>脚本结束时，全局变量消失</li>
<li>函数执行完时，局部变量消失</li>
<li>静态变量<br> static关键字<br> 静态变量仅在局部函数域中存在，但当程序执行离开此作用域时，其值并不丢失。<br> 静态变量仅会被初始化一次，其他局部变量每次被调用时都会被重新赋值。<br> static声明的静态变量的生命周期会被一直延续。</li>
</ol>
<h2 id="变量作用域"><a href="#变量作用域" class="headerlink" title="变量作用域"></a>变量作用域</h2><p>a. 全局变量和局部变量<br>    1) 作用域之间不重叠，即不同作用域的变量，之间不可访问<br>    2) 全局作用域  - 函数之外的区域<br>    3) 局部作用域  - 函数内的区域，每个函数都是一个独立的作用域</p>
<p>b. 超全局变量，既可以在全局也可在局部使用，仅能用系统自带的，均是数组变量。<br>    $GLOBALS    $_COOKIE    $_ENV       $_FILES $_GET<br>    $_POST      $_REQUEST   $_SERVER    $_SESSION<br>c. $GLOBALS<br>    1) 不能存在超全局变量，但可以有超全局的数据！<br>    2) 将需要的数据放到超全局变量的数组内，但统一使用$GLOBALS<br>    3) $GLOBALS 特征<br>        - 每个全局变量就是对应$GLOBALS内的一个元素！<br>            每当增加一个全局，则自动在$GLOBALS内增加一个同名元素！<br>            同理，每当增加元素，也会增加一个全局变量，一般在函数内增加<br>        - 做的任何修改，也会映射到另一个，包括更新和删除<br>            在函数内访问全局变量，只需使用$GLOBALS<br>        - 出现过的全局变量，就可以通过$GLOBALS这个数组取得<br>    4) PHP生命周期中，定义在函数体外部的所谓全局变量，函数内部是不能直接获得的<br>4) global关键字（不建议使用）<br>    将局部变量声明为同名全局变量的一个’引用’！相当于常量的引用传递<br>        global $var;    &#x2F;&#x2F; $var &#x3D; &amp;$GLOBALS[‘var’];<br>        不同于$GLOBALS！！！<br>    global在函数产生一个指向函数外部变量的别名变量，而不是真正的函数外部变量。<br>    $GLOBALS确确实实调用是外部的变量，函数内外会始终保持一致。<br>    global的作用是定义全局变量，但是这个全局变量不是应用于整个网站，而是应用于当前页面，包括include或require的所有文件。<br>d.<br>    1) 作用域只针对变量，对常量无效<br>    2) 被载入文件中定义的变量作用域取决于被载入的位置。<br>        函数外被载入就是全局，函数内被载入就是局部！</p>
<h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><p>解析错误、运行错误<br>&#x2F;&#x2F;标准错误：<br>    级别、信息、文件、行号<br>    trigger_error   触发一个用户自定义的error&#x2F;warning&#x2F;notice错误信息</p>
<p>&#x2F;&#x2F;php.ini配置，ini_set()<br>error_reporting         设置报告哪些级别的错误</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 错误报告：显示到页面</span></span><br><span class="line">    display_errors = <span class="keyword">On</span> 是否显示错误报告</span><br><span class="line"><span class="comment"># 错误日志：存放到文件</span></span><br><span class="line">    log_errors = <span class="keyword">on</span>     是否开启错误日志</span><br><span class="line">    error_log           发送错误信息到错误日志文件</span><br><span class="line">- 错误报告和错误日志可同时启用！</span><br></pre></td></tr></table></figure>

<p>自定义错误处理器<br>set_error_handler — 注册自定义错误处理器函数</p>
<ul>
<li>自定义处理器函数包含4个参数，分别是级别、信息、文件、行号</li>
<li>开启自定义错误处理器，则系统内置的错误报告和错误日志则不会执行。</li>
<li>自定义错误处理器函数返回false，则自定义函数结束后系统内置的会继续执行。</li>
<li>用户定义的错误级别(E_USER_ERROR)，可以被自定义的错误处理器所捕获并继续执行。系统内置的错误，则脚本会立即停止。<br>restore_error_handler — 恢复预定义错误处理器函数<br>error_get_last — 获取最近的错误信息</li>
</ul>
<p>&#x2F;&#x2F;错误处理函数<br>debug_backtrace 产生一条回溯跟踪<br>    返回数组，包含的键值：function, line, file, class, object, type, args<br>debug_print_backtrace 打印一条回溯</p>
<p>&#x2F;&#x2F;错误常量<br>手册&gt;错误处理</p>
<p>#生产模式<br>关闭错误报告，记录错误日志。<br>#开发模式<br>关闭错误日志，开启错误报告。</p>
<p>&#x2F;&#x2F;异常<br>面向对象语法中的错误处理方式。<br>一个异常就是一个包含当前异常信息的对象。<br>预定义异常类Exception及其扩展类。<br>#抛出异常<br>触发一个异常的错误<br>throw new UserException();<br>如果没有被捕获，则报告致命错误。<br>#监视异常<br>try {代码段}<br>#捕获异常<br>catch (UserException $obj) {代码段}<br>需要通过当前异常的类型匹配才可悲捕获。<br>#异常处理器<br>用以处理未被捕获的异常。<br>异常处理器函数与catch类似，参数也是含类型的对象。<br>set_exception_handler — 注册异常处理器函数<br>restore_exception_handler — 恢复预定义的异常处理器函数</p>
<p>#自定义异常<br>用户定义的异常类须继承自Exception类。</p>
<p>&#x2F;&#x2F;异常相关属性<br>protected string $message 异常消息内容<br>protected int $code 异常代码<br>protected string $file 抛出异常的文件名<br>protected int $line 抛出异常在该文件中的行号<br>&#x2F;&#x2F;异常相关方法<br>Exception::__construct — 异常构造函数<br>Exception::getMessage — 获取异常消息内容<br>Exception::getPrevious — 返回异常链中的前一个异常<br>Exception::getCode — 获取异常代码<br>Exception::getFile — 获取发生异常的程序文件名称<br>Exception::getLine — 获取发生异常的代码在文件中的行号<br>Exception::getTrace — 获取异常追踪信息<br>Exception::getTraceAsString — 获取字符串类型的异常追踪信息<br>Exception::__toString — 将异常对象转换为字符串<br>Exception::__clone — 异常克隆</p>
<h2 id="SERVER"><a href="#SERVER" class="headerlink" title="$_SERVER"></a>$_SERVER</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>示例URL：http:<span class="regexp">//</span>desktop<span class="regexp">/dir/</span>demo.php?a=aaa&amp;b=bbb</span><br><span class="line">PHP_SELF 当前执行脚本的文件名 <span class="regexp">//</span> <span class="regexp">/dir/</span>demo.php</span><br><span class="line">GATEWAY_INTERFACE 服务器使用的CGI规范的版本 <span class="regexp">//</span> CGI/<span class="number">1.1</span></span><br><span class="line">SERVER_ADDR 当前运行脚本所在的服务器的IP地址 <span class="regexp">//</span> <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line">SERVER_NAME 当前运行脚本所在的服务器的主机名 <span class="regexp">//</span> desktop</span><br><span class="line">SERVER_SOFTWARE 服务器标识字符串 <span class="regexp">//</span> Apache<span class="regexp">/2.2.22 (Win32) PHP/</span><span class="number">5.3</span>.<span class="number">13</span></span><br><span class="line">SERVER_PROTOCOL 请求页面时通信协议的名称和版本 <span class="regexp">//</span> HTTP/<span class="number">1.1</span></span><br><span class="line">REQUEST_METHOD 访问页面使用的请求方式 <span class="regexp">//</span> GET</span><br><span class="line">REQUEST_TIME 请求开始时的时间戳 <span class="regexp">//</span> <span class="number">1386032633</span></span><br><span class="line">QUERY_STRING 查询字符串(参数) <span class="regexp">//</span> a=aaa&amp;b=bbb</span><br><span class="line">DOCUMENT_ROOT 当前运行脚本所在的文档根目录 <span class="regexp">//</span> C:<span class="regexp">/Users/</span>Administrator/Desktop</span><br><span class="line">HTTP_ACCEPT 当前请求头中Accept:项的内容 <span class="regexp">//</span> text<span class="regexp">/html,application/</span>xhtml+xml,application<span class="regexp">/xml;q=0.9,*/</span>*;q=<span class="number">0.8</span></span><br><span class="line">HTTP_ACCEPT_CHARSET 当前请求头中Accept-Charset:项的内容 <span class="regexp">//</span> UTF-<span class="number">8</span>,*</span><br><span class="line">HTTP_ACCEPT_ENCODING 当前请求头中Accept-Encoding:项的内容 <span class="regexp">//</span> gzip, deflate</span><br><span class="line">HTTP_ACCEPT_LANGUAGE 当前请求头中Accept-Language:项的内容 <span class="regexp">//</span> zh-cn,zh;q=<span class="number">0.5</span></span><br><span class="line">HTTP_CONNECTION 当前请求头中Connection:项的内容 <span class="regexp">//</span> keep-alive</span><br><span class="line">HTTP_HOST 当前请求头中Host:项的内容 <span class="regexp">//</span> desktop</span><br><span class="line">HTTP_REFERER 引导用户代理到当前页的前一页的地址</span><br><span class="line">HTTP_USER_AGENT 当前请求头中User-Agent:项的内容 <span class="regexp">//</span> Mozilla<span class="regexp">/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/</span><span class="number">20100101</span> Firefox/<span class="number">4.0</span>.<span class="number">1</span></span><br><span class="line">HTTPS 如果脚本是通过HTTPS协议被访问，则被设为一个非空的值</span><br><span class="line">REMOTE_ADDR 浏览当前页面的用户的IP地址 <span class="regexp">//</span> <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line">REMOTE_HOST 浏览当前页面的用户的主机名</span><br><span class="line">REMOTE_PORT 用户机器上连接到Web服务器所使用的端口号 <span class="regexp">//</span> <span class="number">49197</span></span><br><span class="line">REMOTE_USER 经验证的用户</span><br><span class="line">REDIRECT_REMOTE_USER 验证的用户，如果请求已在内部重定向</span><br><span class="line">SCRIPT_FILENAME 当前执行脚本的绝对路径 <span class="regexp">//</span> C:<span class="regexp">/Users/</span>Administrator<span class="regexp">/Desktop/</span>dir/demo.php</span><br><span class="line">SERVER_ADMIN 该值指明了Apache服务器配置文件中的SERVER_ADMIN参数 <span class="regexp">//</span>admin@shocker.com</span><br><span class="line">SERVER_PORT Web服务器使用的端口 <span class="regexp">//</span> <span class="number">80</span></span><br><span class="line">SERVER_SIGNATURE 包含了服务器版本和虚拟主机名的字符串</span><br><span class="line">PATH_TRANSLATED 当前脚本所在文件系统（非文档根目录）的基本路径</span><br><span class="line">SCRIPT_NAME 当前脚本的路径 <span class="regexp">//</span> <span class="regexp">/dir/</span>demo.php</span><br><span class="line">REQUEST_URI URI用来指定要访问的页面 <span class="regexp">//</span> <span class="regexp">/dir/</span>demo.php?a=aaa&amp;b=bbb</span><br><span class="line">PHP_AUTH_DIGEST 客户端发送的“Authorization” HTTP头内容</span><br><span class="line">PHP_AUTH_PW 用户输入的密码</span><br><span class="line">AUTH_TYPE 认证的类型</span><br><span class="line">PATH_INFO 包含由客户端提供的、跟在真实脚本名称之后并且在查询语句（query string）之前的路径信息</span><br><span class="line">ORIG_PATH_INFO 在被PHP处理之前，“PATH_INFO”的原始版本 </span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">version_compare</span><span class="params">(str <span class="variable">$ver1</span>, str <span class="variable">$ver2</span> [,str <span class="variable">$operator</span>])</span></span>  <span class="comment">//比较版本号</span></span><br><span class="line">    <span class="variable">$operator</span>表示操作符，可选：&lt;, lt, &lt;=, le, &gt;, gt, &gt;=, ge, ==, =, eq, !=, &lt;&gt;, ne</span><br><span class="line">    如果省略<span class="variable">$operator</span>，返回两个版本号的差值。</span><br><span class="line">符号@    用于抑制系统运行错误的报告显示</span><br><span class="line">memory_get_usage    <span class="comment">//获取当期内存使用情况</span></span><br><span class="line">memory_get_peak_usage   <span class="comment">//获取内存使用的峰值</span></span><br><span class="line">getrusage   <span class="comment">//获取CPU使用情况(Windows不可用)</span></span><br><span class="line"><span class="function"><span class="title">uniqid</span><span class="params">([<span class="variable">$prefix</span>])</span></span>   <span class="comment">//获取一个带前缀、基于当前时间微秒数的唯一ID</span></span><br><span class="line"><span class="function"><span class="title">highlight_string</span><span class="params">(<span class="variable">$str</span> [,<span class="variable">$return</span>])</span></span>   <span class="comment">//字符串的语法高亮</span></span><br><span class="line">    <span class="variable">$return</span>：设置为TRUE，高亮后的代码不会被打印输出，而是以字符串的形式返回。高亮成功返回TRUE，否则返回FALSE。</span><br><span class="line"><span class="function"><span class="title">highlight_file</span><span class="params">(<span class="variable">$file</span> [,<span class="variable">$return</span>])</span></span>    <span class="comment">//语法高亮一个文件</span></span><br><span class="line">__halt_compiler     <span class="comment">//中断编译器的执行</span></span><br><span class="line">get_browser     <span class="comment">//获取浏览器具有的功能</span></span><br><span class="line">    get_browser (<span class="selector-attr">[ string $user_agent [, bool $return_array = false ]</span>] )</span><br><span class="line">    如果设置为 TRUE，该函数会返回一个 array，而不是 <span class="selector-tag">object</span></span><br><span class="line"><span class="function"><span class="title">eval</span><span class="params">(<span class="variable">$code</span>)</span></span> <span class="comment">//把字符串作为PHP代码执行</span></span><br><span class="line"><span class="function"><span class="title">gzcompress</span><span class="params">(<span class="variable">$str</span> [,<span class="variable">$level</span>=-<span class="number">1</span>])</span></span>   <span class="comment">//压缩字符串</span></span><br><span class="line"><span class="function"><span class="title">gzuncompress</span><span class="params">(<span class="variable">$str</span>)</span></span>  <span class="comment">//解压缩字符串</span></span><br><span class="line"><span class="function"><span class="title">gzencode</span><span class="params">(<span class="variable">$str</span> [,<span class="variable">$level</span>=-<span class="number">1</span>])</span></span>   <span class="comment">//压缩字符串</span></span><br><span class="line"><span class="function"><span class="title">gzdecode</span><span class="params">(<span class="variable">$str</span>)</span></span>  <span class="comment">//解压缩字符串</span></span><br><span class="line"><span class="function"><span class="title">ignore_user_abort</span><span class="params">(<span class="variable">$bool</span>)</span></span> <span class="comment">//设置客户端断开连接时是否中断脚本的执行</span></span><br></pre></td></tr></table></figure>

<h1 id="PHP函数"><a href="#PHP函数" class="headerlink" title="PHP函数"></a>PHP函数</h1><h2 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">addslashes(<span class="variable">$str</span>)    <span class="regexp">//</span>使用反斜线转移字符串</span><br><span class="line">stripcslashes(<span class="variable">$str</span>) <span class="regexp">//</span>反引用一个使用addcslashes转义的字符串</span><br><span class="line">stripslashes(<span class="variable">$str</span>)  <span class="regexp">//</span>反引用一个引用字符串</span><br><span class="line">chr(<span class="variable">$ascii</span>) <span class="regexp">//</span>返回ASCII码的字符</span><br><span class="line">ord(<span class="variable">$char</span>)  <span class="regexp">//</span>返回字符的ASCII码</span><br><span class="line">substr_count(<span class="variable">$haystack</span>, <span class="variable">$needle</span>)    <span class="regexp">//</span>计算子串出现的次数</span><br><span class="line">count_chars(<span class="variable">$str</span> [,<span class="variable">$mode</span>])  统计每个字节值出现的次数</span><br><span class="line">    <span class="regexp">//</span><span class="number">0</span> - 以所有的每个字节值作为键名，出现次数作为值的数组。  </span><br><span class="line">    <span class="regexp">//</span><span class="number">1</span> - 与<span class="number">0</span>相同，但只列出出现次数大于零的字节值。  </span><br><span class="line">    <span class="regexp">//</span><span class="number">2</span> - 与<span class="number">0</span>相同，但只列出出现次数等于零的字节值。  </span><br><span class="line">    <span class="regexp">//</span><span class="number">3</span> - 返回由所有使用了的字节值组成的字符串。  </span><br><span class="line">    <span class="regexp">//</span><span class="number">4</span> - 返回由所有未使用的字节值组成的字符串。 </span><br><span class="line">crypt(<span class="variable">$str</span>, [<span class="variable">$salt</span>])    <span class="regexp">//</span>单向字符串散列</span><br><span class="line">str_split(<span class="variable">$str</span> [,<span class="variable">$len</span>]) <span class="regexp">//</span>将字符串按长度分割为数组</span><br><span class="line">explode(<span class="variable">$separ</span>, <span class="variable">$str</span>)   <span class="regexp">//</span>使用一个字符串分割另一个字符串</span><br><span class="line">implode([<span class="variable">$glue</span>,] <span class="variable">$arr</span>)  <span class="regexp">//</span>将数组元素的值根据<span class="variable">$glue</span>连接成字符串</span><br><span class="line">chunk_split(<span class="variable">$str</span> [,<span class="variable">$len</span> [,<span class="variable">$end</span>]])   <span class="regexp">//</span>将字符串分割成小块</span><br><span class="line">    <span class="variable">$len</span>：每段字符串的长度，<span class="variable">$end</span>：每段字符串末尾加的字符串(如<span class="string">&quot;\r\n&quot;</span>)</span><br><span class="line">html_entity_decode(<span class="variable">$str</span> [,<span class="variable">$flags</span> [,<span class="variable">$encoding</span>]]) <span class="regexp">//</span>将HTML实体转成字符信息</span><br><span class="line">htmlentities(<span class="variable">$str</span> [,<span class="variable">$flags</span> [,<span class="variable">$encoding</span>]])   <span class="regexp">//</span>将字符信息转成HTML实体</span><br><span class="line">htmlspecialchars_decode(<span class="variable">$str</span>)   <span class="regexp">//</span>将特殊HTML实体转成字符信息</span><br><span class="line">htmlspecialchars(<span class="variable">$str</span> [,<span class="variable">$flags</span> [,<span class="variable">$encoding</span>]])   <span class="regexp">//</span>将字符信息转成特殊HTML实体</span><br><span class="line">lcfirst(<span class="variable">$str</span>)   <span class="regexp">//</span>将字符串首字母转成小写</span><br><span class="line">ucfirst(<span class="variable">$str</span>)   <span class="regexp">//</span>将字符串首字母转成大写</span><br><span class="line">ucwords(<span class="variable">$str</span>)   <span class="regexp">//</span>将字符串中每个单词的首字母转换为大写</span><br><span class="line">strtolower(<span class="variable">$str</span>)    <span class="regexp">//</span>将字符串转化为小写</span><br><span class="line">strtoupper(<span class="variable">$str</span>)    <span class="regexp">//</span>将字符串转化为大写</span><br><span class="line">trim(<span class="variable">$str</span> [,<span class="variable">$charlist</span>]) <span class="regexp">//</span>去除字符串首尾处的空白字符（或者其他字符）</span><br><span class="line">ltrim(<span class="variable">$str</span> [,<span class="variable">$charlist</span>])    <span class="regexp">//</span>去除字符串首段的空白字符（或者其他字符）</span><br><span class="line">rtrim(<span class="variable">$str</span> [,<span class="variable">$charlist</span>])    <span class="regexp">//</span>去除字符串末端的空白字符（或者其他字符）</span><br><span class="line">md5_file(<span class="variable">$file</span>) <span class="regexp">//</span>计算指定文件的MD5散列值</span><br><span class="line">md5(<span class="variable">$str</span>)   <span class="regexp">//</span>计算字符串的MD5散列值</span><br><span class="line">money_format(<span class="variable">$format</span>, <span class="variable">$num</span>) <span class="regexp">//</span>将数字格式化为货币形式</span><br><span class="line">number_format(<span class="variable">$num</span>) <span class="regexp">//</span>格式化数字</span><br><span class="line">nl2br(<span class="variable">$str</span>) <span class="regexp">//</span>在字符串所有新行之前插入HTML换行标记&lt;br /&gt;</span><br><span class="line">parse_str(<span class="variable">$str</span>, [<span class="variable">$arr</span>]) <span class="regexp">//</span>解析字符串</span><br><span class="line">print(<span class="variable">$str</span>) <span class="regexp">//</span>输出字符串</span><br><span class="line">printf      <span class="regexp">//</span>输出格式化字符串</span><br><span class="line">sprintf(<span class="variable">$format</span> [,<span class="variable">$args</span>...])    <span class="regexp">//</span>格式化字符串</span><br><span class="line">sha1_file   <span class="regexp">//</span>计算文件的sha1散列值</span><br><span class="line">sha1        <span class="regexp">//</span>计算字符串的sha1散列值</span><br><span class="line">similar_text(<span class="variable">$first</span>, <span class="variable">$second</span> [,<span class="variable">$percent</span>])   <span class="regexp">//</span>计算两个字符串的相似度</span><br><span class="line">    返回在两个字符串中匹配字符的数目，<span class="variable">$percent</span>存储相似度百分比</span><br><span class="line">str_replace(<span class="variable">$search</span>, <span class="variable">$replace</span>, <span class="variable">$str</span> [,<span class="variable">$count</span> [,<span class="variable">$type</span>]])  <span class="regexp">//</span>子字符串替换</span><br><span class="line">str_ireplace    <span class="regexp">//</span>字符串替换(忽略大小写)</span><br><span class="line">str_pad(<span class="variable">$str</span>, <span class="variable">$len</span> [,<span class="variable">$pad</span> [,<span class="variable">$type</span>]])  <span class="regexp">//</span>使用另一个字符串填充字符串为指定长度</span><br><span class="line">    <span class="variable">$type</span>：在何处填充。STR_PAD_RIGHT，STR_PAD_LEFT 或 STR_PAD_BOTH</span><br><span class="line">str_repeat(<span class="variable">$str</span>, <span class="variable">$num</span>)  <span class="regexp">//</span>重复一个字符串</span><br><span class="line">str_shuffle(<span class="variable">$str</span>)   <span class="regexp">//</span>随机打乱一个字符串</span><br><span class="line">str_word_count(<span class="variable">$str</span> [,<span class="variable">$format</span> [,<span class="variable">$charlist</span>]])    <span class="regexp">//</span>返回字符串中单词的使用情况</span><br><span class="line">strcasecmp(<span class="variable">$str1</span>, <span class="variable">$str2</span>)    <span class="regexp">//</span>二进制安全比较字符串（不区分大小写）</span><br><span class="line">    如果str1小于str2，返回负数；如果str1大于str2，返回正数；二者相等则返回<span class="number">0</span>。</span><br><span class="line">strcmp(<span class="variable">$str1</span>, <span class="variable">$str2</span>)    <span class="regexp">//</span>二进制安全字符串比较</span><br><span class="line">strcoll(<span class="variable">$str1</span>, <span class="variable">$str1</span>)   <span class="regexp">//</span>基于区域设置的字符串比较(区分大小写，非二进制安全)</span><br><span class="line">strcspn(<span class="variable">$str1</span>, <span class="variable">$str1</span> [,<span class="variable">$start</span> [,<span class="variable">$len</span>]])   <span class="regexp">//</span>获取不匹配遮罩的起始子字符串的长度</span><br><span class="line">strip_tags(<span class="variable">$str</span>)    <span class="regexp">//</span>从字符串中去除HTML和PHP标记</span><br><span class="line">strpos(<span class="variable">$haystack</span>, <span class="variable">$needle</span> [,<span class="variable">$offset</span>])   <span class="regexp">//</span>查找字符串首次出现的位置</span><br><span class="line">stripos(<span class="variable">$haystack</span>, <span class="variable">$needle</span> [,<span class="variable">$offset</span>])    <span class="regexp">//</span>查找字符串首次出现的位置（不区分大小写）</span><br><span class="line">strripos(<span class="variable">$haystack</span>, <span class="variable">$needle</span> [,<span class="variable">$offset</span>])   <span class="regexp">//</span>计算指定字符串在目标字符串中最后一次出现的位置（不区分大小写）</span><br><span class="line">strrpos(<span class="variable">$haystack</span>, <span class="variable">$needle</span> [,<span class="variable">$offset</span>])   <span class="regexp">//</span>计算指定字符串在目标字符串中最后一次出现的位置</span><br><span class="line">strlen(<span class="variable">$str</span>)    <span class="regexp">//</span>获取字符串长度</span><br><span class="line">strpbrk(<span class="variable">$haystack</span>, <span class="variable">$str</span>)    <span class="regexp">//</span>在字符串中查找一组字符的任何一个字符</span><br><span class="line">strrev(<span class="variable">$str</span>)    <span class="regexp">//</span>反转字符串</span><br><span class="line">    join(<span class="string">&#x27;&#x27;</span>, array_reverse(preg_split(<span class="string">&quot;//u&quot;</span>, <span class="variable">$str</span>))); <span class="regexp">//</span>实现对UTF-<span class="number">8</span>字符串的反转</span><br><span class="line">strspn<span class="variable">$subject</span>, <span class="variable">$mask</span>)  <span class="regexp">//</span>计算字符串中全部字符都存在于指定字符集合中的第一段子串的长度。</span><br><span class="line">strstr(<span class="variable">$haystack</span>, <span class="variable">$needle</span>)   <span class="regexp">//</span>查找字符串的首次出现</span><br><span class="line">stristr(<span class="variable">$haystack</span>, <span class="variable">$needle</span>)   <span class="regexp">//</span>查找字符串的首次出现(不区分大小写)</span><br><span class="line">strrchr(<span class="variable">$haystack</span>, <span class="variable">$needle</span>) <span class="regexp">//</span>查找指定字符在字符串中的最后一次出现</span><br><span class="line">strtok(<span class="variable">$str</span>, <span class="variable">$token</span>)    <span class="regexp">//</span>标记分割字符串</span><br><span class="line">substr_compare(<span class="variable">$main_str</span>, <span class="variable">$str</span>, <span class="variable">$offset</span> [,<span class="variable">$len</span>) <span class="regexp">//</span>二进制安全比较字符串（从偏移位置比较指定长度）</span><br><span class="line">substr_replace<span class="variable">$str</span>, <span class="variable">$replace</span>, <span class="variable">$start</span> [,<span class="variable">$len</span>]    <span class="regexp">//</span>替换字符串的子串</span><br><span class="line">strtr(<span class="variable">$str</span>, <span class="variable">$from</span>, <span class="variable">$to</span>) <span class="regexp">//</span>转换指定字符</span><br><span class="line">substr(<span class="variable">$str</span>, <span class="variable">$start</span> [,<span class="variable">$len</span>])    <span class="regexp">//</span>返回字符串的子串</span><br><span class="line">vfprintf<span class="variable">$handle</span>, <span class="variable">$format</span>, <span class="variable">$args</span>)    <span class="regexp">//</span>将格式化字符串写入流</span><br><span class="line">vprintf(<span class="variable">$format</span>, <span class="variable">$args</span>) <span class="regexp">//</span>输出格式化字符串</span><br><span class="line">vsprintf(<span class="variable">$format</span>, <span class="variable">$args</span>) <span class="regexp">//</span>返回格式化字符串</span><br><span class="line">wordwrap(<span class="variable">$str</span> [,<span class="variable">$width</span>=<span class="number">75</span> [,<span class="variable">$break</span>=<span class="string">&#x27;\n&#x27;</span>]])  <span class="regexp">//</span>打断字符串为指定数量的字串</span><br><span class="line"></span><br><span class="line">crc32(<span class="variable">$str</span>) <span class="regexp">//</span>计算一个字符串的crc32多项式</span><br><span class="line">    crc32算法[循环冗余校验算法]</span><br><span class="line">    生成str的<span class="number">32</span>位循环冗余校验码多项式。将数据转换成整数。</span><br></pre></td></tr></table></figure>

<h2 id="Math函数"><a href="#Math函数" class="headerlink" title="Math函数"></a>Math函数</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Math函数 */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">base_convert</span><span class="params">(<span class="variable">$number</span>, <span class="variable">$frombase</span>, <span class="variable">$tobase</span>)</span></span>   <span class="comment">//在任意进制之间转换数字</span></span><br><span class="line"><span class="function"><span class="title">ceil</span><span class="params">(<span class="variable">$float</span>)</span></span>    <span class="comment">//向上取整</span></span><br><span class="line"><span class="function"><span class="title">floor</span><span class="params">(<span class="variable">$float</span>)</span></span>   <span class="comment">//向下取整</span></span><br><span class="line"><span class="function"><span class="title">exp</span><span class="params">(<span class="variable">$float</span>)</span></span> <span class="comment">//计算e的指数</span></span><br><span class="line"><span class="function"><span class="title">hypot</span><span class="params">(<span class="variable">$x</span>, <span class="variable">$y</span>)</span></span>   <span class="comment">//计算直角三角形的斜边长</span></span><br><span class="line"><span class="function"><span class="title">is_nan</span><span class="params">(<span class="variable">$val</span>)</span></span>    <span class="comment">//判断是否为合法数值</span></span><br><span class="line"><span class="function"><span class="title">log</span><span class="params">(<span class="variable">$arg</span> [,<span class="variable">$base</span>=e])</span></span>  <span class="comment">//自然对数</span></span><br><span class="line"><span class="function"><span class="title">max</span><span class="params">(<span class="variable">$num1</span>, <span class="variable">$num2</span>, ...)</span></span>  <span class="comment">//找出最大值</span></span><br><span class="line">    <span class="built_in">max</span>(<span class="variable">$arr</span>)   <span class="comment">//找出数组中的最大值</span></span><br><span class="line"><span class="function"><span class="title">min</span><span class="params">(<span class="variable">$num1</span>, <span class="variable">$num2</span>, ...)</span></span>  <span class="comment">//找出最小值</span></span><br><span class="line"><span class="function"><span class="title">rand</span><span class="params">([<span class="variable">$min</span>], <span class="variable">$max</span>)</span></span>  <span class="comment">//产生一个随机整数</span></span><br><span class="line"><span class="function"><span class="title">srand</span><span class="params">([<span class="variable">$seed</span>])</span></span>  <span class="comment">//播下随机数发生器种子</span></span><br><span class="line"><span class="function"><span class="title">mt_rand</span><span class="params">([<span class="variable">$min</span>], <span class="variable">$max</span>)</span></span>   <span class="comment">//生成更好的随机数</span></span><br><span class="line"><span class="function"><span class="title">mt_srand</span><span class="params">(<span class="variable">$seed</span>)</span></span>     <span class="comment">//播下一个更好的随机数发生器种子</span></span><br><span class="line"><span class="function"><span class="title">pi</span><span class="params">()</span></span>    <span class="comment">//得到圆周率值</span></span><br><span class="line"><span class="function"><span class="title">pow</span><span class="params">(<span class="variable">$base</span>, <span class="variable">$exp</span>)</span></span>    <span class="comment">//指数表达式</span></span><br><span class="line"><span class="function"><span class="title">sqrt</span><span class="params">(<span class="variable">$float</span>)</span></span>    <span class="comment">//求平方根</span></span><br><span class="line"><span class="function"><span class="title">deg2rad</span><span class="params">(<span class="variable">$float</span>)</span></span> <span class="comment">//将角度转换为弧度</span></span><br><span class="line"><span class="function"><span class="title">rad2deg</span><span class="params">(<span class="variable">$float</span>)</span></span> <span class="comment">//将弧度数转换为相应的角度数</span></span><br><span class="line"><span class="function"><span class="title">round</span><span class="params">(<span class="variable">$val</span> [,<span class="variable">$pre</span>=<span class="number">0</span>])</span></span> <span class="comment">//对浮点数进行四舍五入</span></span><br><span class="line"><span class="function"><span class="title">fmod</span><span class="params">(<span class="variable">$x</span>, <span class="variable">$y</span>)</span></span> <span class="comment">//返回除法的浮点数余数</span></span><br></pre></td></tr></table></figure>

<h2 id="PHP运行环境检测函数"><a href="#PHP运行环境检测函数" class="headerlink" title="PHP运行环境检测函数"></a>PHP运行环境检测函数</h2><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">php_sapi_name</span>() <span class="comment">//返回一个PHP与WEB服务器接口类型的小写字符串</span></span><br><span class="line">该函数返回值与常量PHP_SAPI一致！</span><br><span class="line">接口类型：<span class="built_in">SAPI</span>(the Server API, SAPI)</span><br><span class="line">可能值：aolserver、apache、apache2filter、apache2handler、caudium、cgi、cgi-fcgi、cli、 continuity、embed、isapi、litespeed milter、nsapi、phttpd、pi3web、roxen、thttpd、tux、webjames</span><br></pre></td></tr></table></figure>

<h2 id="fileinfo"><a href="#fileinfo" class="headerlink" title="fileinfo"></a><code>fileinfo</code></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">获取/设置文件信息</span><br><span class="line"><span class="comment">#扩展Fileinfo，配置php.ini</span></span><br><span class="line"><span class="comment">#extension=php_fileinfo.dll</span></span><br><span class="line">finfo_open([<span class="variable">$opt</span>]) <span class="regexp">//</span>创建一个文件信息资源</span><br><span class="line">finfo_file(<span class="variable">$finfo</span>, <span class="variable">$file</span> [,<span class="variable">$opt</span>]) <span class="regexp">//</span>获取文件信息</span><br><span class="line">finfo_set_flags(<span class="variable">$finfo</span>, <span class="variable">$opt</span>) <span class="regexp">//</span>设置文件信息项</span><br><span class="line">finfo_close(<span class="variable">$finfo</span>) <span class="regexp">//</span>关闭文件信息资源</span><br><span class="line"></span><br><span class="line">mime_content_type(<span class="variable">$file</span>) <span class="regexp">//</span>获取文件的MIME类型</span><br><span class="line"></span><br><span class="line"><span class="variable">$opt</span>参数选项：</span><br><span class="line">FILEINFO_MIME_ENCODING 文件编码类型</span><br><span class="line">FILEINFO_MIME_TYPE 文件MIME类型</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>目录</span><br><span class="line">chdir(<span class="variable">$dir</span>)         改变当前目录</span><br><span class="line">chroot(<span class="variable">$dir</span>)        将当前目录改变为当前进程的根目录</span><br><span class="line">closedir(<span class="variable">$handle</span>)   关闭目录句柄</span><br><span class="line">dir(<span class="variable">$dir</span>)           返回一个目录的实例对象</span><br><span class="line">getcwd()            取得当前工作目录</span><br><span class="line">opendir(<span class="variable">$path</span>)      打开目录句柄</span><br><span class="line">readdir(<span class="variable">$handle</span>)    从目录句柄中读取条目</span><br><span class="line">rewinddir(<span class="variable">$handle</span>)  倒回目录句柄</span><br><span class="line">scandir(<span class="variable">$dir</span> [,<span class="variable">$order</span>])     列出指定路径中的文件和目录</span><br><span class="line">glob(<span class="variable">$pattern</span> [,<span class="variable">$flags</span>])    寻找与模式匹配的文件路径</span><br><span class="line">    <span class="variable">$flags</span>：</span><br><span class="line">        GLOB_MARK - 在每个返回的项目中加一个斜线  </span><br><span class="line">        GLOB_NOSORT - 按照文件在目录中出现的原始顺序返回（不排序）  </span><br><span class="line">        GLOB_NOCHECK - 如果没有文件匹配则返回用于搜索的模式  </span><br><span class="line">        GLOB_NOESCAPE - 反斜线不转义元字符  </span><br><span class="line">        GLOB_BRACE - 扩充 &#123;a,b,c&#125; 来匹配 <span class="string">&#x27;a&#x27;</span>，<span class="string">&#x27;b&#x27;</span> 或 <span class="string">&#x27;c&#x27;</span>  </span><br><span class="line">        GLOB_ONLYDIR - 仅返回与模式匹配的目录项 </span><br><span class="line">    查找多种后缀名文件：glob(<span class="string">&#x27;*.&#123;php,txt&#125;&#x27;</span>, GLOB_BRACE);</span><br></pre></td></tr></table></figure>

<h2 id="mbstring-多字节字符串"><a href="#mbstring-多字节字符串" class="headerlink" title="mbstring(多字节字符串)"></a>mbstring(多字节字符串)</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//需开启mbstring扩展</span></span><br><span class="line"><span class="function"><span class="title">mb_strimwidth</span><span class="params">(<span class="variable">$str</span>, <span class="variable">$start</span>, <span class="variable">$width</span> [,<span class="variable">$trim</span> [,<span class="variable">$encoding</span>]])</span></span>   <span class="comment">//保留指定的子串(并补充)</span></span><br><span class="line"><span class="function"><span class="title">mb_stripos</span><span class="params">(<span class="variable">$str</span>, <span class="variable">$needle</span> [,<span class="variable">$offset</span> [,<span class="variable">$encoding</span>]])</span></span>   <span class="comment">//查找子串首次出现的位置(忽略大小写)</span></span><br><span class="line"><span class="function"><span class="title">mb_strpos</span><span class="params">(<span class="variable">$str</span>, <span class="variable">$needle</span> [,<span class="variable">$offset</span> [,<span class="variable">$encoding</span>]])</span></span>   <span class="comment">//查找子串首次出现的位置</span></span><br><span class="line"><span class="function"><span class="title">mb_strripos</span><span class="params">(<span class="variable">$str</span>, <span class="variable">$needle</span> [,<span class="variable">$offset</span> [,<span class="variable">$encoding</span>]])</span></span>   <span class="comment">//查找子串最后一次出现的位置(忽略大小写)</span></span><br><span class="line"><span class="function"><span class="title">mb_strrpos</span><span class="params">(<span class="variable">$str</span>, <span class="variable">$needle</span> [,<span class="variable">$offset</span> [,<span class="variable">$encoding</span>]])</span></span>   <span class="comment">//查找子串最后一次出现的位置</span></span><br><span class="line"><span class="function"><span class="title">mb_strstr</span><span class="params">(<span class="variable">$str</span>, <span class="variable">$needle</span> [,<span class="variable">$before</span> [,<span class="variable">$encoding</span>]])</span></span>    <span class="comment">//返回子串首次出现位置之后(前)的字符串</span></span><br><span class="line"><span class="function"><span class="title">mb_stristr</span><span class="params">(<span class="variable">$str</span>, <span class="variable">$needle</span> [,<span class="variable">$before</span> [,<span class="variable">$encoding</span>]])</span></span>    <span class="comment">//返回子串首次出现位置之后(前)的字符串(忽略大小写)</span></span><br><span class="line"><span class="function"><span class="title">mb_strrchr</span><span class="params">(<span class="variable">$str</span>, <span class="variable">$needle</span> [,<span class="variable">$before</span> [,<span class="variable">$encoding</span>]])</span></span>    <span class="comment">//返回字符最后一次出现位置之后(前)的字符串</span></span><br><span class="line"><span class="function"><span class="title">mb_strrichr</span><span class="params">(<span class="variable">$str</span>, <span class="variable">$needle</span> [,<span class="variable">$before</span> [,<span class="variable">$encoding</span>]])</span></span>    <span class="comment">//返回字符最后一次出现位置之后(前)的字符串(忽略大小写)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">mb_strtoupper</span><span class="params">(<span class="variable">$str</span> [,<span class="variable">$encoding</span>])</span></span>    <span class="comment">//转换成大写</span></span><br><span class="line"><span class="function"><span class="title">mb_strtolower</span><span class="params">(<span class="variable">$str</span> [,<span class="variable">$encoding</span>])</span></span>    <span class="comment">//转换成小写</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">mb_strlen</span><span class="params">(<span class="variable">$str</span> [,<span class="variable">$encoding</span>])</span></span>    <span class="comment">//获取字符串长度</span></span><br><span class="line"><span class="function"><span class="title">mb_split</span><span class="params">(<span class="variable">$pattern</span>, <span class="variable">$str</span> [,<span class="variable">$limit</span>])</span></span>  <span class="comment">//将字符串分割成数组</span></span><br><span class="line"><span class="function"><span class="title">mb_substr</span><span class="params">(<span class="variable">$str</span>, <span class="variable">$start</span> [,<span class="variable">$len</span> [,<span class="variable">$encoding</span>]])</span></span>    <span class="comment">//获取字符串的子串</span></span><br><span class="line"><span class="function"><span class="title">mb_strcut</span><span class="params">(<span class="variable">$str</span>, <span class="variable">$start</span> [,<span class="variable">$len</span> [,<span class="variable">$encoding</span>]])</span></span>    <span class="comment">//获取字符串的子串</span></span><br><span class="line"><span class="function"><span class="title">mb_strwidth</span><span class="params">(<span class="variable">$str</span> [,<span class="variable">$encoding</span>])</span></span>  <span class="comment">//获取字符串的宽度</span></span><br><span class="line"><span class="function"><span class="title">mb_substr_count</span><span class="params">(<span class="variable">$str</span>, <span class="variable">$needle</span> [,<span class="variable">$encoding</span>])</span></span> <span class="comment">//子串在字符串中出现的次数</span></span><br></pre></td></tr></table></figure>

<h2 id="ob缓存-输出控制"><a href="#ob缓存-输出控制" class="headerlink" title="ob缓存(输出控制)"></a>ob缓存(输出控制)</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Output Buffering</span><br><span class="line">ob_start()  <span class="regexp">//</span>打开一个输出缓冲区，所有的输出信息不再直接发送到浏览器，而是保存在输出缓冲区里面。</span><br><span class="line">    ob_start(<span class="string">&#x27;ob_gzhandler&#x27;</span>); <span class="regexp">//</span>将gz编码的数据发送到支持压缩页面的浏览器</span><br><span class="line"></span><br><span class="line">ob_clean();            <span class="regexp">//</span>删除内部缓冲区的内容，不关闭缓冲区(不输出)。</span><br><span class="line">ob_end_clean();        <span class="regexp">//</span>删除内部缓冲区的内容，关闭缓冲区(不输出)。</span><br><span class="line">ob_get_clean();        <span class="regexp">//</span>返回内部缓冲区的内容，关闭缓冲区。相当于执行ob_get_contents()与ob_end_clean()</span><br><span class="line">ob_flush();            <span class="regexp">//</span>发送内部缓冲区的内容到浏览器，删除缓冲区的内容，不关闭缓冲区。</span><br><span class="line">ob_end_flush();        <span class="regexp">//</span>发送内部缓冲区的内容到浏览器，删除缓冲区的内容，关闭缓冲区。</span><br><span class="line">ob_get_flush();        <span class="regexp">//</span>返回内部缓冲区的内容，并关闭缓冲区，再释放缓冲区的内容。相当于ob_end_flush()并返回缓冲区内容。</span><br><span class="line">flush();               <span class="regexp">//</span>将当前为止程序的所有输出发送到用户的浏览器</span><br><span class="line"></span><br><span class="line">ob_get_contents();     <span class="regexp">//</span>返回缓冲区的内容，不输出。</span><br><span class="line">ob_get_length();       <span class="regexp">//</span>返回内部缓冲区的长度，如果缓冲区未被激活，该函数返回FALSE。</span><br><span class="line">ob_get_level();        <span class="regexp">//</span>Return the nesting level of the output buffering mechanism.</span><br><span class="line">ob_get_status();       <span class="regexp">//</span>获取ob状态信息</span><br><span class="line"></span><br><span class="line">ob_implicit_flush();   <span class="regexp">//</span>打开或关闭绝对刷新，默认为关闭，打开后ob_implicit_flush(true)，所谓绝对刷新，即当有输出语句(e.g: echo)被执行时，便把输出直接发送到浏览器，而不再需要调用flush()或等到脚本结束时才输出。</span><br><span class="line"></span><br><span class="line">ob_gzhandler               <span class="regexp">//</span>ob_start回调函数，用gzip压缩缓冲区的内容。</span><br><span class="line">ob_list_handlers           <span class="regexp">//</span>List all output handlers <span class="keyword">in</span> use</span><br><span class="line">output_add_rewrite_var     <span class="regexp">//</span>Add URL rewriter values</span><br><span class="line">output_reset_rewrite_vars  <span class="regexp">//</span>Reset URL rewriter values</span><br><span class="line"></span><br><span class="line">这些函数的行为受php_ini设置的影响：</span><br><span class="line">output_buffering       <span class="regexp">//</span>该值为ON时，将在所有脚本中使用输出控制；若该值为一个数字，则代表缓冲区的最大字节限制，当缓存内容达到该上限时将会自动向浏览器输出当前的缓冲区里的内容。</span><br><span class="line">output_handler         <span class="regexp">//</span>该选项可将脚本所有的输出，重定向到一个函数。例如，将 output_handler 设置为 mb_output_handler() 时，字符的编码将被修改为指定的编码。设置的任何处理函数，将自动的处理输出缓冲。</span><br><span class="line">implicit_flush         <span class="regexp">//</span>作用同ob_implicit_flush，默认为Off。</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>ob缓存作用</span><br><span class="line"><span class="number">1</span>)防止在浏览器有输出之后再使用setcookie()、header()或session_start()等发送头文件的函数造成的错误。其实这样的用法少用为好，养成良好的代码习惯。</span><br><span class="line"><span class="number">2</span>)捕捉对一些不可获取的函数的输出，比如phpinfo()会输出一大堆的HTML，但是我们无法用一个变量例如<span class="variable">$info</span>=phpinfo();来捕捉，这时候ob就管用了。</span><br><span class="line"><span class="number">3</span>)对输出的内容进行处理，例如进行gzip压缩，例如进行简繁转换，例如进行一些字符串替换。</span><br><span class="line"><span class="number">4</span>)生成静态文件，其实就是捕捉整页的输出，然后存成文件。经常在生成HTML，或者整页缓存中使用。</span><br></pre></td></tr></table></figure>

<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a><code>Cookie</code></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">cookie是一种在远程浏览器端储存数据并以此来跟踪和识别用户的机制。</span><br><span class="line">cookie是HTTP标头的一部分，因此setcookie()函数必须在其它信息被输出到浏览器前调用，这和对header()函数的限制类似。可以使用输出缓冲函数来延迟脚本的输出，直到按需要设置好了所有的cookie或者其它HTTP标头。</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 新增</span><br><span class="line">setcookie    新增一条cookie信息</span><br><span class="line">setcookie(<span class="variable">$name</span> [,<span class="variable">$value</span> [,<span class="variable">$expire</span> [,<span class="variable">$path</span> [,<span class="variable">$domain</span> [,<span class="variable">$secure</span> [,<span class="variable">$httponly</span>]]]]]])</span><br><span class="line"><span class="comment">#注意：setcookie()函数前不能有输出！除非开启ob缓存！</span></span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line"><span class="variable">$name</span>    - cookie的识别名称</span><br><span class="line">    使用<span class="variable">$_COOKIE</span>[<span class="string">&#x27;name&#x27;</span>]抵用名为name的cookie</span><br><span class="line"><span class="variable">$value</span>    - cookie值，可以为数值或字符串，此值保存在客户端，不要用来保存敏感数据</span><br><span class="line">    假定<span class="variable">$name</span>参数的值为<span class="string">&#x27;name&#x27;</span>，则<span class="variable">$_COOKIE</span>[<span class="string">&#x27;name&#x27;</span>]就可取得该<span class="variable">$value</span>值</span><br><span class="line"><span class="variable">$expire</span>    - cookie的生存期限（Unix时间戳，秒数）</span><br><span class="line">    如果<span class="variable">$expire</span>参数的值为time()+<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">7</span>则可设定cookie在一周后失效。如果未设定该参数，则会话后立即失效。</span><br><span class="line"><span class="variable">$path</span>    - cookie在服务器端的指定路径。当设定该值时，服务器中只有指定路径下的网页或程序可以存取该cookie。</span><br><span class="line">    如果该参数值为<span class="string">&#x27;/&#x27;</span>，则cookie在整个domain内有效。</span><br><span class="line">    如果设为<span class="string">&#x27;/foo/&#x27;</span>，则cookie就在domain下的<span class="regexp">/foo/</span>目录及其子目录内有效。</span><br><span class="line">    默认值为设定cookie的当前目录及其子目录。</span><br><span class="line"><span class="variable">$domain</span>    - 指定此cookie所属服务器的网址名称，预设是建立此cookie服务器的网址。</span><br><span class="line">    要是cookie能在如abc.com域名下的所有子域都有效，则该参赛应设为<span class="string">&#x27;.abc.com&#x27;</span>。</span><br><span class="line"><span class="variable">$secure</span>    - 指明cookie是否仅通过安全的HTTPS连接传送中的cookie的安全识别常数，如果设定该值则代表只有在某种情况下才能在客户端与服务端之间传递。</span><br><span class="line">    当设成true时，cookie仅在安全的连接中被设置。默认值为false。</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 读取</span><br><span class="line">- 浏览器请求时会携带当前域名下的所有cookie信息到服务器。</span><br><span class="line">- 任何从客户端发送的cookie都会被自动存入<span class="variable">$_COOKIE</span>全局数组。</span><br><span class="line">- 如果希望对一个cookie变量设置多个值，则需在cookie的名称后加[]符号。即以数组形态保存多条数据到同一变量。</span><br><span class="line">    <span class="regexp">//</span>设置为<span class="variable">$_COOKIE</span>[<span class="string">&#x27;user&#x27;</span>][<span class="string">&#x27;name&#x27;</span>]，注意user[name]的name没有引号</span><br><span class="line">    setcookie(<span class="string">&#x27;user[name]&#x27;</span>, <span class="string">&#x27;shocker&#x27;</span>);</span><br><span class="line">- <span class="variable">$_COOKIE</span>也可以为索引数组</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 删除</span><br><span class="line">方法<span class="number">1</span>：将其值设置为空字符串</span><br><span class="line">    setcookie(<span class="string">&#x27;user[name]&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">方法<span class="number">2</span>：将目标cookie设为“已过期”状态。</span><br><span class="line">    <span class="regexp">//</span>将cookie的生存时间设置为过期，则生存期限与浏览器一样，当浏览器关闭时就会被删除。</span><br><span class="line">    setcookie(<span class="string">&#x27;usr[name]&#x27;</span>, <span class="string">&#x27;&#x27;</span>, time()-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意：</span></span><br><span class="line"><span class="number">1</span>. cookie只能保存字符串数据</span><br><span class="line"><span class="number">2</span>. <span class="variable">$_COOKIE</span>只用于接收cookie数据，不用于设置或管理cookie数据。</span><br><span class="line">    对<span class="variable">$_COOKIE</span>进行操作不会影响cookie数据。</span><br><span class="line">    <span class="variable">$_COOKIE</span>只会保存浏览器在请求时所携带的cookie数据。</span><br><span class="line"><span class="number">3</span>. cookie生命周期：</span><br><span class="line">    临时cookie：浏览器关闭时被删除</span><br><span class="line">    持久cookie：<span class="variable">$expire</span>参数为时间戳，表示失效时间。</span><br><span class="line"><span class="number">4</span>. 有效目录</span><br><span class="line">    cookie只在指定的目录有效。默认是当前目录及其子目录。</span><br><span class="line">    子目录的cookie在其父目录或同级目录不可获取。</span><br><span class="line"><span class="number">5</span>. cookie区分域名</span><br><span class="line">    默认是当前域名及其子域名有效。</span><br><span class="line"><span class="number">6</span>. js中通过document.cookie获得，类型为字符串</span><br><span class="line"><span class="number">7</span>. 浏览器对COOKIE总数没有限制，但对每个域名的COOKIE数量和每个COOKIE的大小有限，而且不同浏览器的限制不同。</span><br></pre></td></tr></table></figure>

<h2 id="URL函数"><a href="#URL函数" class="headerlink" title="URL函数"></a>URL函数</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">get_headers — 取得服务器响应一个 HTTP 请求所发送的所有标头</span><br><span class="line">get_meta_tags — 从一个文件中提取所有的 meta 标签 content 属性，返回一个数组</span><br><span class="line">http_build_query — 生成 <span class="built_in">URL</span>-encode 之后的请求字符串</span><br><span class="line">urldecode — 解码已编码的<span class="built_in">URL</span>字符串</span><br><span class="line">urlencode — 编码<span class="built_in">URL</span>字符串</span><br><span class="line">parse_url — 解析<span class="built_in">URL</span>，返回其组成部分</span><br><span class="line">    <span class="string">&#x27;http://username:password@hostname/path?arg=value#anchor&#x27;</span></span><br><span class="line">    scheme(如<span class="keyword">http</span>), host, port, user, pass, path, query(在问号?之后), fragment(在散列符号<span class="comment">#之后)</span></span><br></pre></td></tr></table></figure>

<h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a><code>Session</code></h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. 开启session机制</span><br><span class="line">    <span class="title function_ invoke__">session_start</span>()</span><br><span class="line">    注意：<span class="title function_ invoke__">session_start</span>()函数前不能有输出！除非开启ob缓存。</span><br><span class="line"><span class="number">2</span>. 操作数据</span><br><span class="line">    对<span class="variable">$_SESSION</span>数组进行操作</span><br><span class="line"><span class="number">3</span>. 浏览器端保存SessionID，默认为当前域名下的所有目录及其子目录生效。即默认设置cookie的path值为<span class="string">&#x27;/&#x27;</span></span><br><span class="line"><span class="number">4</span>. 服务器保存session数据</span><br><span class="line">    默认保存方式：每个会话都会生成一个session数据文件，文件名为：sess_加SessionID</span><br><span class="line"><span class="number">5</span>. session可以存储除了资源以外的任何类型数据。</span><br><span class="line">    数据被序列化后再保存到文件中。</span><br><span class="line"><span class="number">6</span>. <span class="variable">$_SESSION</span>的元素下标不能为整型！</span><br><span class="line">    因为只对元素值进行序列化。</span><br><span class="line">    元素内的数组下标无此要求。</span><br><span class="line"><span class="number">7</span>. 生存周期</span><br><span class="line">    默认是浏览器关闭</span><br><span class="line">        因为浏览器保存的cookie变量SessionID是临时的</span><br><span class="line">        但是服务器端的session数据文件不一定消失（需要等待session的垃圾回收机制来处理）</span><br><span class="line">    可以延长cookie中PHPSESSID变量的生命周期。（不推荐）</span><br><span class="line">    php.ini配置session.gc_maxlifetime</span><br><span class="line"><span class="number">8</span>. 删除数据</span><br><span class="line">    <span class="variable">$_SESSION</span>变量在脚本结束时依然会消失。开启session机制时会造出<span class="variable">$_SESSION</span>变量。</span><br><span class="line">    <span class="variable">$_SESSION</span>与保存session数据的文件是两个空间。</span><br><span class="line">    <span class="keyword">unset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;key&#x27;</span>])只是删除数组内的该元素，不会立即相应到保存session数据的文件上。</span><br><span class="line">        等到脚本结束，才会将<span class="variable">$_SESSION</span>的数据写入到该文件中。</span><br><span class="line">    <span class="title function_ invoke__">session_destroy</span>()    销毁保存session数据的文件，也不会对该文件写入内容。</span><br><span class="line">        并不删除<span class="variable">$_SESSION</span>变量，<span class="keyword">unset</span>或脚本结束才会删除该变量。</span><br><span class="line">    如何完全删除一个session？需删除<span class="number">3</span>部分</span><br><span class="line">        <span class="keyword">unset</span>(<span class="variable">$_SESSION</span>);    </span><br><span class="line">            删除<span class="variable">$_SESSION</span>变量后，数据文件并未被改动。如果单独使用<span class="keyword">unset</span>，则需先置空<span class="variable">$_SESSION</span> = <span class="keyword">array</span>()</span><br><span class="line">        <span class="title function_ invoke__">session_destroy</span>();</span><br><span class="line">        <span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;PHPSESSID&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="title function_ invoke__">time</span>()-<span class="number">1</span>); <span class="comment">//保险做法是将其生命周期失效</span></span><br><span class="line">    整个脚本周期内，只对数据文件读一次、写一次。</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重写session的存储机制</span></span><br><span class="line"><span class="comment"># session存储方式</span></span><br><span class="line">session.save_handler = user|files|memcache</span><br><span class="line"><span class="comment"># 因数据文件过多导致的问题，可通过分子目录保存进行解决</span></span><br><span class="line">PHP配置文件下session.save_path选项，并需手动创建数据存放目录。</span><br><span class="line">在该配置选项前加层级。分布子目录的原则，利用会话ID的相应字母来分配子目录。仍需手动创建子目录。</span><br><span class="line">session.save_path = <span class="string">&quot;2; F:/PHPJob/Temp&quot;</span></span><br><span class="line"><span class="comment"># 多服务器数据共享问题</span></span><br><span class="line"><span class="comment"># 数据存储操作：</span></span><br><span class="line">    初始化<span class="variable">$open</span>、释放资源<span class="variable">$close</span>、读<span class="variable">$read</span>、写<span class="variable">$write</span>、销毁存储介质<span class="variable">$destroy</span>(调用session_destroy时触发该操作)、垃圾回收<span class="variable">$gc</span></span><br><span class="line"><span class="comment"># 会话ID的长度可变。不同的设置方式导致不同长度的会话ID。</span></span><br><span class="line">session.hash_function   允许用户指定生成会话ID的散列算法。</span><br><span class="line">    <span class="string">&#x27;0&#x27;</span> 表示MD5（<span class="number">128</span> 位），<span class="string">&#x27;1&#x27;</span> 表示SHA-<span class="number">1</span>（<span class="number">160</span> 位）。</span><br><span class="line">session.hash_bits_per_character    允许用户定义将二进制散列数据转换为可读的格式时每个字符存放多少个比特。</span><br><span class="line">    可能值为 <span class="string">&#x27;4&#x27;</span>（<span class="number">0</span>-<span class="number">9</span>，a-f），<span class="string">&#x27;5&#x27;</span>（<span class="number">0</span>-<span class="number">9</span>，a-v），以及 <span class="string">&#x27;6&#x27;</span>（<span class="number">0</span>-<span class="number">9</span>，a-z，A-Z，<span class="string">&quot;-&quot;</span>，<span class="string">&quot;,&quot;</span>）。</span><br><span class="line">    总hash长度为<span class="number">128</span>bit，会话ID长度为<span class="number">128</span>/可能值，<span class="number">4</span>-&gt;<span class="number">32</span>, <span class="number">5</span>-&gt;<span class="number">26</span>, <span class="number">6</span>-&gt;<span class="number">22</span></span><br><span class="line"><span class="comment"># 自定义数据存储操作方法</span></span><br><span class="line"><span class="comment"># 注意：不用关心PHP如何序列化、反序列化、如何得到数据和写入数据，只做与数据存储相关的操作</span></span><br><span class="line">session_set_save_handler    设置用户自定义的会话数据存储函数</span><br><span class="line">    <span class="keyword">bool</span> <span class="title function_ invoke__">session_set_save_handler</span>(<span class="keyword">callable</span> <span class="variable">$open</span>, <span class="keyword">callable</span> <span class="variable">$close</span>, <span class="keyword">callable</span> <span class="variable">$read</span>, <span class="keyword">callable</span> <span class="variable">$write</span>, <span class="keyword">callable</span> <span class="variable">$destroy</span>, <span class="keyword">callable</span> <span class="variable">$gc</span>)</span><br><span class="line">执行顺序：open,  close, read, write, destroy, gc</span><br><span class="line"><span class="comment"># 先设置处理器，再开启会话</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 常用函数</span></span><br><span class="line">session_start        开启或恢复会话机制</span><br><span class="line">session_id            获取或设置当前会话ID</span><br><span class="line">session_destroy        销毁当前会话的所有数据（销毁数据文件）</span><br><span class="line">session_name        获取或设置当前会话名称（cookie变量名，默认为PHPSESSID）</span><br><span class="line">session_save_path    获取或设置当前会话数据文件保存路径</span><br><span class="line">session_set_save_handler    设置用户自定义的会话数据存储函数</span><br><span class="line">session_unset        释放所有会话变量(清空<span class="variable">$_SESSION</span>数组元素)</span><br><span class="line">session_encode        将当前会话数据编码为一个字符串</span><br><span class="line">session_decode        将字符串解译为会话数据</span><br><span class="line">session_write_close    写入会话数据并关闭会话</span><br><span class="line">session_register_shutdown    关闭会话</span><br><span class="line">session_set_cookie_params    设置会话cookie变量，必须在<span class="title function_ invoke__">session_start</span>()前使用。</span><br><span class="line">    <span class="title function_ invoke__">session_set_cookie_params</span>(<span class="number">0</span>,<span class="string">&quot;/webapp/&quot;</span>); <span class="comment">//设置session生存时间</span></span><br><span class="line">session_get_cookie_params    获取会话cookie变量。返回包含当前会话cookie信息的数组</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置php.ini</span></span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="variable">$varname</span>, <span class="variable">$newvalue</span>);</span><br><span class="line">    <span class="comment">//该函数的配置只对当前脚本生效</span></span><br><span class="line">    <span class="comment">//并非所有php.ini设置均可用该函数设置</span></span><br><span class="line"><span class="title function_ invoke__">ini_get</span>(<span class="variable">$varname</span>)   <span class="comment">//获取某配置项信息</span></span><br><span class="line"><span class="title function_ invoke__">ini_get_all</span>([str <span class="variable">$extension</span>])   <span class="comment">//返回所有配置项信息的数组</span></span><br></pre></td></tr></table></figure>

<h2 id="类型操作函数"><a href="#类型操作函数" class="headerlink" title="类型操作函数"></a>类型操作函数</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取/设置类型</span></span><br><span class="line"><span class="title function_ invoke__">gettype</span>(<span class="variable">$var</span>) <span class="comment">//获取变量的数据类型</span></span><br><span class="line"><span class="title function_ invoke__">settype</span>(<span class="variable">$var</span>, <span class="variable">$type</span>) <span class="comment">//设置变量的数据类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//类型判断</span></span><br><span class="line">is_int</span><br><span class="line">is_float</span><br><span class="line">is_null</span><br><span class="line">is_string</span><br><span class="line">is_resource</span><br><span class="line">is_array</span><br><span class="line">is_bool</span><br><span class="line">is_object       </span><br><span class="line">is_numeric      检测变量是否为数字或数字字符串</span><br><span class="line"></span><br><span class="line"><span class="comment">//转换成指定的数据类型</span></span><br><span class="line">boolval</span><br><span class="line">floatval</span><br><span class="line">intval</span><br><span class="line">strval</span><br><span class="line"></span><br><span class="line"><span class="comment">//强制转换类型</span></span><br><span class="line">(<span class="keyword">int</span>)</span><br><span class="line">(<span class="keyword">float</span>)</span><br><span class="line">(<span class="keyword">string</span>)</span><br><span class="line">(<span class="keyword">bool</span>)</span><br><span class="line">(<span class="keyword">array</span>)</span><br><span class="line">(<span class="keyword">object</span>)</span><br><span class="line">(<span class="keyword">unset</span>) <span class="comment">//转换为NULL</span></span><br><span class="line">(<span class="keyword">binary</span>) 转换和 b前缀转换  <span class="comment">//转换成二进制</span></span><br><span class="line"></span><br><span class="line">var_dump        打印变量的相关信息。</span><br><span class="line">                显示关于一个或多个表达式的结构信息，包括表达式的类型与值。</span><br><span class="line">                数组将递归展开值，通过缩进显示其结构。</span><br><span class="line"><span class="title function_ invoke__">var_export</span>(<span class="variable">$var</span> [,<span class="keyword">bool</span> <span class="variable">$return</span>]) <span class="comment">//输出或返回一个变量的字符串表示</span></span><br><span class="line">    <span class="variable">$return</span>：为<span class="literal">true</span>，则返回变量执行后的结果</span><br><span class="line">print_r         打印关于变量的易于理解的信息</span><br><span class="line"><span class="keyword">empty</span>           检查一个变量是否为空</span><br><span class="line"><span class="keyword">isset</span>           检测变量是否存在</span><br></pre></td></tr></table></figure>

<h2 id="数组函数"><a href="#数组函数" class="headerlink" title="数组函数"></a>数组函数</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//统计计算</span></span><br><span class="line">count        计算数组中的单元数目或对象中的属性个数</span><br><span class="line"><span class="built_in">array</span>_count_values  统计数组中所有的值出现的次数</span><br><span class="line"><span class="built_in">array</span>_product       计算数组中所有值的乘积</span><br><span class="line"><span class="built_in">array</span>_sum           计算数组中所有值的和</span><br><span class="line">range        建立一个包含指定范围单元的数组</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取数组内容</span></span><br><span class="line"><span class="built_in">array</span>_chunk        将一个数组分割成多个</span><br><span class="line">    <span class="built_in">array</span> <span class="built_in">array</span>_chunk(<span class="built_in">array</span> $input, <span class="built_in">int</span> $size[, <span class="built_in">bool</span> $preserve_keys]) </span><br><span class="line"><span class="built_in">array</span>_filter    用回调函数过滤数组中的单元</span><br><span class="line"><span class="built_in">array</span>_slice     从数组中取出一段</span><br><span class="line">    <span class="built_in">array</span> <span class="built_in">array</span>_slice($arr, $offset [,$len [,$preserve_keys]])</span><br><span class="line"><span class="built_in">array</span>_keys        返回数组中所有的键名</span><br><span class="line">    <span class="built_in">array</span> <span class="built_in">array</span>_keys(<span class="built_in">array</span> $input[, mixed $search_value[, <span class="built_in">bool</span> $strict]] )</span><br><span class="line">    如果指定了可选参数 search_value，则只返回该值的键名。否则input数组中的所有键名都会被返回。</span><br><span class="line"><span class="built_in">array</span>_values    返回数组中所有的值，并建立数字索引</span><br><span class="line"></span><br><span class="line"><span class="built_in">array</span>_merge        合并一个或多个数组</span><br><span class="line">    一个数组中的值附加在前一个数组的后面。</span><br><span class="line">    如果输入的数组中有相同的字符串键名，则该键名后面的值将覆盖前一个值。</span><br><span class="line">    如果数组包含数字键名，后面的值将不会覆盖原来的值，而是附加到后面。</span><br><span class="line">    如果只给了一个数组并且该数组是数字索引的，则键名会以连续方式重新索引。 </span><br><span class="line"><span class="built_in">array</span>_merge_recursive    递归地合并一个或多个数组</span><br><span class="line"></span><br><span class="line"><span class="comment">//搜索</span></span><br><span class="line">in_array            检查数组中是否存在某个值</span><br><span class="line">    <span class="built_in">bool</span> in_array(mixed $needle, <span class="built_in">array</span> $haystack[, <span class="built_in">bool</span> $strict])</span><br><span class="line"><span class="built_in">array</span>_key_exists    检查给定的键名或索引是否存在于数组中</span><br><span class="line">    isset()对于数组中为NULL的值不会返回TRUE，而 <span class="built_in">array</span>_key_exists()会</span><br><span class="line"><span class="built_in">array</span>_search        在数组中搜索给定的值，如果成功则返回相应的键名</span><br><span class="line"></span><br><span class="line"><span class="built_in">array</span>_combine    创建一个数组，用一个数组的值作为其键名，另一个数组的值作为其值</span><br><span class="line">    如果两个数组的单元数不同或者数组为空时返回FALSE。</span><br><span class="line"><span class="built_in">array</span>_rand        从数组中随机取出一个或多个单元，返回键名或键名组成的数组，下标是自然排序的</span><br><span class="line"><span class="built_in">array</span>_fill      用给定的值填充数组</span><br><span class="line">    <span class="built_in">array</span>_fill($start, $num, $value)</span><br><span class="line"><span class="built_in">array</span>_flip      交换数组中的键和值</span><br><span class="line"><span class="built_in">array</span>_pad       用值将数组填补到指定长度</span><br><span class="line"><span class="built_in">array</span>_reverse   返回一个单元顺序相反的数组</span><br><span class="line"><span class="built_in">array</span>_unique    移除数组中重复的值</span><br><span class="line"><span class="built_in">array</span>_splice    把数组中的一部分去掉并用其它值取代</span><br><span class="line"></span><br><span class="line">implode            将数组元素值用某个字符串连接成字符串</span><br><span class="line">explode($delimiter, $str [,$limit])    <span class="comment">//使用一个字符串分割另一个字符串</span></span><br><span class="line">    $delimiter不能为空字符串<span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">array</span>_map        将回调函数作用到给定数组的单元上，只能处理元素值，可以处理多个数组</span><br><span class="line">    如果callback参数设为<span class="literal">null</span>，则合并多个数组为一个多维数组</span><br><span class="line"><span class="built_in">array</span>_walk        对数组中的每个成员应用用户函数，只能处理一个数组，键和值均可处理，与foreach功能相同</span><br><span class="line">    <span class="built_in">bool</span> <span class="built_in">array</span>_walk ( <span class="built_in">array</span> &amp;$<span class="built_in">array</span> , callback $funcname [, mixed $userdata ] )</span><br><span class="line"></span><br><span class="line"><span class="comment">//栈：后进先出</span></span><br><span class="line">入栈和出栈会重新分配索引下标</span><br><span class="line"><span class="built_in">array</span>_push        将一个或多个单元压入数组的末尾（入栈）</span><br><span class="line"><span class="built_in">array</span>_pop        将数组最后一个单元弹出（出栈）        使用此函数后会重置(reset())<span class="built_in">array</span> 指针。</span><br><span class="line"></span><br><span class="line"><span class="comment">//队列：先进先出</span></span><br><span class="line">队列函数会重新分配索引下标</span><br><span class="line"><span class="built_in">array</span>_unshift    在数组开头插入一个或多个单元</span><br><span class="line"><span class="built_in">array</span>_shift        将数组开头的单元移出数组            使用此函数后会重置(reset())<span class="built_in">array</span> 指针。</span><br><span class="line"></span><br><span class="line"><span class="comment">//排序函数</span></span><br><span class="line">sort            对数组排序</span><br><span class="line">rsort            对数组逆向排序</span><br><span class="line">asort            对数组进行排序并保持索引关系</span><br><span class="line">arsort            对数组进行逆向排序并保持索引关系</span><br><span class="line">ksort            对数组按照键名排序</span><br><span class="line">krsort            对数组按照键名逆向排序</span><br><span class="line">usort            使用用户自定义的比较函数对数组中的值进行排序</span><br><span class="line">uksort            使用用户自定义的比较函数对数组中的键名进行排序</span><br><span class="line">uasort            使用用户自定义的比较函数对数组中的值进行排序并保持索引关联</span><br><span class="line">natsort            用用“自然排序”算法对数组排序</span><br><span class="line">natcasesort        用“自然排序”算法对数组进行不区分大小写字母的排序</span><br><span class="line"><span class="built_in">array</span>_multisort 对多个数组或多维数组进行排序</span><br><span class="line">shuffle            将数组打乱</span><br><span class="line">    引用传递参数，返回<span class="built_in">bool</span>值。</span><br><span class="line">    重新赋予索引键名，删除原有键名</span><br><span class="line"></span><br><span class="line"><span class="comment">//差集</span></span><br><span class="line"><span class="built_in">array</span>_udiff_assoc   带索引检查计算数组的差集，用回调函数比较数据</span><br><span class="line"><span class="built_in">array</span>_udiff_uassoc  带索引检查计算数组的差集，用回调函数比较数据和索引</span><br><span class="line"><span class="built_in">array</span>_udiff         用回调函数比较数据来计算数组的差集</span><br><span class="line"><span class="built_in">array</span>_diff_assoc    带索引检查计算数组的差集</span><br><span class="line"><span class="built_in">array</span>_diff_key      使用键名比较计算数组的差集</span><br><span class="line"><span class="built_in">array</span>_diff_uassoc   用用户提供的回调函数做索引检查来计算数组的差集</span><br><span class="line"><span class="built_in">array</span>_diff_ukey     用回调函数对键名比较计算数组的差集</span><br><span class="line"><span class="built_in">array</span>_diff          计算数组的差集</span><br><span class="line"><span class="comment">//交集</span></span><br><span class="line"><span class="built_in">array</span>_intersect_assoc 带索引检查计算数组的交集</span><br><span class="line"><span class="built_in">array</span>_intersect_key 使用键名比较计算数组的交集</span><br><span class="line"><span class="built_in">array</span>_intersect_uassoc 带索引检查计算数组的交集，用回调函数比较索引</span><br><span class="line"><span class="built_in">array</span>_intersect_ukey 用回调函数比较键名来计算数组的交集</span><br><span class="line"><span class="built_in">array</span>_intersect 计算数组的交集</span><br><span class="line"><span class="built_in">array</span>_key_exists 用回调函数比较键名来计算数组的交集</span><br><span class="line"><span class="built_in">array</span>_uintersect_assoc 带索引检查计算数组的交集，用回调函数比较数据</span><br><span class="line"><span class="built_in">array</span>_uintersect 计算数组的交集，用回调函数比较数据</span><br><span class="line"></span><br><span class="line">extract($arr [,$type [,$prefix]])   从数组中将变量导入到当前的符号表(接受结合数组$arr作为参数并将键名当作变量名，值作为变量的值)</span><br><span class="line">compact($var [,...])   建立一个数组，包括变量名和它们的值(变量名成为键名而变量的内容成为该键的值)</span><br></pre></td></tr></table></figure>

<h2 id="文件、目录"><a href="#文件、目录" class="headerlink" title="文件、目录"></a>文件、目录</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">dirname</span><span class="params">(<span class="variable">$path</span>)</span></span>  返回路径中的目录部分</span><br><span class="line"><span class="function"><span class="title">basename</span><span class="params">(<span class="variable">$path</span> [,<span class="variable">$suffix</span>])</span></span>  返回路径中的文件名部分</span><br><span class="line"><span class="function"><span class="title">pathinfo</span><span class="params">(<span class="variable">$path</span> [,<span class="variable">$options</span>])</span></span> 返回文件路径的信息(数组元素：dirname,basename,extension)</span><br><span class="line"><span class="function"><span class="title">realpath</span><span class="params">(<span class="variable">$path</span>)</span></span> 返回规范化的绝对路径名</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">copy</span><span class="params">(<span class="variable">$source</span>, <span class="variable">$dest</span>)</span></span>    拷贝文件</span><br><span class="line"><span class="function"><span class="title">unlink</span><span class="params">(<span class="variable">$file</span>)</span></span>   删除文件</span><br><span class="line"><span class="function"><span class="title">rename</span><span class="params">(<span class="variable">$old</span>, <span class="variable">$new</span>)</span></span>  重命名或移动一个文件或目录</span><br><span class="line"><span class="function"><span class="title">mkdir</span><span class="params">(<span class="variable">$path</span> [,<span class="variable">$mode</span> [,<span class="variable">$recursive</span>]])</span></span> 新建目录</span><br><span class="line">    <span class="variable">$mode</span>表示权限，默认<span class="number">0777</span></span><br><span class="line">    <span class="variable">$recursive</span>表示可创建多级目录，默认false</span><br><span class="line"><span class="function"><span class="title">rmdir</span><span class="params">(<span class="variable">$dir</span>)</span></span>     删除目录(目录必须为空，且具有权限)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">file_exists</span><span class="params">(<span class="variable">$file</span>)</span></span>  检查文件或目录是否存在</span><br><span class="line"><span class="function"><span class="title">is_file</span><span class="params">(<span class="variable">$file</span>)</span></span>      判断文件是否存在且为正常的文件</span><br><span class="line"><span class="function"><span class="title">is_dir</span><span class="params">(<span class="variable">$file</span>)</span></span>       判断文件名是否存在且为目录</span><br><span class="line"><span class="function"><span class="title">is_readable</span><span class="params">(<span class="variable">$file</span>)</span></span>  判断文件或目录是否可读</span><br><span class="line"><span class="function"><span class="title">is_writable</span><span class="params">(<span class="variable">$file</span>)</span></span>  判断文件或目录是否可写</span><br><span class="line"><span class="function"><span class="title">is_executable</span><span class="params">(<span class="variable">$file</span>)</span></span>    判断给定文件名是否可执行</span><br><span class="line"><span class="function"><span class="title">is_link</span><span class="params">(<span class="variable">$file</span>)</span></span>      判断给定文件名是否为一个符号连接</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">tmpfile</span><span class="params">(void)</span></span>   建立一个临时文件</span><br><span class="line"><span class="function"><span class="title">tempnam</span><span class="params">(<span class="variable">$dir</span>, <span class="variable">$prefix</span>)</span></span>  在指定目录中建立一个具有唯一文件名的文件</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">file</span><span class="params">(<span class="variable">$file</span>)</span></span> 把整个文件读入一个数组中</span><br><span class="line"><span class="function"><span class="title">fopen</span><span class="params">(<span class="variable">$filename</span>, <span class="variable">$mode</span> [,<span class="variable">$use_include_path</span>])</span></span></span><br><span class="line">    <span class="variable">$mode</span>参数：(加入<span class="string">&#x27;b&#x27;</span>标记解决移植性)</span><br><span class="line">        <span class="string">&#x27;r&#x27;</span>     只读方式打开，将文件指针指向文件头。</span><br><span class="line">        <span class="string">&#x27;r+&#x27;</span>    读写方式打开，将文件指针指向文件头。</span><br><span class="line">        <span class="string">&#x27;w&#x27;</span>     写入方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。</span><br><span class="line">        <span class="string">&#x27;w+&#x27;</span>    读写方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。</span><br><span class="line">        <span class="string">&#x27;a&#x27;</span>     写入方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建之。</span><br><span class="line">        <span class="string">&#x27;a+&#x27;</span>    读写方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建之。</span><br><span class="line">        <span class="string">&#x27;x&#x27;</span>     创建并以写入方式打开，将文件指针指向文件头。</span><br><span class="line">        <span class="string">&#x27;x+&#x27;</span>    创建并以读写方式打开，将文件指针指向文件头。</span><br><span class="line"><span class="function"><span class="title">fclose</span><span class="params">(<span class="variable">$handle</span>)</span></span> 关闭一个已打开的文件指针</span><br><span class="line"><span class="function"><span class="title">fread</span><span class="params">(<span class="variable">$handle</span>, <span class="variable">$length</span>)</span></span> 读取文件（可安全用于二进制文件）</span><br><span class="line"><span class="function"><span class="title">fwrite</span><span class="params">(<span class="variable">$handle</span>, <span class="variable">$string</span> [,<span class="variable">$length</span>])</span></span> 写入文件（可安全用于二进制文件）</span><br><span class="line"><span class="function"><span class="title">rewind</span><span class="params">(<span class="variable">$handle</span>)</span></span> 倒回文件指针的位置</span><br><span class="line"><span class="function"><span class="title">ftell</span><span class="params">(<span class="variable">$handle</span>)</span></span>  返回文件指针读/写的位置</span><br><span class="line"><span class="function"><span class="title">fseek</span><span class="params">(<span class="variable">$handle</span>, <span class="variable">$offset</span> [,<span class="variable">$whence</span>])</span></span>  在文件指针中定位</span><br><span class="line"><span class="function"><span class="title">feof</span><span class="params">(<span class="variable">$handle</span>)</span></span>   测试文件指针是否到了文件结束的位置</span><br><span class="line">fgets   从文件指针中读取一行</span><br><span class="line">fgetss  从文件指针中读取一行并过滤掉HTML标记</span><br><span class="line"><span class="function"><span class="title">flock</span><span class="params">(<span class="variable">$handle</span>, <span class="variable">$opt</span>)</span></span> 轻便的咨询文件锁定</span><br><span class="line">    <span class="variable">$opt</span>：LOCK_SH 取得共享锁定（读取的程序）；LOCK_EX 取得独占锁定（写入的程序）；LOCK_UN 释放锁定（无论共享或独占）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">readfile</span><span class="params">(<span class="variable">$file</span>)</span></span> 读入一个文件并写入到输出缓冲</span><br><span class="line"><span class="function"><span class="title">fflush</span><span class="params">(<span class="variable">$handle</span>)</span></span> 将缓冲内容输出到文件</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">touch</span><span class="params">(<span class="variable">$file</span> [,<span class="variable">$time</span> [,<span class="variable">$atime</span>]])</span></span>   设定文件的访问和修改时间</span><br><span class="line">fileatime   取得文件的上次访问时间</span><br><span class="line">filectime   取得文件的inode修改时间</span><br><span class="line">filegroup   取得文件的组</span><br><span class="line">fileinode   取得文件的inode</span><br><span class="line">filemtime   取得文件修改时间</span><br><span class="line">fileowner   取得文件的所有者</span><br><span class="line">fileperms   取得文件的权限</span><br><span class="line">filesize    取得文件大小</span><br><span class="line">filetype    取得文件类型</span><br></pre></td></tr></table></figure>

<h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">enctype=<span class="string">&quot;multipart/form-data&quot;</span>   <span class="comment">//FORM标签必须的属性</span></span><br><span class="line">$<span class="variable">_FILES</span> 上传文件信息数组变量</span><br><span class="line">error   上传错误信息</span><br><span class="line">    <span class="number">0</span>   无错误</span><br><span class="line">    <span class="number">1</span>   文件大小超过php.ini配置</span><br><span class="line">        <span class="number">1</span>) upload_max_filesize 允许上传的最大文件大小</span><br><span class="line">        <span class="number">2</span>) post_max_size 最大的POST数据大小</span><br><span class="line">        <span class="number">3</span>) memory_limit 每个脚本能够使用的最大内存数量(默认<span class="number">128</span>MB)</span><br><span class="line">    <span class="number">2</span>   文件大小超过浏览器表单配置</span><br><span class="line">        MAX_FILE_SIZE   表示表单数据最大文件大小，该元素需在文件上传域之前。(默认<span class="number">2</span>M)</span><br><span class="line">        &lt;input <span class="built_in">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="built_in">name</span>=<span class="string">&quot;MAX_FILE_SIZE&quot;</span> value=<span class="string">&quot;102400&quot;</span>&gt;</span><br><span class="line">    <span class="number">3</span>   文件只有部分被上传</span><br><span class="line">    <span class="number">4</span>   文件没有被上传</span><br><span class="line">    <span class="number">6</span>,<span class="number">7</span> 临时文件写入时失败</span><br><span class="line">    <span class="number">6</span>   找不到临时文件</span><br><span class="line">    <span class="number">7</span>   文件写入失败</span><br><span class="line"><span class="built_in">name</span>    文件名</span><br><span class="line"><span class="built_in">type</span>    文件类型</span><br><span class="line">tmp_name    上传文件临时路径</span><br><span class="line"><span class="built_in">size</span>    文件大小</span><br><span class="line">move_uploaded_file($path, $newpath);    <span class="comment">//将上传的文件移动到新位置</span></span><br><span class="line">is_uploaded_file($file) <span class="comment">//判断是否为POST上传的文件</span></span><br><span class="line"><span class="comment">//多文件上传</span></span><br><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">&quot;file&quot;</span> <span class="built_in">name</span>=<span class="string">&quot;updfile[]&quot;</span> /&gt; <span class="comment">//HTML中以数组提交</span></span><br><span class="line">$<span class="variable">_FILES</span>[<span class="string">&#x27;updfile&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>][<span class="number">0</span>]   <span class="comment">//服务器端可访问第一个文件的临时路径，其他属性类似</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//php.ini配置</span></span><br><span class="line">file_uploads = On 是否允许HTTP上传文件</span><br><span class="line">upload_max_filesize 上传文件大小限制，默认为<span class="number">2</span>M</span><br><span class="line">post_max_size   post方式表单数据总大小限制，默认为<span class="number">8</span>M</span><br><span class="line">upload_tmp_dir  上传文件临时目录，默认是系统临时目录</span><br><span class="line">    需设置上传文件临时目录，给其最小权限</span><br><span class="line"><span class="built_in">GET</span>方式的最大传输量为<span class="number">2</span>K</span><br></pre></td></tr></table></figure>

<h1 id="数据库相关"><a href="#数据库相关" class="headerlink" title="数据库相关"></a>数据库相关</h1><h2 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#连接认证</span></span><br><span class="line">mysql_connect        连接并认证数据库</span><br><span class="line"><span class="comment">#发送SQL语句，接收执行结果</span></span><br><span class="line">mysql_query            发送SQL语句</span><br><span class="line">        仅对select, show, explain, describe语句执行成功返回一个资源标识符，其他语句成功返回true。执行失败均返回false。</span><br><span class="line"><span class="comment">#处理结果</span></span><br><span class="line">mysql_fetch_assoc    从结果集中取得一行作为关联数组</span><br><span class="line">        每次只取回一条，类似each</span><br><span class="line">    结果集中记录指针</span><br><span class="line">mysql_fetch_row        从结果集中取得一行作为枚举数组</span><br><span class="line">mysql_fetch_array    从结果集中取得一行作为关联数组，或数字数组，或二者兼有</span><br><span class="line">   <span class="built_in"> array </span>mysql_fetch_array ( resource $result [,<span class="built_in"> int </span>$ result_type  ] )</span><br><span class="line">    可选参数result_type可选值为：MYSQL_ASSOC，MYSQL_NUM 和 MYSQL_BOTH(默认)</span><br><span class="line">mysql_free_result    释放结果内存</span><br><span class="line"><span class="comment">#关闭链接</span></span><br><span class="line">mysql_close            关闭连接</span><br></pre></td></tr></table></figure>

<h1 id="代码复用"><a href="#代码复用" class="headerlink" title="代码复用"></a>代码复用</h1><h2 id="基础代码"><a href="#基础代码" class="headerlink" title="基础代码"></a>基础代码</h2><ul>
<li>PHP加密解密</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">encryptDecrypt</span>(<span class="params"><span class="variable">$key</span>, <span class="variable">$string</span>, <span class="variable">$decrypt</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$decrypt</span>)&#123;</span><br><span class="line">        <span class="variable">$decrypted</span> = <span class="title function_ invoke__">rtrim</span>(<span class="title function_ invoke__">mcrypt_decrypt</span>(</span><br><span class="line">            MCRYPT_RIJNDAEL_256,</span><br><span class="line">            <span class="title function_ invoke__">md5</span>(<span class="variable">$key</span>),</span><br><span class="line">            <span class="title function_ invoke__">base64_decode</span>(<span class="variable">$string</span>),</span><br><span class="line">            MCRYPT_MODE_CBC,</span><br><span class="line">            <span class="title function_ invoke__">md5</span>(<span class="title function_ invoke__">md5</span>(<span class="variable">$key</span>))), <span class="string">&quot;12&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$decrypted</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable">$encrypted</span> = <span class="title function_ invoke__">base64_encode</span>(<span class="title function_ invoke__">mcrypt_encrypt</span>(</span><br><span class="line">            MCRYPT_RIJNDAEL_256,</span><br><span class="line">            <span class="title function_ invoke__">md5</span>(<span class="variable">$key</span>),</span><br><span class="line">            <span class="variable">$string</span>,</span><br><span class="line">            MCRYPT_MODE_CBC,</span><br><span class="line">            <span class="title function_ invoke__">md5</span>(<span class="title function_ invoke__">md5</span>(<span class="variable">$key</span>))));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$encrypted</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//以下是将字符串“Hello欢迎您”分别加密和解密</span></span><br><span class="line"><span class="comment">//加密：</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">encryptDecrypt</span>(<span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;Hello欢迎您&#x27;</span>,<span class="number">0</span>).PHP_EOL;</span><br><span class="line"><span class="comment">//解密：</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">encryptDecrypt</span>(<span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;wA88E1Qs286hmS9tJvkHmiza2lwnW3pDAeiznKVbwEE=&#x27;</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>PHP生成随机字符串</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateRandomString</span>(<span class="params"><span class="variable">$length</span> = <span class="number">10</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$char</span> = <span class="string">&#x27;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#x27;</span>;</span><br><span class="line">    <span class="variable">$randomStr</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$length</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">        <span class="variable">$randomStr</span> .= <span class="variable">$char</span>[<span class="title function_ invoke__">rand</span>(<span class="number">0</span>, <span class="title function_ invoke__">strlen</span>(<span class="variable">$char</span>) - <span class="number">1</span>)];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$randomStr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">generateRandomString</span>(<span class="number">20</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>PHP获取文件扩展名（后缀）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSuffix</span>(<span class="params"><span class="variable">$filename</span></span>)</span>&#123;</span><br><span class="line">  <span class="variable">$ext</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$filename</span>, <span class="title function_ invoke__">strrpos</span>(<span class="variable">$filename</span>, <span class="string">&#x27;.&#x27;</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;.&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="variable">$ext</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$filename</span> = <span class="string">&#x27;我的文档.doc&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">getSuffix</span>(<span class="variable">$filename</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>PHP获取文件大小并格式化</li>
</ul>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">formatSize</span>(<span class="params">$size</span>) &#123;</span><br><span class="line">    <span class="symbol">$si</span>zes = <span class="built_in">array</span>(<span class="string">&quot; Bytes&quot;</span>, <span class="string">&quot; KB&quot;</span>, <span class="string">&quot; MB&quot;</span>, <span class="string">&quot; GB&quot;</span>, <span class="string">&quot; TB&quot;</span>, <span class="string">&quot; PB&quot;</span>, <span class="string">&quot; EB&quot;</span>, <span class="string">&quot; ZB&quot;</span>, <span class="string">&quot; YB&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="symbol">$si</span>ze == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>(<span class="string">&#x27;n/a&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> (<span class="built_in">round</span>(<span class="symbol">$si</span>ze/<span class="built_in">pow</span>(<span class="number">1024</span>, (<span class="symbol">$i</span> = <span class="built_in">floor</span>(<span class="built_in">log</span>(<span class="symbol">$si</span>ze, <span class="number">1024</span>)))), <span class="number">2</span>) . <span class="symbol">$si</span>zes[<span class="symbol">$i</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="symbol">$t</span>hefile = filesize(<span class="string">&#x27;API&#x27;</span>);</span><br><span class="line">echo formatSize(<span class="symbol">$t</span>hefile);</span><br></pre></td></tr></table></figure>

<ul>
<li>PHP替换标签字符</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stringParser</span>(<span class="params"><span class="variable">$string</span>,<span class="variable">$replacer</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$result</span> = <span class="title function_ invoke__">str_replace</span>(<span class="title function_ invoke__">array_keys</span>(<span class="variable">$replacer</span>), <span class="title function_ invoke__">array_values</span>(<span class="variable">$replacer</span>),<span class="variable">$string</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;The &#123;b&#125;anchor text&#123;/b&#125; is the &#123;b&#125;actual word&#123;/b&#125; or words used &#123;br&#125;to describe the link &#123;br&#125;itself&#x27;</span>;</span><br><span class="line"><span class="variable">$replace_array</span> = <span class="keyword">array</span>(<span class="string">&#x27;&#123;b&#125;&#x27;</span> =&gt; <span class="string">&#x27;&lt;b&gt;&#x27;</span>,<span class="string">&#x27;&#123;/b&#125;&#x27;</span> =&gt; <span class="string">&#x27;&lt;/b&gt;&#x27;</span>,<span class="string">&#x27;&#123;br&#125;&#x27;</span> =&gt; <span class="string">&#x27;&lt;br /&gt;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">stringParser</span>(<span class="variable">$string</span>,<span class="variable">$replace_array</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>PHP列出目录下的文件名</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> listDirFiles(<span class="variable">$DirPath</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$dir</span> = opendir(<span class="variable">$DirPath</span>))&#123;</span><br><span class="line">         <span class="keyword">while</span>((<span class="variable">$file</span> = readdir(<span class="variable">$dir</span>))!== <span class="literal">false</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(!is_dir(<span class="variable">$DirPath</span>.<span class="variable">$file</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">&quot;filename: <span class="variable">$file</span>&lt;br /&gt;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">listDirFiles(<span class="string">&#x27;../test.com/&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>PHP获取当前页面UR</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">currentPageURL</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$pageURL</span> = <span class="string">&#x27;http&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTPS&#x27;</span>])) &#123;</span><br><span class="line">        <span class="variable">$pageURL</span> .= <span class="string">&quot;s&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$pageURL</span> .= <span class="string">&quot;://&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&quot;SERVER_PORT&quot;</span>] != <span class="string">&quot;80&quot;</span>) &#123;</span><br><span class="line">        <span class="variable">$pageURL</span> .= <span class="variable">$_SERVER</span>[<span class="string">&quot;SERVER_NAME&quot;</span>]</span><br><span class="line">                 .<span class="string">&quot;:&quot;</span></span><br><span class="line">                 .<span class="variable">$_SERVER</span>[<span class="string">&quot;SERVER_PORT&quot;</span>]</span><br><span class="line">                 .<span class="variable">$_SERVER</span>[<span class="string">&quot;REQUEST_URI&quot;</span>];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$pageURL</span> .= <span class="variable">$_SERVER</span>[<span class="string">&quot;SERVER_NAME&quot;</span>]</span><br><span class="line">                 .<span class="variable">$_SERVER</span>[<span class="string">&quot;REQUEST_URI&quot;</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$pageURL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">currentPageURL</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>PHP强制下载文件</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">download</span>(<span class="params"><span class="variable">$filename</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((<span class="keyword">isset</span>(<span class="variable">$filename</span>))&amp;&amp;(<span class="title function_ invoke__">file_exists</span>(<span class="variable">$filename</span>)))&#123;</span><br><span class="line">       <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-length: &quot;</span>.<span class="title function_ invoke__">filesize</span>(<span class="variable">$filename</span>));</span><br><span class="line">       <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Type: application/octet-stream&#x27;</span>);</span><br><span class="line">       <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Disposition: attachment; filename=&quot;&#x27;</span> . <span class="variable">$filename</span> . <span class="string">&#x27;&quot;&#x27;</span>);</span><br><span class="line">       <span class="title function_ invoke__">readfile</span>(<span class="string">&quot;<span class="subst">$filename</span>&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&quot;Looks like file does not exist!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">download</span>(<span class="string">&#x27;download/test.zip&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>PHP获取客户端真实IP</li>
</ul>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">function getIp() &#123;</span><br><span class="line">    <span class="keyword">if</span> ( <span class="keyword">getenv</span>(<span class="string">&quot;HTTP_CLIENT_IP&quot;</span>) &amp;&amp;</span><br><span class="line">        strcasecmp(<span class="keyword">getenv</span>(<span class="string">&quot;HTTP_CLIENT_IP&quot;</span>), <span class="string">&quot;unknown&quot;</span>)</span><br><span class="line">    ) &#123;</span><br><span class="line">        $ip = <span class="keyword">getenv</span>(<span class="string">&quot;HTTP_CLIENT_IP&quot;</span>);</span><br><span class="line">    &#125; elseif (<span class="keyword">getenv</span>(<span class="string">&quot;HTTP_X_FORWARDED_FOR&quot;</span>) &amp;&amp;</span><br><span class="line">              strcasecmp(<span class="keyword">getenv</span>(<span class="string">&quot;HTTP_X_FORWARDED_FOR&quot;</span>), <span class="string">&quot;unknown&quot;</span>)</span><br><span class="line">    ) &#123;</span><br><span class="line">        $ip = <span class="keyword">getenv</span>(<span class="string">&quot;HTTP_X_FORWARDED_FOR&quot;</span>);</span><br><span class="line">    &#125; elseif (<span class="keyword">getenv</span>(<span class="string">&quot;REMOTE_ADDR&quot;</span>) &amp;&amp;</span><br><span class="line">              strcasecmp(<span class="keyword">getenv</span>(<span class="string">&quot;REMOTE_ADDR&quot;</span>), <span class="string">&quot;unknown&quot;</span>)</span><br><span class="line">    )&#123;</span><br><span class="line">        $ip = <span class="keyword">getenv</span>(<span class="string">&quot;REMOTE_ADDR&quot;</span>);</span><br><span class="line">    &#125; elseif (isset ($_SERVER[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>]) &amp;&amp;</span><br><span class="line">              $_SERVER[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>] &amp;&amp;</span><br><span class="line">              strcasecmp($_SERVER[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>], <span class="string">&quot;unknown&quot;</span>)</span><br><span class="line">    ) &#123;</span><br><span class="line">        $ip = $_SERVER[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $ip = <span class="string">&quot;unknown&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ($ip);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">echo getIp();</span><br></pre></td></tr></table></figure>

<ul>
<li>获取客户端IP</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getClientIp</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$ip</span> = <span class="literal">NULL</span>;</span><br><span class="line">     <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>])) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$arr</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>]);</span><br><span class="line">        <span class="variable">$pos</span> = <span class="title function_ invoke__">array_search</span>(<span class="string">&#x27;unknown&#x27;</span>,<span class="variable">$arr</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">false</span> !== <span class="variable">$pos</span>) <span class="keyword">unset</span>(<span class="variable">$arr</span>[<span class="variable">$pos</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="variable">$ip</span> = <span class="title function_ invoke__">trim</span>(<span class="variable">$arr</span>[<span class="number">0</span>]);</span><br><span class="line">     &#125; <span class="keyword">elseif</span> (<span class="keyword">isset</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_CLIENT_IP&#x27;</span>])) &#123;</span><br><span class="line">       <span class="variable">$ip</span> = <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_CLIENT_IP&#x27;</span>];</span><br><span class="line">     &#125; <span class="keyword">elseif</span> (<span class="keyword">isset</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>])) &#123;</span><br><span class="line">       <span class="variable">$ip</span> = <span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>];</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// IP地址合法验证</span></span><br><span class="line">     <span class="variable">$ip</span> = (<span class="literal">false</span> !== <span class="title function_ invoke__">ip2long</span>(<span class="variable">$ip</span>)) ? <span class="variable">$ip</span> : <span class="string">&#x27;0.0.0.0&#x27;</span>;</span><br><span class="line">     </span><br><span class="line">     <span class="keyword">return</span> <span class="variable">$ip</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$ip</span> = <span class="title function_ invoke__">getClientIp</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$ip</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>PHP计算时长(将秒数转化为时分秒格式)</li>
</ul>
<figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function changeTimeType(<span class="built_in">$seconds</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">$seconds</span> &gt; <span class="number">3600</span>) &#123;</span><br><span class="line">        <span class="built_in">$hours</span>   = intval(<span class="built_in">$seconds</span> / <span class="number">3600</span>)<span class="comment">;</span></span><br><span class="line">        <span class="built_in">$minutes</span> = <span class="built_in">$seconds</span> % <span class="number">3600</span><span class="comment">;</span></span><br><span class="line">        <span class="built_in">$time</span>    = <span class="built_in">$hours</span> . <span class="string">&quot;:&quot;</span> . gmstrftime(&#x27;<span class="built_in">%M</span>:<span class="built_in">%S</span>&#x27;, <span class="built_in">$minutes</span>)<span class="comment">;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">$time</span> = gmstrftime(&#x27;<span class="built_in">%H</span>:<span class="built_in">%M</span>:<span class="built_in">%S</span>&#x27;, <span class="built_in">$seconds</span>)<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">$time</span><span class="comment">;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">$seconds</span> = <span class="number">3512</span><span class="comment">;</span></span><br><span class="line"><span class="built_in">$seconds</span> = <span class="number">3712</span><span class="comment">;</span></span><br><span class="line">echo changeTimeType(<span class="built_in">$seconds</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>16进制颜色转10进制颜色</li>
</ul>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">function hex2rgb($hexcolor)&#123;</span><br><span class="line">    $color = str_replace(<span class="string">&#x27;#&#x27;</span>, <span class="string">&#x27;&#x27;</span>, $hexcolor);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (strlen($color) &gt; <span class="number">3</span>) &#123;</span><br><span class="line">        $rgb = array(</span><br><span class="line">            <span class="string">&#x27;r&#x27;</span> =&gt; hexdec(<span class="keyword">substr</span>($color, <span class="number">0</span>, <span class="number">2</span>)),</span><br><span class="line">            <span class="string">&#x27;g&#x27;</span> =&gt; hexdec(<span class="keyword">substr</span>($color, <span class="number">2</span>, <span class="number">2</span>)),</span><br><span class="line">            <span class="string">&#x27;b&#x27;</span> =&gt; hexdec(<span class="keyword">substr</span>($color, <span class="number">4</span>, <span class="number">2</span>))</span><br><span class="line">        );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $r = <span class="keyword">substr</span>($color, <span class="number">0</span>, <span class="number">1</span>) . <span class="keyword">substr</span>($color, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">        $g = <span class="keyword">substr</span>($color, <span class="number">1</span>, <span class="number">1</span>) . <span class="keyword">substr</span>($color, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        $b = <span class="keyword">substr</span>($color, <span class="number">2</span>, <span class="number">1</span>) . <span class="keyword">substr</span>($color, <span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line">        $rgb = array(</span><br><span class="line">            <span class="string">&#x27;r&#x27;</span> =&gt; hexdec($r),</span><br><span class="line">            <span class="string">&#x27;g&#x27;</span> =&gt; hexdec($g),</span><br><span class="line">            <span class="string">&#x27;b&#x27;</span> =&gt; hexdec($b)</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> $rgb;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$hex = <span class="string">&#x27;#fffeff&#x27;</span>;</span><br><span class="line">$hex = <span class="string">&#x27;#ffe&#x27;</span>;</span><br><span class="line">var_dump(hex2rgb($hex));</span><br></pre></td></tr></table></figure>

<ul>
<li>Header头文件设置</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//定义编码</span></span><br><span class="line"><span class="title function_ invoke__">header</span>( <span class="string">&#x27;Content-Type:text/html;charset=utf-8 &#x27;</span>);</span><br><span class="line"><span class="comment">//Atom</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type: application/atom+xml&#x27;</span>);</span><br><span class="line"><span class="comment">//CSS</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type: text/css&#x27;</span>);</span><br><span class="line"><span class="comment">//Javascript</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type: text/javascript&#x27;</span>);</span><br><span class="line"><span class="comment">//JPEG Image</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type: image/jpeg&#x27;</span>);</span><br><span class="line"><span class="comment">//JSON</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type: application/json&#x27;</span>);</span><br><span class="line"><span class="comment">//PDF</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type: application/pdf&#x27;</span>);</span><br><span class="line"><span class="comment">//RSS</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Type: application/rss+xml; charset=ISO-8859-1&#x27;</span>);</span><br><span class="line"><span class="comment">//Text (Plain)</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type: text/plain&#x27;</span>);</span><br><span class="line"><span class="comment">//XML</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type: text/xml&#x27;</span>);</span><br><span class="line"><span class="comment">// ok</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;HTTP/1.1 200 OK&#x27;</span>);</span><br><span class="line"><span class="comment">//设置一个404头:</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;HTTP/1.1 404 Not Found&#x27;</span>);</span><br><span class="line"><span class="comment">//设置地址被永久的重定向</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;HTTP/1.1 301 Moved Permanently&#x27;</span>);</span><br><span class="line"><span class="comment">//转到一个新地址</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: http://www.jbxue.com/&#x27;</span>);</span><br><span class="line"><span class="comment">//文件延迟转向:</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Refresh: 10; url=http://www.jbxue.com/&#x27;</span>);</span><br><span class="line"><span class="keyword">print</span> <span class="string">&#x27;You will be redirected in 10 seconds&#x27;</span>;<span class="comment">//当然，也可以使用html语法实现// &lt;meta http-equiv=&quot;refresh&quot; content=&quot;10;http://www.jbxue.com/ /&gt;</span></span><br><span class="line"><span class="comment">// override X-Powered-By: PHP:</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;X-Powered-By: PHP/4.4.0&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;X-Powered-By: Brain/0.6b&#x27;</span>);</span><br><span class="line"><span class="comment">//文档语言</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-language: en&#x27;</span>);</span><br><span class="line"><span class="comment">//告诉浏览器最后一次修改时间</span></span><br><span class="line"><span class="variable">$time</span> = <span class="title function_ invoke__">time</span>() - <span class="number">60</span>; <span class="comment">// or filemtime($fn), etc</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Last-Modified: &#x27;</span>.<span class="title function_ invoke__">gmdate</span>(<span class="string">&#x27;D, d M Y H:i:s&#x27;</span>, <span class="variable">$time</span>).<span class="string">&#x27; GMT&#x27;</span>);</span><br><span class="line"><span class="comment">//告诉浏览器文档内容没有发生改变</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;HTTP/1.1 304 Not Modified&#x27;</span>);</span><br><span class="line"><span class="comment">//设置内容长度</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Length: 1234&#x27;</span>);</span><br><span class="line"><span class="comment">//设置为一个下载类型</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Type: application/octet-stream&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Disposition: attachment; filename=&quot;example.zip&quot;&#x27;</span>);<span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Transfer-Encoding: binary&#x27;</span>);<span class="comment">// load the file to send:readfile(&#x27;example.zip&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对当前文档禁用缓存</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Cache-Control: no-cache, no-store, max-age=0, must-revalidate&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Expires: Mon, 26 Jul 1997 05:00:00 GMT&#x27;</span>); <span class="comment">// Date in the pastheader(&#x27;Pragma: no-cache&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//设置内容类型:</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Type: text/html; charset=iso-8859-1&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Type: text/html; charset=utf-8&#x27;</span>);<span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Type: text/plain&#x27;</span>); <span class="comment">//纯文本格式header(&#x27;Content-Type: image/jpeg&#x27;); //JPG***header(&#x27;Content-Type: application/zip&#x27;); // ZIP文件header(&#x27;Content-Type: application/pdf&#x27;); // PDF文件header(&#x27;Content-Type: audio/mpeg&#x27;); // 音频文件header(&#x27;Content-Type: application/x-shockw**e-flash&#x27;); //Flash动画</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//显示登陆对话框</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;HTTP/1.1 401 Unauthorized&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;WWW-Authenticate: Basic realm=&quot;Top Secret&quot;&#x27;</span>);<span class="keyword">print</span> <span class="string">&#x27;Text that will be displayed if the user hits cancel or &#x27;</span>;<span class="keyword">print</span> <span class="string">&#x27;enters wrong login data&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>Http_request</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">_request</span>(<span class="params"><span class="variable">$url</span>, <span class="variable">$method</span>, <span class="variable">$body</span>=<span class="literal">null</span>, <span class="variable">$times</span>=<span class="number">1</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">log</span>(<span class="string">&quot;Send &quot;</span> . <span class="variable">$method</span> . <span class="string">&quot; &quot;</span> . <span class="variable">$url</span> . <span class="string">&quot;, body:&quot;</span> . <span class="variable">$body</span> . <span class="string">&quot;, times:&quot;</span> . <span class="variable">$times</span>);</span><br><span class="line">        <span class="variable">$ch</span> = <span class="title function_ invoke__">curl_init</span>();</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span>);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="literal">true</span>);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="literal">true</span>);</span><br><span class="line">        <span class="comment">// 设置User-Agent</span></span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_USERAGENT, <span class="built_in">self</span>::<span class="variable constant_">USER_AGENT</span>);</span><br><span class="line">        <span class="comment">// 连接建立最长耗时</span></span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_CONNECTTIMEOUT, <span class="built_in">self</span>::<span class="variable constant_">CONNECT_TIMEOUT</span>);</span><br><span class="line">        <span class="comment">// 请求最长耗时</span></span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_TIMEOUT, <span class="built_in">self</span>::<span class="variable constant_">READ_TIMEOUT</span>);</span><br><span class="line">        <span class="comment">// 设置SSL版本</span></span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_SSLVERSION, CURL_SSLVERSION_TLSv1);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_SSL_VERIFYPEER, <span class="literal">false</span>);</span><br><span class="line">        <span class="comment">// 如果报证书相关失败,可以考虑取消注释掉该行,强制指定证书版本</span></span><br><span class="line">        <span class="comment">//curl_setopt($ch, CURLOPT_SSL_CIPHER_LIST, &#x27;TLSv1&#x27;);</span></span><br><span class="line">        <span class="comment">// 设置Basic认证</span></span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_USERPWD, <span class="variable">$this</span>-&gt;appKey . <span class="string">&quot;:&quot;</span> . <span class="variable">$this</span>-&gt;masterSecret);</span><br><span class="line">        <span class="comment">// 设置Post参数</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$method</span> === <span class="built_in">self</span>::<span class="variable constant_">HTTP_POST</span>) &#123;</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_POST, <span class="literal">true</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$method</span> === <span class="built_in">self</span>::<span class="variable constant_">HTTP_DELETE</span> || <span class="variable">$method</span> === <span class="built_in">self</span>::<span class="variable constant_">HTTP_PUT</span>) &#123;</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_CUSTOMREQUEST, <span class="variable">$method</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">is_null</span>(<span class="variable">$body</span>)) &#123;</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_POSTFIELDS, <span class="variable">$body</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置headers</span></span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HTTPHEADER, <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">&#x27;Content-Type: application/json&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Connection: Keep-Alive&#x27;</span></span><br><span class="line">        ));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 执行请求</span></span><br><span class="line">        <span class="variable">$output</span> = <span class="title function_ invoke__">curl_exec</span>(<span class="variable">$ch</span>);</span><br><span class="line">        <span class="comment">// 解析Response</span></span><br><span class="line">        <span class="variable">$response</span> = <span class="keyword">array</span>();</span><br><span class="line">        <span class="variable">$errorCode</span> = <span class="title function_ invoke__">curl_errno</span>(<span class="variable">$ch</span>);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">log</span>(<span class="keyword">array</span>(<span class="variable">$output</span>, <span class="variable">$errorCode</span>));</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$errorCode</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$errorCode</span> === <span class="number">28</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">APIConnectionException</span>(<span class="string">&quot;Response timeout. Your request has probably be received by JPush Server,please check that whether need to be pushed again.&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$errorCode</span> === <span class="number">56</span>) &#123;</span><br><span class="line">                <span class="comment">// resolve error[56 Problem (2) in the Chunked-Encoded data]</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">APIConnectionException</span>(<span class="string">&quot;Response timeout, maybe cause by old CURL version. Your request has probably be received by JPush Server, please check that whether need to be pushed again.&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$times</span> &gt;= <span class="variable language_">$this</span>-&gt;retryTimes) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">APIConnectionException</span>(<span class="string">&quot;Connect timeout. Please retry later. Error:&quot;</span> . <span class="variable">$errorCode</span> . <span class="string">&quot; &quot;</span> . <span class="title function_ invoke__">curl_error</span>(<span class="variable">$ch</span>));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">log</span>(<span class="string">&quot;Send &quot;</span> . <span class="variable">$method</span> . <span class="string">&quot; &quot;</span> . <span class="variable">$url</span> . <span class="string">&quot; fail, curl_code:&quot;</span> . <span class="variable">$errorCode</span> . <span class="string">&quot;, body:&quot;</span> . <span class="variable">$body</span> . <span class="string">&quot;, times:&quot;</span> . <span class="variable">$times</span>);</span><br><span class="line">                <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">_request</span>(<span class="variable">$url</span>, <span class="variable">$method</span>, <span class="variable">$body</span>, ++<span class="variable">$times</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$httpCode</span> = <span class="title function_ invoke__">curl_getinfo</span>(<span class="variable">$ch</span>, CURLINFO_HTTP_CODE);</span><br><span class="line">            <span class="variable">$header_size</span> = <span class="title function_ invoke__">curl_getinfo</span>(<span class="variable">$ch</span>, CURLINFO_HEADER_SIZE);</span><br><span class="line">            <span class="variable">$header_text</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$output</span>, <span class="number">0</span>, <span class="variable">$header_size</span>);</span><br><span class="line">            <span class="variable">$body</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$output</span>, <span class="variable">$header_size</span>);</span><br><span class="line">            <span class="variable">$headers</span> = <span class="keyword">array</span>();</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="title function_ invoke__">explode</span>(<span class="string">&quot;\r\n&quot;</span>, <span class="variable">$header_text</span>) <span class="keyword">as</span> <span class="variable">$i</span> =&gt; <span class="variable">$line</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$line</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$i</span> === <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="variable">$headers</span>[<span class="string">&#x27;http_code&#x27;</span>] = <span class="variable">$line</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">strpos</span>(<span class="variable">$line</span>, <span class="string">&quot;: &quot;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">list</span> (<span class="variable">$key</span>, <span class="variable">$value</span>) = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;: &#x27;</span>, <span class="variable">$line</span>);</span><br><span class="line">                        <span class="variable">$headers</span>[<span class="variable">$key</span>] = <span class="variable">$value</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$response</span>[<span class="string">&#x27;headers&#x27;</span>] = <span class="variable">$headers</span>;</span><br><span class="line">            <span class="variable">$response</span>[<span class="string">&#x27;body&#x27;</span>] = <span class="variable">$body</span>;</span><br><span class="line">            <span class="variable">$response</span>[<span class="string">&#x27;http_code&#x27;</span>] = <span class="variable">$httpCode</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_ invoke__">curl_close</span>(<span class="variable">$ch</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$response</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>MakeDir</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public static <span class="keyword">function</span> <span class="built_in">mkdir</span>(<span class="variable">$dir</span>, <span class="variable">$mode</span> = 0777, <span class="variable">$makeindex</span> = <span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(!is_dir(<span class="variable">$dir</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span>(preg_match(<span class="string">&#x27;/\.(asp|php|aspx|jsp|cgi)/i&#x27;</span>, <span class="variable">$dir</span>))&#123;</span><br><span class="line">            <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(preg_match(<span class="string">&#x27;/;/i&#x27;</span>, <span class="variable">$dir</span>))&#123;</span><br><span class="line">            <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;            </span><br><span class="line">        self::<span class="built_in">mkdir</span>(<span class="built_in">dirname</span>(<span class="variable">$dir</span>), <span class="variable">$mode</span>, <span class="variable">$makeindex</span>);</span><br><span class="line">        @<span class="built_in">mkdir</span>(<span class="variable">$dir</span>, <span class="variable">$mode</span>);</span><br><span class="line">        <span class="keyword">if</span>(!empty(<span class="variable">$makeindex</span>)) &#123;</span><br><span class="line">            @<span class="built_in">touch</span>(<span class="variable">$dir</span>.<span class="string">&#x27;/index.html&#x27;</span>); @<span class="built_in">chmod</span>(<span class="variable">$dir</span>.<span class="string">&#x27;/index.html&#x27;</span>, 0777);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>createDir</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params"><span class="variable">$dir</span>, <span class="variable">$mode</span>=<span class="number">0777</span>, <span class="variable">$makeindex</span>=<span class="literal">false</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$dir</span> = <span class="title function_ invoke__">rtrim</span>(<span class="title function_ invoke__">str_replace</span>(<span class="keyword">array</span>(<span class="string">&#x27;/&#x27;</span>, <span class="string">&#x27;\\&#x27;</span>), DIRECTORY_SEPARATOR, <span class="variable">$dir</span>), DIRECTORY_SEPARATOR);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">mkdir</span>(<span class="variable">$dir</span>, <span class="variable">$mode</span>, <span class="variable">$makeindex</span>);</span><br><span class="line">    <span class="comment">//在php设置为base_dir的时候会出错改用self::mkdir递归来创建</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$dir</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="variable">$arr</span> = <span class="title function_ invoke__">explode</span>(DIRECTORY_SEPARATOR, <span class="variable">$dir</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$path</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$k</span>=&gt;<span class="variable">$v</span>) &#123;</span><br><span class="line">            <span class="variable">$path</span> .= <span class="variable">$v</span> . DIRECTORY_SEPARATOR;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$k</span> &gt; <span class="number">0</span> &amp;&amp; !<span class="title function_ invoke__">file_exists</span>(<span class="variable">$path</span>)) &#123;</span><br><span class="line">                <span class="title function_ invoke__">mkdir</span>(<span class="variable">$path</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>generateQRCodeImage</code></li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> 生成一个二维码图片</span><br><span class="line">public <span class="keyword">function</span> generateQRCodeImage(</span><br><span class="line">    <span class="variable">$content</span>,</span><br><span class="line">    <span class="variable">$errorLevel</span> = <span class="string">&#x27;L&#x27;</span>,</span><br><span class="line">    <span class="variable">$pointSize</span> = <span class="number">10</span>,</span><br><span class="line">    <span class="variable">$margin</span> = <span class="number">1</span></span><br><span class="line">)&#123;</span><br><span class="line">    <span class="keyword">if</span> (!class_exists(<span class="string">&#x27;QRcode&#x27;</span>)) &#123;</span><br><span class="line">        include_once __CORE_DIR.<span class="string">&#x27;libs/qrcode/phpqrcode.php&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    QRcode::png(<span class="variable">$content</span>, false, <span class="variable">$errorLevel</span>, <span class="variable">$pointSize</span>, <span class="variable">$margin</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>base64转文件输出</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">base64ToFile</span>(<span class="params"><span class="variable">$base64_data</span>, <span class="variable">$file</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable">$base64_data</span> || !<span class="variable">$file</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$file</span>, <span class="title function_ invoke__">base64_decode</span>(<span class="variable">$base64_data</span>), <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>getJWTString</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getJWTString</span>(<span class="params"><span class="variable">$params</span> = []</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$header</span>  = <span class="title function_ invoke__">base64_encode</span>(<span class="title function_ invoke__">json_encode</span>([</span><br><span class="line">        <span class="string">&#x27;typ&#x27;</span> =&gt; <span class="string">&#x27;JWT&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;alg&#x27;</span> =&gt; <span class="string">&#x27;SHA256&#x27;</span>,</span><br><span class="line">    ]));</span><br><span class="line">    <span class="variable">$claims</span> = [</span><br><span class="line">        <span class="string">&#x27;exp&#x27;</span> =&gt; __TIME+<span class="number">604800</span>,    <span class="comment">// 1 week</span></span><br><span class="line">        <span class="string">&#x27;nbf&#x27;</span> =&gt; __TIME,</span><br><span class="line">        <span class="string">&#x27;iat&#x27;</span> =&gt; __TIME,</span><br><span class="line">    ];</span><br><span class="line">    <span class="variable">$payload</span> = <span class="title function_ invoke__">base64_encode</span>(<span class="title function_ invoke__">json_encode</span>(<span class="title function_ invoke__">array_merge</span>(<span class="variable">$params</span>, <span class="variable">$claims</span>)));</span><br><span class="line">    <span class="variable">$signature</span>  = <span class="title function_ invoke__">base64_encode</span>(<span class="title function_ invoke__">hash_hmac</span>(<span class="string">&#x27;sha256&#x27;</span>, <span class="variable">$header</span>.<span class="string">&#x27;.&#x27;</span>.<span class="variable">$payload</span>, __CFG::<span class="variable constant_">JWT_SECRET_KEY</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;.&#x27;</span>, [<span class="variable">$header</span>, <span class="variable">$payload</span>, <span class="variable">$signature</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>http_get</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">http_get</span>(<span class="params"><span class="variable">$url</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$oCurl</span> = <span class="title function_ invoke__">curl_init</span>();</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">stripos</span>(<span class="variable">$url</span>, <span class="string">&quot;https://&quot;</span> ) !== <span class="literal">FALSE</span>)&#123;</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$oCurl</span>, CURLOPT_SSL_VERIFYPEER, <span class="literal">FALSE</span>);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$oCurl</span>, CURLOPT_SSL_VERIFYHOST, <span class="literal">FALSE</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$oCurl</span>, CURLOPT_URL, <span class="variable">$url</span>);</span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$oCurl</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line">    <span class="variable">$sContent</span> = <span class="title function_ invoke__">curl_exec</span>(<span class="variable">$oCurl</span>);</span><br><span class="line">    <span class="variable">$aStatus</span>  = <span class="title function_ invoke__">curl_getinfo</span>(<span class="variable">$oCurl</span>);</span><br><span class="line">    <span class="title function_ invoke__">curl_close</span>(<span class="variable">$oCurl</span> );</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">intval</span>(<span class="variable">$aStatus</span> [<span class="string">&quot;http_code&quot;</span>]) == <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$sContent</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>http_post</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">http_post</span>(<span class="params"><span class="variable">$url</span>, <span class="variable">$param</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$oCurl</span> = <span class="title function_ invoke__">curl_init</span> ();</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">stripos</span> ( <span class="variable">$url</span>, <span class="string">&quot;https://&quot;</span> ) !== <span class="literal">FALSE</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span> ( <span class="variable">$oCurl</span>, CURLOPT_SSL_VERIFYPEER, <span class="literal">FALSE</span> );</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span> ( <span class="variable">$oCurl</span>, CURLOPT_SSL_VERIFYHOST, <span class="literal">false</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">is_string</span> ( <span class="variable">$param</span> )) &#123;</span><br><span class="line">        <span class="variable">$strPOST</span> = <span class="variable">$param</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$aPOST</span> = <span class="keyword">array</span> ();</span><br><span class="line">        <span class="keyword">foreach</span> ( <span class="variable">$param</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$val</span> ) &#123;</span><br><span class="line">            <span class="variable">$aPOST</span> [] = <span class="variable">$key</span> . <span class="string">&quot;=&quot;</span> . <span class="title function_ invoke__">urlencode</span> ( <span class="variable">$val</span> );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$strPOST</span> = <span class="title function_ invoke__">join</span> ( <span class="string">&quot;&amp;&quot;</span>, <span class="variable">$aPOST</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span> ( <span class="variable">$oCurl</span>, CURLOPT_URL, <span class="variable">$url</span> );</span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span> ( <span class="variable">$oCurl</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span> );</span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span> ( <span class="variable">$oCurl</span>, CURLOPT_POST, <span class="literal">true</span> );</span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span> ( <span class="variable">$oCurl</span>, CURLOPT_POSTFIELDS, <span class="variable">$strPOST</span> );</span><br><span class="line">    <span class="variable">$sContent</span> = <span class="title function_ invoke__">curl_exec</span> ( <span class="variable">$oCurl</span> );</span><br><span class="line">    <span class="variable">$aStatus</span> = <span class="title function_ invoke__">curl_getinfo</span> ( <span class="variable">$oCurl</span> );</span><br><span class="line">    <span class="title function_ invoke__">curl_close</span> ( <span class="variable">$oCurl</span> );</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">intval</span> ( <span class="variable">$aStatus</span> [<span class="string">&quot;http_code&quot;</span>] ) == <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$sContent</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="框架相关"><a href="#框架相关" class="headerlink" title="框架相关"></a>框架相关</h1><h2 id="使用-VarDumper-进行优雅的-PHP-调试"><a href="#使用-VarDumper-进行优雅的-PHP-调试" class="headerlink" title="使用 VarDumper 进行优雅的 PHP 调试"></a>使用 VarDumper 进行优雅的 PHP 调试</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">全局安装<span class="title class_">Symfony</span> <span class="title class_">VarDumper</span>，这样不仅可以解决样式一次性问题，还可以让你在任何项目中使用<span class="title class_">Symfony</span> <span class="title class_">VarDumper</span>，安装方法如下：</span><br><span class="line">第一步，全局安装：</span><br><span class="line">composer <span class="variable language_">global</span> <span class="built_in">require</span> symfony/<span class="keyword">var</span>-dumper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第二：配置php.<span class="property">ini</span></span><br><span class="line">在php.<span class="property">ini</span>中找到auto_prepend_file，然后写上你相对应的路径，比如像下面这样的：</span><br><span class="line"> auto_prepend_file = $&#123;<span class="variable constant_">HOME</span>&#125;/.<span class="property">composer</span>/vendor/autoload.<span class="property">php</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">最后，更新composer</span><br><span class="line">直接命令行执行：</span><br><span class="line">composer <span class="variable language_">global</span> update</span><br></pre></td></tr></table></figure>

<h1 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h1><h2 id="网站高并发-大流量访问的处理及解决方法"><a href="#网站高并发-大流量访问的处理及解决方法" class="headerlink" title="网站高并发 大流量访问的处理及解决方法"></a>网站高并发 大流量访问的处理及解决方法</h2><p>第一，确认服务器硬件是否足够支持当前的流量。<br>普通的P4服务器一般最多能支持每天10万独立IP，如果访问量比这个还要大， 那么必须首先配置一台更高性能的专用服务器才能解决问题 ，否则怎么优化都不可能彻底解决性能问题。 </p>
<p>第二，优化数据库访问。<br>前台实现完全的静态化当然最好，可以完全不用访问数据库，不过对于频繁更新的网站， 静态化往往不能满足某些功能。 </p>
<p>缓存技术就是另一个解决方案，就是将动态数据存储到缓存文件中，动态网页直接调用 这些文件，而不必再访问数据库，WordPress和Z-Blog都大量使用这种缓存技术。</p>
<p>如果确实无法避免对数据库的访问，那么可以尝试优化数据库的查询SQL.避免使用 Select * from这样的语句，每次查询只返回自己需要的结果，避免短时间内的大,尽量做到”所查即所得” ,遵循以小表为主,附表为辅,查询条件先索引,先小后大的原则,提高查询效率.<br>量SQL查询。 </p>
<p>第三，禁止外部的盗链。<br>外部网站的图片或者文件盗链往往会带来大量的负载压力，因此应该严格限制外部对于自身的图片或者文件盗链，好在目前可以简单地通过refer来控制盗链，Apache自 己就可以通过配置来禁止盗链，IIS也有一些第三方的ISAPI可以实现同样的功能。当然，伪造refer也可以通过代码来实现盗链，不过目前蓄意伪造refer盗链的还不多， 可以先不去考虑，或者使用非技术手段来解决，比如在图片上增加水印。 </p>
<p>第四，控制大文件的下载。<br>大文件的下载会占用很大的流量，并且对于非SCSI硬盘来说，大量文件下载会消耗 CPU，使得网站响应能力下降。因此，尽量不要提供超过2M的大文件下载，如果需要提供，建议将大文件放在另外一台服务器上。 </p>
<p>第五，使用不同主机分流主要流量<br>将文件放在不同的主机上，提供不同的镜像供用户下载。比如如果觉得RSS文件占用流量大，那么使用FeedBurner或者FeedSky等服务将RSS输出放在其他主机上，这样别人访问的流量压力就大多集中在FeedBurner的主机上，RSS就不占用太多资源了。 </p>
<p>第六，使用流量分析统计软件。<br>在网站上安装一个流量分析统计软件，可以即时知道哪些地方耗费了大量流量，哪些页面需要再进行优化，因此，解决流量问题还需要进行精确的统计分析才可以。我推荐使用的流量分析统计软件是Google Analytics（Google分析）。若还有其他的流量分析软件,欢迎共享交流</p>
<h1 id="太多了-看到自己想吐"><a href="#太多了-看到自己想吐" class="headerlink" title="太多了~~ 看到自己想吐~~"></a>太多了~~ 看到自己想吐~~</h1>
        
      
    </div>

    <footer class="article-footer">
      
      
      <div>
        <ul class="post-copyright">
          <li class="post-copyright-author">
          <strong>本文作者:  </strong>CAO XIAN LIANG</a>
          </li>
          <li class="post-copyright-link">
          <strong>本文链接:  </strong>
          <a href="/2018/08/14/YouDao-notes/" target="_blank" title="PHP 基础知识 II">http://blog.caoxl.com/2018/08/14/YouDao-notes/</a>
          </li>
          <li class="post-copyright-license">
            <strong>版权声明:   </strong>
            本博客所有文章除特别声明外，均采用 <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a>
            许可协议。转载请注明出处
          </li>
         
        </ul>
<div>

      
      
      
      
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">PHP 基础知识</a></li></ul>

      

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/08/14/Laravel-Github-Top-vendor/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          Github Laravel 常用扩展包
        
      </div>
    </a>
  
  
    <a href="/2018/08/13/Lumen-Cache-Memcache-Redis/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">基于Lumen-几种缓存方法</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#PHP%E6%9D%82%E7%9A%84%E8%AF%86"><span class="nav-number">1.</span> <span class="nav-text">PHP杂的识</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#PHP-%E7%9A%84%E4%B8%80%E4%BA%9B%E9%AB%98%E6%95%88%E5%86%99%E6%B3%95"><span class="nav-number">1.1.</span> <span class="nav-text">PHP 的一些高效写法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99"><span class="nav-number">1.2.</span> <span class="nav-text">命名规则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9"><span class="nav-number">1.3.</span> <span class="nav-text">配置选项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8CCLI"><span class="nav-number">1.4.</span> <span class="nav-text">命令行CLI</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.5.</span> <span class="nav-text">类和对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%AB%99%E5%B9%B6%E5%8F%91"><span class="nav-number">1.6.</span> <span class="nav-text">网站并发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A2%84%E5%AE%9A%E4%B9%89%E5%B8%B8%E9%87%8F"><span class="nav-number">1.7.</span> <span class="nav-text">预定义常量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="nav-number">1.8.</span> <span class="nav-text">相对路径</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E5%87%BD%E6%95%B0"><span class="nav-number">1.9.</span> <span class="nav-text">变量函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%AF%E5%8F%98%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="nav-number">1.10.</span> <span class="nav-text">可变标识符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%88%E6%AD%A2%E5%92%8C%E5%BB%B6%E8%BF%9F%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C"><span class="nav-number">1.11.</span> <span class="nav-text">终止和延迟脚本执行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9A%E7%95%8C%E7%AC%A6"><span class="nav-number">1.12.</span> <span class="nav-text">定界符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E5%8C%96"><span class="nav-number">1.13.</span> <span class="nav-text">静态化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E9%87%8F%E7%9B%B8%E5%85%B3"><span class="nav-number">1.14.</span> <span class="nav-text">常量相关</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">1.15.</span> <span class="nav-text">变量生命周期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="nav-number">1.16.</span> <span class="nav-text">变量作用域</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="nav-number">1.17.</span> <span class="nav-text">错误处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SERVER"><span class="nav-number">1.18.</span> <span class="nav-text">$_SERVER</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96"><span class="nav-number">1.19.</span> <span class="nav-text">其他</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PHP%E5%87%BD%E6%95%B0"><span class="nav-number">2.</span> <span class="nav-text">PHP函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="nav-number">2.1.</span> <span class="nav-text">字符串函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Math%E5%87%BD%E6%95%B0"><span class="nav-number">2.2.</span> <span class="nav-text">Math函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PHP%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E6%A3%80%E6%B5%8B%E5%87%BD%E6%95%B0"><span class="nav-number">2.3.</span> <span class="nav-text">PHP运行环境检测函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fileinfo"><span class="nav-number">2.4.</span> <span class="nav-text">fileinfo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mbstring-%E5%A4%9A%E5%AD%97%E8%8A%82%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">2.5.</span> <span class="nav-text">mbstring(多字节字符串)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ob%E7%BC%93%E5%AD%98-%E8%BE%93%E5%87%BA%E6%8E%A7%E5%88%B6"><span class="nav-number">2.6.</span> <span class="nav-text">ob缓存(输出控制)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cookie"><span class="nav-number">2.7.</span> <span class="nav-text">Cookie</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#URL%E5%87%BD%E6%95%B0"><span class="nav-number">2.8.</span> <span class="nav-text">URL函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Session"><span class="nav-number">2.9.</span> <span class="nav-text">Session</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%E6%93%8D%E4%BD%9C%E5%87%BD%E6%95%B0"><span class="nav-number">2.10.</span> <span class="nav-text">类型操作函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E5%87%BD%E6%95%B0"><span class="nav-number">2.11.</span> <span class="nav-text">数组函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E3%80%81%E7%9B%AE%E5%BD%95"><span class="nav-number">2.12.</span> <span class="nav-text">文件、目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">2.13.</span> <span class="nav-text">文件上传</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3"><span class="nav-number">3.</span> <span class="nav-text">数据库相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="nav-number">3.1.</span> <span class="nav-text">数据库操作</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E5%A4%8D%E7%94%A8"><span class="nav-number">4.</span> <span class="nav-text">代码复用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E4%BB%A3%E7%A0%81"><span class="nav-number">4.1.</span> <span class="nav-text">基础代码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3"><span class="nav-number">5.</span> <span class="nav-text">框架相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-VarDumper-%E8%BF%9B%E8%A1%8C%E4%BC%98%E9%9B%85%E7%9A%84-PHP-%E8%B0%83%E8%AF%95"><span class="nav-number">5.1.</span> <span class="nav-text">使用 VarDumper 进行优雅的 PHP 调试</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">6.</span> <span class="nav-text">服务器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%AB%99%E9%AB%98%E5%B9%B6%E5%8F%91-%E5%A4%A7%E6%B5%81%E9%87%8F%E8%AE%BF%E9%97%AE%E7%9A%84%E5%A4%84%E7%90%86%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="nav-number">6.1.</span> <span class="nav-text">网站高并发 大流量访问的处理及解决方法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%AA%E5%A4%9A%E4%BA%86-%E7%9C%8B%E5%88%B0%E8%87%AA%E5%B7%B1%E6%83%B3%E5%90%90"><span class="nav-number">7.</span> <span class="nav-text">太多了~~ 看到自己想吐~~</span></a></li></ol>
    
    </div>
  </aside>

</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2017 - 2023 Keep It Simple And Stupid All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				访客数 : <span id="busuanzi_value_site_uv"></span> |  
				访问量 : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>




<script src="/js/scripts.js"></script>





  
<script src="/js/dialog.js"></script>









	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            Keep It Simple And Stupid
          </div>
          <div class="panel-body">
            Copyright © 2023 CAO XIAN LIANG All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>