<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>mysql 复习笔记 | Keep It Simple And Stupid</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="MySQL事务触发器" />
  
  
  
  
  <meta name="description" content="MySQL的基本操作可以包括两个方面：MySQL常用语句如高频率使用的增删改查（CRUD）语句和MySQL高级功能，如存储过程，触发器，事务处理等">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 复习笔记">
<meta property="og:url" content="http://blog.caoxl.com/2018/11/12/MySQL-cmd-Summary/index.html">
<meta property="og:site_name" content="Keep It Simple And Stupid">
<meta property="og:description" content="MySQL的基本操作可以包括两个方面：MySQL常用语句如高频率使用的增删改查（CRUD）语句和MySQL高级功能，如存储过程，触发器，事务处理等">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-11-12T03:29:38.000Z">
<meta property="article:modified_time" content="2019-08-22T06:27:17.000Z">
<meta property="article:author" content="CAO XIAN LIANG">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="事务">
<meta property="article:tag" content="触发器">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Keep It Simple And Stupid" type="application/atom+xml">
  

  

  <link rel="icon" href="https://images.unsplash.com/photo-1643801026603-63d4f50be313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=767&q=80">
  <link rel="apple-touch-icon" href="/https://images.unsplash.com/photo-1643801026603-63d4f50be313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=767&q=80">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>

  
<script src="/js/bootstrap.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    
<link rel="stylesheet" href="/css/dialog.css">

  

  

  
    <link rel="stylesheet" href="/css/header-post.css" >
  

  
  
  

<style type="text/css">
.spoiler {
  display: inline-flex;
}
p.spoiler {
  display: flex;
}
.spoiler a {
  pointer-events: none;
}
.spoiler-blur, .spoiler-blur > * {
  transition: text-shadow .5s ease;
}
.spoiler .spoiler-blur, .spoiler .spoiler-blur > * {
  color: rgba(0, 0, 0, 0);
  background-color: rgba(0, 0, 0, 0);
  text-shadow: 0 0 10px grey;
  cursor: pointer;
}
.spoiler .spoiler-blur:hover, .spoiler .spoiler-blur:hover > * {
  text-shadow: 0 0 5px grey;
}
.spoiler-box, .spoiler-box > * {
  transition: color .5s ease,
  background-color .5s ease;
}
.spoiler .spoiler-box, .spoiler .spoiler-box > * {
  color: black;
  background-color: black;
  text-shadow: none;
}</style><meta name="generator" content="Hexo 6.3.0"></head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="https://images.unsplash.com/photo-1643801026603-63d4f50be313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=767&q=80">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">首页</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">归档</a> </li>
                
                  <li> <a class="main-nav-link" href="/categories">分类</a> </li>
                
                  <li> <a class="main-nav-link" href="/tags">标签</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">关于</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(无标题)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-MySQL-cmd-Summary" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      MySQL 复习笔记
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/11/12/MySQL-cmd-Summary/" class="article-date">
	  <time datetime="2018-11-12T03:29:38.000Z" itemprop="datePublished">2018-11-12</time>
	</a>

      
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>

      
	<a class="article-views">
	<span id="busuanzi_container_page_pv">
		阅读量<span id="busuanzi_value_page_pv"></span>
	</span>
	</a>

    </div>

    <div class="article-entry" itemprop="articleBody">
      
        
        
          <blockquote>
<p>MySQL的基本操作可以包括两个方面：MySQL常用语句如高频率使用的增删改查（CRUD）语句和MySQL高级功能，如存储过程，触发器，事务处理等</p>
</blockquote>
<span id="more"></span>

<ul>
<li><p>MySQL常用语句</p>
<ol>
<li>表（或者数据库）的CRUD</li>
<li>表数据的CRUD，其中表数据查询使用最多，也更复杂。查询可以按照单表还是多表可以分为：<br>单表SELECT查询和多表的联结查询（INNER JOIN, LEFT JOIN, RIGHT JOIN和FULL JOIN）以及组合查询UNION和UNION ALL</li>
<li>SQL语句中各个关键字的执行顺序</li>
</ol>
</li>
<li><p>MySQL的高级功能</p>
<ol>
<li>存储过程</li>
<li>事务处理</li>
<li>触发器</li>
</ol>
</li>
</ul>
<h1 id="表-或数据库-操作语句"><a href="#表-或数据库-操作语句" class="headerlink" title="表(或数据库)操作语句"></a>表(或数据库)操作语句</h1><h2 id="查询表（或数据库）"><a href="#查询表（或数据库）" class="headerlink" title="查询表（或数据库）"></a>查询表（或数据库）</h2><ul>
<li><ol>
<li>获取所有可用的数据库：<code>SHOW DATABASES</code>;</li>
</ol>
</li>
<li><ol start="2">
<li>选择数据库：<code>USE customers</code>;</li>
</ol>
</li>
<li><ol start="3">
<li>用于显示数据库服务器的状态信息：<code>SHOW STATUS</code>;</li>
</ol>
</li>
<li><ol start="4">
<li>用来显示授权用户的安全权限：<code>SHOW GRANTS</code>;</li>
</ol>
</li>
<li><ol start="5">
<li>用来显示数据库服务器或警告信息：<code>SHOW ERRORS</code> 或者 <code>SHOW WARNINGS</code>;</li>
</ol>
</li>
<li><ol start="6">
<li>用于显示创建数据库时的创建语句：<code>SHOW CREATE DATABASE customers</code>；</li>
</ol>
</li>
<li><ol start="7">
<li>用于显示创建表时的创建语句：<code>SHOW CREATE TABLE customers</code>；</li>
</ol>
</li>
<li><ol start="8">
<li>获取当前所选的数据库中所有可用的表：<code>SHOW TABLES</code>；</li>
</ol>
</li>
<li><ol start="9">
<li>获取表中所有列的信息：<code>SHOW COLUMNS FROM tableName</code>；同时DESCRIBE语句有相同的效果：<code>DESCRIBE tableName</code>；</li>
</ol>
</li>
</ul>
<h2 id="新建表（或数据库）"><a href="#新建表（或数据库）" class="headerlink" title="新建表（或数据库）"></a>新建表（或数据库）</h2><ul>
<li><ol>
<li><strong>新建数据库</strong>：<code>CREATE DATABASE customers</code>;</li>
</ol>
</li>
<li><ol start="2">
<li><strong>创建表</strong>可以使用CREATE TABLE语句:</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE <span class="title function_ invoke__">customers</span>(</span><br><span class="line">  cust_id INT NOT <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  cust_name <span class="title function_ invoke__">CHAR</span>(<span class="number">50</span>) NOT <span class="literal">NULL</span>,</span><br><span class="line">  cust_age INT <span class="literal">NULL</span> DEFAULT <span class="number">18</span>,</span><br><span class="line">  PRIMARY <span class="title function_ invoke__">KEY</span>(cust_id)</span><br><span class="line">)ENGINE=INNODB;</span><br></pre></td></tr></table></figure>

<p>有这样一些细节：</p>
<ol>
<li>允许<strong>NULL</strong>值，则说明在插入行数据时允许不给出该列的值，而<strong>NOT NULL</strong>则表示在插入或者更新该列数据，必须明确给出该列的值；</li>
<li><strong>DEFAULT</strong>表示该列的默认值，在插入行数据时，若没有给出该列的值就会使用其指定的默认值；</li>
<li><strong>PRIMARY KEY</strong>用于指定主键，主键可以指定一列数据，而可以由多列数据组合构成，如<code>PRIMARY KEY(cust_id,cust_name)</code>；</li>
<li><strong>ENGINE</strong>用于指定引擎类型。常见的引擎类型有这些：<br>  （1）<code>InnoDB</code>是一个支持可靠的事务处理的引擎，但是不支持全文本搜索；<br>  （2）<code>MyISAM</code>是一个性能极高的引擎，它支持全文本搜索，但是不支持事务处理；<br>  （3）MEMORY在功能上等同于<code>MyISAM</code>，但由于数据存储在内存中，速度很快（特别适合于临时表）；</li>
</ol>
<ul>
<li><ol start="3">
<li>在创建表的时候可以使用<strong>FOREIGN KEY</strong>来创建外键，<br>即一个表中的<code>FOREIGN KEY</code>指向另一个表中<code>PRIMARY KEY</code>。外键FOREIGN KEY用于约束破坏表的联结动作，保证两个表的数据完整性。<br>同时也能防止非法数据插入外键列，因为该列值必须指向另一个表的主键。</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">REATE TABLE <span class="title function_ invoke__">Orders</span></span><br><span class="line"> (</span><br><span class="line"> Id_O <span class="keyword">int</span> NOT <span class="literal">NULL</span>,</span><br><span class="line"> OrderNo <span class="keyword">int</span> NOT <span class="literal">NULL</span>,</span><br><span class="line"> Id_P <span class="keyword">int</span>,</span><br><span class="line"> PRIMARY <span class="title function_ invoke__">KEY</span> (Id_O),</span><br><span class="line"> FOREIGN <span class="title function_ invoke__">KEY</span> (Id_P) REFERENCES <span class="title function_ invoke__">Persons</span>(Id_P)</span><br><span class="line"> )</span><br></pre></td></tr></table></figure>

<h2 id="删除表（或数据库）"><a href="#删除表（或数据库）" class="headerlink" title="删除表（或数据库）"></a>删除表（或数据库）</h2><ul>
<li><ol>
<li><strong>删除数据库</strong>：<code>DROP DATABASE customers</code>；</li>
</ol>
</li>
<li><ol start="2">
<li><strong>删除表</strong>，使用DROP TABLE子句：<code>DROP TABLE customers</code>;</li>
</ol>
</li>
</ul>
<h2 id="更新表"><a href="#更新表" class="headerlink" title="更新表"></a>更新表</h2><ul>
<li><ol>
<li>更新表结构信息可以使用ALTER TABLE子句，<br>如为表增加一列：<code>ALTER TABLE vendors ADD vend_name CHAR(20)</code>；<br>另外经常用于定义外键，如：</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE customers </span><br><span class="line">ADD CONSTRAINT fk_custormer_orders</span><br><span class="line">FOREIGN <span class="title function_ invoke__">KEY</span>(cust_id) REFERENCES <span class="title function_ invoke__">orders</span> (order_cust)</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="2">
<li>重命名表，使用RENAME子句。</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RENAME TABLE backup_customers TO customers, backup_vendors TO vendors;</span><br></pre></td></tr></table></figure>

<p>更改多个表名，之间用逗号间隔</p>
<h1 id="表数据操作语句"><a href="#表数据操作语句" class="headerlink" title="表数据操作语句"></a>表数据操作语句</h1><h2 id="查询表数据"><a href="#查询表数据" class="headerlink" title="查询表数据"></a>查询表数据</h2><h3 id="基本查询"><a href="#基本查询" class="headerlink" title="基本查询"></a>基本查询</h3><ul>
<li><ol>
<li>根据过滤条件查询表中的单列或者多列或者全部列的信息<code>SELECT FROM WEHERE</code></li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT cust_id,cust_name FROM customers WHERE cust_id=<span class="number">10086</span>;</span><br></pre></td></tr></table></figure>

<p>其中过滤条件操作符有：<code>=，&lt;&gt;,!=,&lt;,&lt;=,&gt;,&gt;=,BETWEEN AND,IS NULL</code>；</p>
<ul>
<li><ol start="2">
<li>为查询出的某一列信息去重DISTINCT：</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT cust_name FROM customers;</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="3">
<li>限制单列查询结果的行数：</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT cust_name FROM customers LIMIT <span class="number">5</span>;   <span class="comment">// 表示从第0行开始取，共取5行数据；</span></span><br><span class="line">SELECT cust_name FROM customers LIMIT <span class="number">5</span>,<span class="number">5</span>; <span class="comment">// 表示从第5行（数据库中实际第6行记录）开始取，共取5行数据</span></span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="4">
<li>ORDER BY子句取一个或者多个列，据此对输出进行排序</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT cust_id,cust_name FROM customers ORDER BY cust_id DESC, cust_name;</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="5">
<li>IN操作符用来指定条件范围，范围中的每个条件都可以进行匹配</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT cust_id, cust_name FROM customers WHERE cust_id <span class="title function_ invoke__">IN</span> (<span class="number">1000</span>,<span class="number">2000</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="6">
<li>LIKE操作符用来表明模糊查询，与之配合使用的通配符有 **%**，%表示任何字符出现任何次数；_，_表示只能匹配一个字符</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT cust_id,cust_name FROM customers WHERE cust_name LIKE <span class="string">&#x27;%happy%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="7">
<li>使用分组查询并可以满足一定的分组过滤条件GROUP BY HAVING。如检索总计订单金额大于等于50的订单号和订单总金额，并按总金额进行排序</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT order_num,<span class="title function_ invoke__">SUM</span>(quantity*item_price) AS order_total FROM orderitems GROUP BY order_num HAVING <span class="title function_ invoke__">SUM</span>(quantity*item_price)&gt;=<span class="number">50</span> ORDER BY order_total;</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="8">
<li>WHERE和HAVING的比较。</li>
</ol>
</li>
</ul>
<p>WHERE是行级过滤，而HAVING是组级过滤。被WHERE过滤掉的数据不会出现在分组中。WHERE中通配符以及多个WHERE子句的连接同样适用于HAVING子句；</p>
<ul>
<li><ol start="9">
<li>GROUP BY的使用注意事项：</li>
</ol>
<p>（1）GROUP BY子句中可以嵌套分组（即通过多个列进行分组<code>GROUP BY cust_id, cust_name</code>），但是进行数据汇总时，是在最后规定的分组上进行；<br>（2）GROUP BY子句中列出的每个列都必须是检索列或者是有效的表达式。<br>（3）如果有NULL值，将值NULL作为一个分组进行返回，如果有多行NULL值，它们将分为一组</p>
</li>
<li><ol start="10">
<li>嵌套其他查询中的查询，称之为子查询。执行过程由里向外，里层查询结果作为外层查询的条件：</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT cust_id FROM orders WHERE order_num </span><br><span class="line"><span class="title function_ invoke__">IN</span> (SELECT order_num FROM orderitems WHERE prod_id = <span class="string">&#x27;happy&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="联结查询"><a href="#联结查询" class="headerlink" title="联结查询"></a>联结查询</h3><ul>
<li><ol>
<li>内联结用又称之为内部联结，是基于两个表 之间的的相等测试。如果不加过滤条件，会造成“笛卡尔积”</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT vend_name,prod_name,prod_price FROM vendors INNER JOIN products ON vendors.vend_id=products.vend_id;</span><br></pre></td></tr></table></figure>

<p>同样可以使用WHERE进行多表联结查询，但是更推荐使用INNER JOIN等联结方式；</p>
<ul>
<li><ol start="2">
<li>外部联结包括左外联结LEFT JOIN和右外联结RIGHT JOIN和全连接FULL JOIN。例如查询每个客户的订单数：</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT customers.cust_id,orders.orders_num FROM customers </span><br><span class="line">LEFT JOIN orders ON orders.cust_id =customers.cust_id;</span><br></pre></td></tr></table></figure>

<p>LEFT JOIN 会全部返回左表数据，RIGHT JOIN会全部返回右表数据，FULL JOIN会将左右两个表的数据全部返回</p>
<ul>
<li><ol start="3">
<li>联结查询与聚集函数一起使用。如查询每个客户的订单数：</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT customers.cust_name,customers.cust_id,<span class="title function_ invoke__">COUNT</span>(orders.order_num) AS num_ord FROM customers </span><br><span class="line">INNER JOIN orders ON customers.cust_id=orders.cust_id GROUP BY customers.cust_id；</span><br></pre></td></tr></table></figure>

<h3 id="组合查询"><a href="#组合查询" class="headerlink" title="组合查询"></a>组合查询</h3><ul>
<li><ol>
<li>多个查询（SELECT）可以使用UNION将多个查询结果进行合并成一个结果集返回，UNION必须包含两个及两个以上的SELECT查询，并且每个传必须包含相同的列、表达式或聚集函数，数据类型不必完全相同，MySQL会进行隐式的类型转换。</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT vend_id,prod_id,prod_price FROM products WHERE prod_price&gt;<span class="number">5</span> </span><br><span class="line">UINON SELECT vend_id,prod_id,prod_price FROM products WHERE vend_id <span class="title function_ invoke__">IN</span> (<span class="number">1001</span>,<span class="number">1002</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="2">
<li><strong>UNION</strong>返回的是去重后的结果，如果不需要去重则可以使用<strong>UNION ALL</strong>；</li>
</ol>
</li>
<li><ol start="3">
<li>可以多组合查询使用ORDER BY进行排序，但是是针对的最终的结果集进行排序，而不是其中单个SELECT查询进行排序，因此对于组合查询来说ORDER BY子句只有一个</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT vend_id,prod_id,prod_price FROM products WHERE prod_price&gt;<span class="number">5</span> </span><br><span class="line">UINON SELECT vend_id,prod_id,prod_price FROM products WHERE vend_id <span class="title function_ invoke__">IN</span> (<span class="number">1001</span>,<span class="number">1002</span>) ORDER BY vend_id;</span><br></pre></td></tr></table></figure>

<h3 id="使用函数对数据进行处理"><a href="#使用函数对数据进行处理" class="headerlink" title="使用函数对数据进行处理"></a>使用函数对数据进行处理</h3><ul>
<li><ol>
<li>拼接列名</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT <span class="title function_ invoke__">Concat</span> (vendName,<span class="string">&#x27;(&#x27;</span>,vendCountry,<span class="string">&#x27;)&#x27;</span>) FROM vendors ORDER BY vendName;</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="2">
<li>执行算术表达式计算</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT prodId, quantity,price, quantity*price AS expandedPrice FROM orderItems;</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="3">
<li>文本处理函数如Upper(),LTrim(),RTrim()等函数。比如使用Upper函数将文本转换成大写</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT vendName, <span class="title function_ invoke__">Upper</span>(vendName) FROM vendors ORDER BY vendName;</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="4">
<li>时间和日期处理函数，如Date(),Day()等</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT custId, orderNum FROM orders WHERE <span class="title function_ invoke__">Date</span>(orderDate)=<span class="string">&#x27;2015-09-01&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="5">
<li>数值处理函数，如Abs(),Cos()等；</li>
</ol>
</li>
<li><ol start="6">
<li>常用的聚集函数。如AVG(),COUNT(),MAX(),MIN()以及SUM()</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT <span class="title function_ invoke__">COUNT</span>(*) AS numbers, <span class="title function_ invoke__">MIN</span>(prod_price) AS price_min, <span class="title function_ invoke__">MAX</span>(prod_price) AS price_max,<span class="title function_ invoke__">AVG</span>(prod_price) AS price_avg FROM products;</span><br></pre></td></tr></table></figure>

<h2 id="插入表数据"><a href="#插入表数据" class="headerlink" title="插入表数据"></a>插入表数据</h2><ul>
<li><ol>
<li>向表中插入行数据可以使用INSERT INTO子句，更安全的方式是指定列名。</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO <span class="title function_ invoke__">customers</span> (cust_name, cust_email) <span class="title function_ invoke__">VALUES</span>(<span class="string">&#x27;happy&#x27;</span>,<span class="string">&#x27;happy@gmail.com&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>在INSERT INTO子句中能够省略列名的前提条件是：该列可以允许定义为NULL值或者在定义该列时给出去了默认值；</p>
<ul>
<li><ol start="2">
<li>如果插入多行数据可以将多组值用逗号进行分隔即可</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO <span class="title function_ invoke__">customers</span> (cust_name, cust_email) <span class="title function_ invoke__">VALUES</span>(<span class="string">&#x27;happy&#x27;</span>,<span class="string">&#x27;happy@gmail.com&#x27;</span>),(<span class="string">&#x27;smart&#x27;</span>,<span class="string">&#x27;smart@gmail.com&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="3">
<li>将查询出来的数据插入表中，可以使用INSERT SELECT语句</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO <span class="title function_ invoke__">customers</span>(cust_id,cust_contact) SELECT cust_id, cust_contact FROM customers WHERE cust_id&gt;<span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<p>其中<code>SELECT</code>中可以带WHERE过滤条件；<code>INSERT SELECT</code>通常被用于复制表数据</p>
<h2 id="更新表数据"><a href="#更新表数据" class="headerlink" title="更新表数据"></a>更新表数据</h2><ul>
<li><ol>
<li>如果要更新表数据的话，使用UPDATE子句</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE customers SET cust_name =<span class="string">&#x27;happy&#x27;</span>,cust_email=<span class="string">&#x27;happy@gmail.com&#x27;</span> WHERE cust_id = <span class="number">1001</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意：如果不加WHERE条件指定到某一行的话，会更新表中某一列全部的数据。</strong></p>
</blockquote>
<h2 id="删除表数据"><a href="#删除表数据" class="headerlink" title="删除表数据"></a>删除表数据</h2><ul>
<li><ol>
<li>如果从表中删除数据的话，可以使用DELETE子句</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM customers WHERE cust_id = <span class="number">10086</span>;</span><br></pre></td></tr></table></figure>

<p>删除的数据必定是表中行数据，而不是某一列。因此，与UPDATE子句相比，DELETE子句并不需要指定是哪一列，而仅仅只需要指定具体的表名即可;</p>
<ul>
<li><ol start="2">
<li>注意：如果不添加WHERE指定条件的话，会将整个表中所有行数据全部删除。另外，DELETE只是删除表中的数据，而不会删除表结构信息；</li>
</ol>
</li>
<li><ol start="3">
<li>如果想删除表中全部的数据，可以使用<code>TRUNCATE</code>，比<code>DELETE</code>删除效率更高；</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TRUNCATE table_name;</span><br></pre></td></tr></table></figure>

<h1 id="SQL中关键字执行顺序"><a href="#SQL中关键字执行顺序" class="headerlink" title="SQL中关键字执行顺序"></a>SQL中关键字执行顺序</h1><p>在SQL语句中每个关键字都会按照顺序往下执行，而每一步操作，会生成一个虚拟表，<br>最后产生的虚拟表会作为执行的最终结果返回。<br>下面的是常用的关键字的执行顺序：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">8</span>)<span class="title function_ invoke__">SELECT</span> (<span class="number">9</span>)DISTINCT&lt;select_list&gt;</span><br><span class="line">(<span class="number">1</span>)FROM &lt;left_table&gt;</span><br><span class="line">(<span class="number">3</span>)&lt;join_type&gt; JOIN &lt;right_table&gt;</span><br><span class="line">(<span class="number">2</span>)ON &lt;join_condition&gt;</span><br><span class="line">(<span class="number">4</span>)WHERE &lt;where_condition&gt;</span><br><span class="line">(<span class="number">5</span>)GROUP BY&lt;group_by_list&gt;</span><br><span class="line">(<span class="number">6</span>)WITH&#123;CUBE|ROLLUP&#125;</span><br><span class="line">(<span class="number">7</span>)HAVING&lt;having_condition&gt;</span><br><span class="line">(<span class="number">10</span>)ORDER BY&lt;order_by_list&gt;</span><br><span class="line">(<span class="number">11</span>)LIMIT&lt;limit_number&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><ol>
<li><strong>FROM</strong>：对FROM左边的表和右边的表计算笛卡尔积，产生虚表VT1；</li>
</ol>
</li>
<li><ol start="2">
<li><strong>ON</strong>：对虚拟表VT1进行ON筛选，只有那些符合<code>&lt;join_condition&gt;</code>条件的行才会被记录在虚拟表VT2中；</li>
</ol>
</li>
<li><ol start="3">
<li><strong>JOIN</strong>：如果是OUT JOIN，那么将保留表中（如左表或者右表）未匹配的行作为外部行添加到虚拟表VT2中，从而产生虚拟表VT3；</li>
</ol>
</li>
<li><ol start="4">
<li><strong>WHERE</strong>:对虚拟表VT3进行WHERE条件过滤，只有符合<code>&lt;where_condition&gt;</code>的记录才会被放入到虚拟表VT4；</li>
</ol>
</li>
<li><ol start="5">
<li><strong>GROUP BY</strong>：根据GROUP BY子句中的列，对虚拟表VT4进行分组操作，产生虚拟表VT5；</li>
</ol>
</li>
<li><ol start="6">
<li><strong>CUBE|ROLLUP</strong>：对虚拟表VT5进行CUBE或者ROLLUP操作，产生虚拟表VT6；</li>
</ol>
</li>
<li><ol start="7">
<li><strong>HAVING</strong>：对虚拟表VT6进行HAVING条件过滤，只有符合<code>&lt;having_condition&gt;</code>的记录才会被插入到虚拟表VT7中；</li>
</ol>
</li>
<li><ol start="8">
<li><strong>SELECT</strong>：执行SELECT操作，选择指定的列，插入到虚拟表VT8中；</li>
</ol>
</li>
<li><ol start="9">
<li><strong>DISTINCT</strong>：对虚拟表VT8中的记录进行去重，产生虚拟表VT9；</li>
</ol>
</li>
<li><ol start="10">
<li><strong>ORDER BY</strong>：将虚拟表VT9中的记录按照<order_by_list>进行排序操作，产生虚拟表VT10；</li>
</ol>
</li>
<li><ol start="11">
<li><strong>LIMIT</strong>：取出指定行的记录，产生虚拟表VT11，并将结果返回。</li>
</ol>
</li>
</ul>
<h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><p>MySQL索引的建立对于MySQL的高效运行是很重要的，索引可以大大提高MySQL的检索速度。</p>
<p>索引分单列索引和组合索引:<br>单列索引，即一个索引只包含单个列，而组合索引，即一个索引包含多个列。</p>
<h2 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h2><p>创建索引有两种方式，一种是直接利用CREATE INDEX进行创建，<br>另外一种则是通过修改表结构来进行添加，则是利用ALTER TABLE语句。</p>
<h3 id="使用CREATE-INDEX"><a href="#使用CREATE-INDEX" class="headerlink" title="使用CREATE INDEX"></a>使用CREATE INDEX</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE [UNIQUE|FULLTEXT|SPATIAL] INDEX index_name</span><br><span class="line">[USING index_type]</span><br><span class="line">ON <span class="title function_ invoke__">table_name</span> (index_col_name,...)</span><br></pre></td></tr></table></figure>

<p>其中对应的语法变量信息如下：</p>
<blockquote>
<p><strong>[UNIQUE|FULLTEXT|SPATIAL]</strong></p>
</blockquote>
<p>其中括号中的这三个关键字表示创建的索引类型，它们分别表示<strong>唯一索引</strong>、<strong>全文索引</strong>、<strong>空间索引</strong>三种不同的索引类型。<br>如果我们不指定任何关键字，则默认为<strong>普通索引</strong>。</p>
<blockquote>
<p><strong>index_name</strong></p>
</blockquote>
<p><code>index_name</code>表示索引的名称，由用户自行定义，以便于以后对该索引进行修改等管理操作。</p>
<blockquote>
<p><strong>index_type</strong></p>
</blockquote>
<p><code>index_type</code>表示索引的具体实现方式，在MySQL中，有两种不同形式的索引——<strong>BTREE索引</strong>和<strong>HASH索引</strong><br>在存储引擎为MyISAM和InnoDB的表中只能使用<code>BTREE</code>，其默认值就是<strong>BTREE</strong>；<br>在存储引擎为MEMORY或者HEAP的表中可以使用HASH和BTREE两种类型的索引，其默认值为HASH。</p>
<blockquote>
<p><strong>index_col_name</strong></p>
</blockquote>
<p><code>index_col_name</code>表示需要创建索引的字段名称，我们还可以针对多个字段创建复合索引，只需要在多个字段名称之间以英文逗号隔开即可<br>此外，对于CHAR或VARCHAR类型的字段，我们还可以只使用字段内容前面的一部分来创建索引，只需要在对应的字段名称后面加上形如(length)的指令即可，表示只需要使用字段内容前面的length个字符来创建索引。在这里，我们以customers表的cust_name字段(类型为VARCHAR(50))为例，使用cust_name字段的6个字符前缀来创建索引。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX idx_cust_name ON <span class="title function_ invoke__">user</span> (<span class="title function_ invoke__">cust_name</span>(<span class="number">6</span>));</span><br></pre></td></tr></table></figure>

<h3 id="使用ALTER-TABLE"><a href="#使用ALTER-TABLE" class="headerlink" title="使用ALTER TABLE"></a>使用ALTER TABLE</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name</span><br><span class="line">ADD [UNIQUE|FULLTEXT|SPATIAL] INDEX <span class="title function_ invoke__">index_name</span> </span><br><span class="line">(index_col_name,...) [USING index_type]</span><br></pre></td></tr></table></figure>

<h2 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h2><p>删除指定表中指定名称的索引，语法为：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name</span><br><span class="line">DROP INDEX index_name;</span><br></pre></td></tr></table></figure>

<p>例如删除名称为<code>idx_cust_name</code>的索引，其SQL语句为：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE customers</span><br><span class="line">DROP INDEX idx_cust_name;</span><br></pre></td></tr></table></figure>

<h2 id="修改索引"><a href="#修改索引" class="headerlink" title="修改索引"></a>修改索引</h2><p>在MySQL中并没有提供修改索引的直接指令，一般情况下，<br>我们需要先删除掉原索引，再根据需要创建一个同名的索引，从而变相地实现修改索引操作。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 先删除</span></span><br><span class="line">ALTER TABLE user</span><br><span class="line">DROP INDEX idx_user_username;</span><br><span class="line"><span class="comment">// 再以修改后的内容创建同名索引</span></span><br><span class="line">CREATE INDEX idx_cust_name ON <span class="title function_ invoke__">customers</span> (<span class="title function_ invoke__">cust_name</span>(<span class="number">8</span>));</span><br></pre></td></tr></table></figure>

<h2 id="查看索引"><a href="#查看索引" class="headerlink" title="查看索引"></a>查看索引</h2><p>在MySQL中，要查看某个数据库表中的索引也非常简单，只需要使用以下两个命令中的任意一种即可。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果查看索引前，没有使用user db_name等命令指定具体的数据库，则必须加上FROM db_name</span></span><br><span class="line">SHOW INDEX FROM table_name [FROM db_name]</span><br><span class="line"><span class="comment">// 如果查看索引前，没有使用user db_name等命令指定具体的数据库，则必须加上db_name.前缀</span></span><br><span class="line">SHOW INDEX FROM [db_name.]table_name</span><br></pre></td></tr></table></figure>

<h1 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h1><ul>
<li><ol>
<li>什么是存储过程？</li>
</ol>
</li>
</ul>
<blockquote>
<p>存储过程简单来说，就是为了复用性或者实现复杂的业务功能，而保存的一条或多条MySQL语句的集合，可将其视为批文件；</p>
</blockquote>
<ul>
<li><ol start="2">
<li>为什么使用存储过程？</li>
</ol>
</li>
</ul>
<blockquote>
<p>（1）通过把处理封装在容易使用的单元中，简化复杂的操作；<br>（2）由于不要求反复建立一系列处理步骤，这保证了数据的完整性，如果所有的开发人员和应用程序都使用同一存储过程，则所使用的代码都是相同的；<br>（3）简化对变动的管理。如果表名、列名或业务逻辑有变化，只需要更改存储过程的代码，使用它的开发人员甚至不需要知道这些变化，也就是具备了安全性；<br>（4）提高了性能，因为使用存储过程比单独使用SQL语句要快；<br>（5）存储过程可用来编写功能更灵活的代码。</p>
</blockquote>
<p>因此，存储过程的具备三个特性:<strong>简单可复用、安全以及高性能</strong>；</p>
<ul>
<li><ol start="3">
<li>存储过程的缺点？</li>
</ol>
</li>
</ul>
<blockquote>
<p>（1）存储过程编写比基本的SQL语句更加复杂，需要更高的技能；<br>（2）可能没有创建存储过程的权限，数据库管理员可能会限制创建存储过程的权限，允许用户使用存储过程，而不允许用户自由创建存储过程；</p>
</blockquote>
<h2 id="创建存储过程"><a href="#创建存储过程" class="headerlink" title="创建存储过程"></a>创建存储过程</h2><ol>
<li>创建存储过程。如需要统计用户订单总金额，如果该用户需要交税的话，订单总金额则需要再加上税费</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER <span class="comment">//</span></span><br><span class="line">CREATE PROCEDURE <span class="title function_ invoke__">ordertotal</span>(</span><br><span class="line">IN custid INT,</span><br><span class="line">IN taxable BOOLEAN,</span><br><span class="line">OUT ototal <span class="title function_ invoke__">DECIMAL</span>(<span class="number">8</span>,<span class="number">2</span>)</span><br><span class="line">)COMMENT <span class="string">&#x27;obtain total order price&#x27;</span></span><br><span class="line"></span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line"><span class="comment">/*declare variable for total*/</span></span><br><span class="line">DECLARE total <span class="title function_ invoke__">DECIMAL</span>(<span class="number">8</span>,<span class="number">2</span>);</span><br><span class="line">DECLARE taxrate INT DEFAULT <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*get the order total*/</span></span><br><span class="line"></span><br><span class="line">SELECT <span class="title function_ invoke__">SUM</span>(item_price*item_quantity) INTO total</span><br><span class="line">FROM customers</span><br><span class="line">WHERE cust_id = custid;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*is this taxable?*/</span></span><br><span class="line"></span><br><span class="line">IF taxable THEN</span><br><span class="line">	SELECT total+(total/<span class="number">100</span>*taxrate) INTO total;</span><br><span class="line">END IF;</span><br><span class="line">SELECT total INTO ototal;</span><br><span class="line">END <span class="comment">//</span></span><br></pre></td></tr></table></figure>

<p>有这样一些细节:</p>
<ol>
<li><p>使用<code>CREATE PROCEDURE</code>语句进行创建，<code>()</code>圆括号中为存储过程的参数，其中参数类型有：</p>
</li>
<li><p><strong>IN类型</strong>，表示传递给存储过程</p>
</li>
<li><p><strong>OUT类型</strong>，表示存储过程返回的结果，在调用存储过程时需要传入@开始的变量</p>
</li>
<li><p><strong>INOUT类型</strong>，表示在存储过程中可以传入和传出</p>
</li>
<li><p><strong>DECLARE</strong>用来声明一个变量，如这里的<code>total，taxrate</code>。注意MySQL中定义变量时都是变量名在前，数据类型在后</p>
</li>
<li><p>存储过程具体逻辑写在<strong>BEGIN END</strong>之间</p>
</li>
<li><p>将值赋给变量使用<strong>INTO</strong>关键字</p>
</li>
<li><p>由于存储过程中每个SQL语句中用；作为分隔符，会和单个SQL造成冲突，因此可使用DELIMITER重新定义分类符，<br>如该例子中定义&#x2F;&#x2F;为分隔符，自然存储过程结尾就用END &#x2F;&#x2F;结尾，而不再是END。同时，分隔符&#x2F;&#x2F;成对出现后，恢复到默认的”;”作为分隔符</p>
</li>
</ol>
<h2 id="执行存储过程"><a href="#执行存储过程" class="headerlink" title="执行存储过程"></a>执行存储过程</h2><ul>
<li><ol>
<li>使用CALL子句执行存储过程，CALL子句接受存储过程的名称以及需要传递的参数。</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CALL <span class="title function_ invoke__">ordertotal</span>(<span class="number">1</span>,<span class="literal">TRUE</span>,@total);</span><br><span class="line">SELECT @total;</span><br></pre></td></tr></table></figure>

<p>如果存储过程中定义了OUT类型的输入参数，那么在执行存储过程时需要传入变量，如这里<code>@total</code>，并且变量都是用 <strong>@</strong> 开始的。<br>如果存储过程中没有参数的话，就用空圆括号表示即可，<code>CALL ordertotal()</code>；</p>
<h2 id="删除存储过程"><a href="#删除存储过程" class="headerlink" title="删除存储过程"></a>删除存储过程</h2><ul>
<li><ol>
<li>删除存储过程，可以使用<strong>DROP PROCEDURE</strong>子句。如<code>DROP PROCEDURE ordertotal</code>；</li>
</ol>
</li>
</ul>
<h2 id="查询存储过程"><a href="#查询存储过程" class="headerlink" title="查询存储过程"></a>查询存储过程</h2><ul>
<li><ol>
<li>显示创建一个存储过程的语句，可以使用SHOW CREATE PROCEDURE。如<code>SHOW CREATE PROCEDURE ordertotal</code>；</li>
</ol>
</li>
<li><ol start="2">
<li>查询所有存储过程的状态，如果在定义存储过程中使用COMMENT添加注释，可以查看。同时可以LIKE进行过滤结果。如<code>SHOW PROCEDURE STATUS LIKE &#39;%order%&#39;</code>;</li>
</ol>
</li>
</ul>
<h1 id="事务处理"><a href="#事务处理" class="headerlink" title="事务处理"></a>事务处理</h1><ul>
<li><ol>
<li>什么是事务？</li>
</ol>
</li>
</ul>
<blockquote>
<p>事务处理是用来维护数据库的完整性，它保证成批的MySQL操作要么完全执行，要么完全不执行。<br>事务处理是一种机制，用来管理必须成批执行的MySQL操作，它们要么时作为整体执行或者完全不执行。</p>
</blockquote>
<ul>
<li><ol start="2">
<li>关键概念：</li>
</ol>
</li>
</ul>
<blockquote>
<ol>
<li>事务：是指一组SQL语句；</li>
<li>回退：是指撤销指定的SQL语句的过程；</li>
<li>提交：指将未存储的SQL语句的结果写入数据库表中</li>
<li>保留点：指事务处理中设置的临时占位符，可以对它发布回退；</li>
</ol>
</blockquote>
<ul>
<li><ol start="3">
<li>如何创建执行事务？</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">START TRANSACTION;</span><br><span class="line">INSERT INTO <span class="title function_ invoke__">customers</span> (cust_name,item_price,item_quantity) <span class="title function_ invoke__">VALUES</span> (<span class="string">&#x27;1&#x27;</span>,<span class="number">5</span>,<span class="number">18</span>);</span><br><span class="line">SELECT * FROM customers;</span><br><span class="line">SAVEPOINT insertinto;</span><br><span class="line">INSERT INTO <span class="title function_ invoke__">customers</span> (cust_name,item_price,item_quantity) <span class="title function_ invoke__">VALUES</span> (<span class="string">&#x27;2&#x27;</span>,<span class="number">5</span>,<span class="number">18</span>);</span><br><span class="line">ROLLBACK TO insertinto;</span><br></pre></td></tr></table></figure>

<p>执行结果为：<strong>插入数据(‘1’,5,18)有效</strong>，因为，只会从保留点SAFEPOINT之后开始回退，也就是说保留点<code>SAFEPOINT</code>之前的SQL语句执行的结果仍然有效。</p>
<p>有这样一些细节：</p>
<ol>
<li><strong>STAET TRANSACTION</strong>用来表示下面的SQL语句集为一段事务</li>
<li><strong>SAFEPOINT</strong> 用于指定保留点<code>insertinto</code></li>
<li><strong>ROLLBACK TO</strong>表示从指定保留点开始回退，也就是说保留点之前的SQL语句执行结果依然有效。<br>如果仅仅使用<strong>ROLLBACK</strong>进行回退的话就表示从<code>STAET TRANSACTION</code>之后所有的SQL语句执行效果都会撤销</li>
</ol>
<ul>
<li><ol start="4">
<li>MySQL提交（写或保存）操作是自动进行的，这称之为隐含提交。但是在事务处理块中，提交不会隐含进行，要使用<strong>COMMIT</strong>子句进行提交。如：</li>
</ol>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">START TRANSACTION;</span><br><span class="line">INSERT INTO <span class="title function_ invoke__">customers</span> (cust_name,item_price,item_quantity) <span class="title function_ invoke__">VALUES</span> (<span class="string">&#x27;1&#x27;</span>,<span class="number">5</span>,<span class="number">18</span>);</span><br><span class="line">INSERT INTO <span class="title function_ invoke__">customers</span> (cust_name,item_price,item_quantity) <span class="title function_ invoke__">VALUES</span> (<span class="string">&#x27;2&#x27;</span>,<span class="number">5</span>,<span class="number">18</span>);</span><br><span class="line">COMMIT;</span><br></pre></td></tr></table></figure>

<p>采用<code>COMMIT</code>提交事务，如果两条SQL语句都执行成功，才会将数据都写入表中。</p>
<h1 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h1><h2 id="什么是触发器"><a href="#什么是触发器" class="headerlink" title="什么是触发器?"></a>什么是触发器?</h2><blockquote>
<p>当某条SQL语句发生时，自动执行某些其他的SQL语句的时候就需要使用到触发器。<br>触发器只能响应：<code>DELETE</code>, <code>INSERT</code>, <code>UPDATE</code>这三个特定操作。</p>
</blockquote>
<h2 id="创建触发器"><a href="#创建触发器" class="headerlink" title="创建触发器?"></a>创建触发器?</h2><p>创建触发器时需要给出最重要的四条信息：</p>
<p>1.全局唯一的触发器名；<br>2.触发器关联的表；<br>3.触发器在何时执行（操作执行之前或者之后）<br>4.触发器应该响应的活动（DELETE, INSERT或者UPDATE）;</p>
<p>由于触发器只能响应特定的三种类型的操作，因此可创建的触发器也就三种类型: <strong>INSERT触发器</strong>，<strong>DELETE触发器</strong>以及<strong>UPDATE触发器</strong>。</p>
<h3 id="INSERT触发器"><a href="#INSERT触发器" class="headerlink" title="INSERT触发器"></a>INSERT触发器</h3><p>在执行INSERT触发器时，也这样几点需要注意:</p>
<ol>
<li>在INSERT触发器代码内，可以引用一个名为NEW的虚拟表，可以用NEW来访问刚插入的行数据</li>
<li>在BEFORE INSERT触发器中，NEW中的值可以被更新</li>
<li>对于AUTO_INCREMENT列，NEW在INSERT执行之前包含0，在INSERT执行之后包含新的自定生成值。</li>
</ol>
<p>创建一个INSERT触发器，每次插入一行数据，每次会返回当前插入的行数据的id。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*创建触发器*/</span></span><br><span class="line">CREATE TRIGGER insertcustomers AFTER INSERT ON customers</span><br><span class="line">FOR EACH ROW SELECT NEW.cust_id INTO @newinsertid;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*执行触发器*/</span></span><br><span class="line">INSERT INTO <span class="title function_ invoke__">customers</span> (cust_name,item_price,item_quantity) <span class="title function_ invoke__">VALUES</span> (<span class="string">&#x27;2&#x27;</span>,<span class="number">5</span>,<span class="number">18</span>);</span><br><span class="line">SELECT @newinsertid;</span><br></pre></td></tr></table></figure>

<p>有这样一些细节：</p>
<ol>
<li>使用<code>CREATE TRIGGER</code>来创建触发器;</li>
<li><code>AFTER INSERT</code>表明在插入行数据之后，触发器才会执行特征操作;</li>
<li><code>FOR EACH ROW</code> 表示对插入的每一行数据，触发器都起作用;</li>
<li>针对<code>INSERT</code>触发器，可以使用虚拟表NEW，来使用刚插入的行数据。<br>比如例子中，<code>SELECT NEW.cust_id INTO @newinsertid</code>表示将新插入的行数据的id赋值给变量<code>@newinsertid</code>；</li>
</ol>
<h3 id="DELETE触发器"><a href="#DELETE触发器" class="headerlink" title="DELETE触发器"></a>DELETE触发器</h3><p>DELETE触发器在DELETE语句执行之前或者之后，需要知道以下两点：</p>
<ol>
<li>在DELETE触发器代码内，可以引用一个名为OLD的虚拟表，来访问被删除的行；</li>
<li>OLD表中的数据只能读，不能被更新，而在INSERT触发器中，就可以通过NEW来更新被插入的行数据；</li>
</ol>
<p>例如，针对customers表，当删除一行数据时，返回被删除数据的<code>cust_id</code>以及<code>cust_name</code>:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*创建DELETE触发器*/</span></span><br><span class="line"> </span><br><span class="line">DELIMITER <span class="comment">//</span></span><br><span class="line">CREATE TRIGGER insertcustomers AFTER DELETE ON customers</span><br><span class="line">FOR EACH ROW </span><br><span class="line">BEGIN </span><br><span class="line">  SELECT OLD.cust_name INTO @deletecustname;</span><br><span class="line">  SELECT OLD.cust_id INTO @deletecustid;</span><br><span class="line">END <span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*调用DELETE触发器*/</span></span><br><span class="line">DELETE FROM customers WHERE cust_id = <span class="number">3</span>;</span><br><span class="line">SELECT @deletecustname;</span><br><span class="line">SELECT @deletecustid;</span><br></pre></td></tr></table></figure>

<p>基本上与创建INSERT触发器一样，只不过在DELETE触发器中只能使用OLD来访问被删除的行数据。</p>
<h3 id="UPDATE触发器"><a href="#UPDATE触发器" class="headerlink" title="UPDATE触发器"></a>UPDATE触发器</h3><p>UPDATE触发器在UPDATE语句执行之前或者之后执行，需要知道一下几点：</p>
<ol>
<li>在BEFORE UPDATE触发器中可以使用NEW和OLD来访问数据，而在AFTER UPDATE触发器中使用NEW来访问数据会报错，只能使用OLD来访问数据；</li>
<li>在BEFORE UPDATE触发器中，NEW中的值可以被改变，即允许更改将用于UPDATE的数据；</li>
<li>OLD中的行数据只能读，不能被更新；</li>
</ol>
<p>一个UPDATE触发器示例如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*创建UPDATE触发器*/</span></span><br><span class="line"></span><br><span class="line">DELIMITER <span class="comment">//</span></span><br><span class="line">CREATE TRIGGER insertcustomers BEFORE UPDATE ON customers</span><br><span class="line">FOR EACH ROW </span><br><span class="line">BEGIN </span><br><span class="line"></span><br><span class="line">SELECT NEW.cust_name INTO @beforeupdate;</span><br><span class="line">SET NEW.cust_name = <span class="string">&#x27;reset_name&#x27;</span>;</span><br><span class="line">SELECT OLD.cust_name INTO @afterupdate;</span><br><span class="line">END <span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*调用UPDATE触发器*/</span></span><br><span class="line">UPDATE customers SET cust_name = <span class="string">&#x27;happy&#x27;</span> WHERE cust_id = <span class="number">5</span>;</span><br><span class="line">SELECT @beforeupdate;</span><br><span class="line">SELECT @afterupdate;</span><br></pre></td></tr></table></figure>

<p>输出为<code>@beforeupdate为‘happay’</code>，而<code>@afterupdate为&#39;reset_name&#39;</code>。有这样一些细节：</p>
<ol>
<li>NEW虚拟表中的数据可以更改，如这里采用 <code>SET NEW.cust_name = &#39;reset_name&#39;</code>;，将待更新的<code>cust_name由“happy”变成了“reset_name”</code>；</li>
<li>在BEFORE UPDATE触发器中可以使用NEW和OLD来访问数据，而在AFTER UPDATE触发器中使用NEW来访问数据会报错；</li>
</ol>
<h2 id="删除触发器"><a href="#删除触发器" class="headerlink" title="删除触发器?"></a>删除触发器?</h2><p>删除触发器，可以使用 <strong>DROP TRIGGER</strong> 语句，比如<code>DROP TRIGGER insertcustomers</code>;。<br>触发器不能更新或者覆盖，如果要修改触发器，必须删除这个触发器。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5ae55861f265da0ba062ec71#heading-17">MySQL命令，一篇文章替你全部搞定</a></li>
</ul>

        
      
    </div>

    <footer class="article-footer">
      
      
      <div>
        <ul class="post-copyright">
          <li class="post-copyright-author">
          <strong>本文作者:  </strong>CAO XIAN LIANG</a>
          </li>
          <li class="post-copyright-link">
          <strong>本文链接:  </strong>
          <a href="/2018/11/12/MySQL-cmd-Summary/" target="_blank" title="MySQL 复习笔记">http://blog.caoxl.com/2018/11/12/MySQL-cmd-Summary/</a>
          </li>
          <li class="post-copyright-license">
            <strong>版权声明:   </strong>
            本博客所有文章除特别声明外，均采用 <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a>
            许可协议。转载请注明出处
          </li>
         
        </ul>
<div>

      
      
      
      
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%8B%E5%8A%A1/" rel="tag">事务</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%A7%A6%E5%8F%91%E5%99%A8/" rel="tag">触发器</a></li></ul>

      

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/11/13/Gcc-Update-To-Latest/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          CentOS 下更新GCC版本至GCC 8.0.2
        
      </div>
    </a>
  
  
    <a href="/2018/11/08/PHP-Qrcode-Gif/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">PHP 生成动态GIF验证码</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A1%A8-%E6%88%96%E6%95%B0%E6%8D%AE%E5%BA%93-%E6%93%8D%E4%BD%9C%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.</span> <span class="nav-text">表(或数据库)操作语句</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E8%A1%A8%EF%BC%88%E6%88%96%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%89"><span class="nav-number">1.1.</span> <span class="nav-text">查询表（或数据库）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B0%E5%BB%BA%E8%A1%A8%EF%BC%88%E6%88%96%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%89"><span class="nav-number">1.2.</span> <span class="nav-text">新建表（或数据库）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8%EF%BC%88%E6%88%96%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%89"><span class="nav-number">1.3.</span> <span class="nav-text">删除表（或数据库）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E8%A1%A8"><span class="nav-number">1.4.</span> <span class="nav-text">更新表</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A1%A8%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.</span> <span class="nav-text">表数据操作语句</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="nav-number">2.1.</span> <span class="nav-text">查询表数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.1.1.</span> <span class="nav-text">基本查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%81%94%E7%BB%93%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.1.2.</span> <span class="nav-text">联结查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.1.3.</span> <span class="nav-text">组合查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%AF%B9%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E5%A4%84%E7%90%86"><span class="nav-number">2.1.4.</span> <span class="nav-text">使用函数对数据进行处理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%92%E5%85%A5%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="nav-number">2.2.</span> <span class="nav-text">插入表数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="nav-number">2.3.</span> <span class="nav-text">更新表数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="nav-number">2.4.</span> <span class="nav-text">删除表数据</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL%E4%B8%AD%E5%85%B3%E9%94%AE%E5%AD%97%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="nav-number">3.</span> <span class="nav-text">SQL中关键字执行顺序</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95"><span class="nav-number">4.</span> <span class="nav-text">索引</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="nav-number">4.1.</span> <span class="nav-text">创建索引</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8CREATE-INDEX"><span class="nav-number">4.1.1.</span> <span class="nav-text">使用CREATE INDEX</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8ALTER-TABLE"><span class="nav-number">4.1.2.</span> <span class="nav-text">使用ALTER TABLE</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="nav-number">4.2.</span> <span class="nav-text">删除索引</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E7%B4%A2%E5%BC%95"><span class="nav-number">4.3.</span> <span class="nav-text">修改索引</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%B4%A2%E5%BC%95"><span class="nav-number">4.4.</span> <span class="nav-text">查看索引</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">5.</span> <span class="nav-text">存储过程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">5.1.</span> <span class="nav-text">创建存储过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">5.2.</span> <span class="nav-text">执行存储过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">5.3.</span> <span class="nav-text">删除存储过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">5.4.</span> <span class="nav-text">查询存储过程</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86"><span class="nav-number">6.</span> <span class="nav-text">事务处理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">7.</span> <span class="nav-text">触发器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">7.1.</span> <span class="nav-text">什么是触发器?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">7.2.</span> <span class="nav-text">创建触发器?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#INSERT%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">7.2.1.</span> <span class="nav-text">INSERT触发器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DELETE%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">7.2.2.</span> <span class="nav-text">DELETE触发器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UPDATE%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">7.2.3.</span> <span class="nav-text">UPDATE触发器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">7.3.</span> <span class="nav-text">删除触发器?</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">8.</span> <span class="nav-text">参考</span></a></li></ol>
    
    </div>
  </aside>

</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2017 - 2023 Keep It Simple And Stupid All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				访客数 : <span id="busuanzi_value_site_uv"></span> |  
				访问量 : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>




<script src="/js/scripts.js"></script>





  
<script src="/js/dialog.js"></script>









	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            Keep It Simple And Stupid
          </div>
          <div class="panel-body">
            Copyright © 2023 CAO XIAN LIANG All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>